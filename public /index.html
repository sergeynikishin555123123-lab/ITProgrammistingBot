<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>üöú IT Farm | –û–±—É—á–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é —Å –Ω—É–ª—è</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Source+Code+Pro:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* –ù–æ–≤–∞—è —Ü–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞ –¥–ª—è IT —Ñ–µ—Ä–º—ã */
        :root {
            --grass-dark: #2D5016;
            --grass-medium: #4A7C2A;
            --grass-light: #7CB342;
            --grass-fresh: #9CCC65;
            --soil-dark: #5D4037;
            --soil-medium: #795548;
            --soil-light: #A1887F;
            --sky-blue: #4FC3F7;
            --sky-light: #B3E5FC;
            --sun-yellow: #FFD54F;
            --sun-dark: #FFB300;
            --code-bg: #263238;
            --code-text: #ECEFF1;
            --success: #81C784;
            --warning: #FFB74D;
            --error: #E57373;
            --primary-accent: var(--grass-light);
            --secondary-accent: var(--sun-yellow);
            
            --shadow-sm: 0 2px 8px rgba(45, 80, 22, 0.1);
            --shadow: 0 4px 16px rgba(45, 80, 22, 0.15);
            --shadow-lg: 0 8px 32px rgba(45, 80, 22, 0.2);
            
            --radius-sm: 8px;
            --radius: 12px;
            --radius-lg: 16px;
            --radius-xl: 20px;
            --radius-full: 9999px;
            
            --transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --nav-height: 70px;
            --bottom-nav-height: 60px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        html, body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(180deg, var(--sky-blue), var(--sky-light));
            color: #2C3E50;
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
            padding-top: var(--nav-height);
            padding-bottom: var(--bottom-nav-height);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 16px;
            width: 100%;
        }
        
        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        .top-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--nav-height);
            background: rgba(255, 255, 255, 0.95);
            border-bottom: 3px solid var(--grass-light);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-family: 'Source Code Pro', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--grass-dark);
            text-decoration: none;
        }
        
        .logo-icon {
            font-size: 1.8rem;
            color: var(--sun-yellow);
        }
        
        .user-avatar {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--grass-light), var(--grass-dark));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
            cursor: pointer;
            border: 3px solid white;
            box-shadow: var(--shadow-sm);
        }
        
        /* –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: var(--bottom-nav-height);
            background: rgba(255, 255, 255, 0.98);
            border-top: 3px solid var(--grass-light);
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 0 10px;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            color: var(--grass-dark);
            padding: 8px 12px;
            border-radius: var(--radius);
            transition: var(--transition);
            min-width: 70px;
            cursor: pointer;
        }
        
        .nav-item.active {
            color: var(--sun-yellow);
            background: rgba(127, 195, 66, 0.1);
            transform: translateY(-5px);
        }
        
        .nav-item i {
            font-size: 1.3rem;
            margin-bottom: 4px;
        }
        
        .nav-item span {
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .page {
            display: none;
            animation: fadeIn 0.3s ease;
            min-height: calc(100vh - var(--nav-height) - var(--bottom-nav-height));
            padding: 20px 0;
        }
        
        .page.active {
            display: block;
        }
        
        /* –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ */
        .auth-screen {
            min-height: 70vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .auth-card {
            background: white;
            border-radius: var(--radius-xl);
            padding: 40px 30px;
            box-shadow: var(--shadow-lg);
            border: 3px solid var(--grass-light);
            max-width: 400px;
            width: 100%;
            text-align: center;
        }
        
        .auth-logo {
            font-size: 3.5rem;
            color: var(--sun-yellow);
            margin-bottom: 20px;
        }
        
        .auth-title {
            font-family: 'Source Code Pro', monospace;
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--grass-dark);
            margin-bottom: 10px;
        }
        
        .auth-subtitle {
            color: var(--grass-medium);
            margin-bottom: 30px;
            font-size: 1.1rem;
        }
        
        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 14px 28px;
            border: none;
            border-radius: var(--radius);
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--grass-light), var(--grass-dark));
            color: white;
            box-shadow: 0 4px 12px rgba(127, 195, 66, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(127, 195, 66, 0.4);
        }
        
        .btn-secondary {
            background: white;
            color: var(--grass-dark);
            border: 2px solid var(--grass-light);
        }
        
        /* –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ - –§–µ—Ä–º–∞ */
        .farm-container {
            background: linear-gradient(180deg, var(--sky-blue) 20%, var(--grass-light) 80%);
            border-radius: var(--radius-xl);
            padding: 20px;
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
            min-height: 400px;
            border: 5px solid var(--soil-dark);
        }
        
        .farm-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: var(--radius);
            border: 2px solid var(--grass-light);
        }
        
        .farm-stats {
            display: flex;
            gap: 20px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--grass-dark);
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 0.8rem;
            color: var(--grass-medium);
            font-weight: 500;
        }
        
        .farm-field {
            position: relative;
            width: 100%;
            height: 300px;
            background: var(--grass-fresh);
            border-radius: var(--radius);
            border: 3px solid var(--soil-medium);
            overflow: hidden;
        }
        
        /* –≠–ª–µ–º–µ–Ω—Ç—ã —Ñ–µ—Ä–º—ã */
        .grass {
            position: absolute;
            background: var(--grass-light);
            border-radius: 50%;
        }
        
        .soil {
            position: absolute;
            background: var(--soil-medium);
            border-radius: 50%;
        }
        
        .farm-element {
            position: absolute;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            animation: float 3s ease-in-out infinite;
        }
        
        .farm-element i {
            font-size: 2rem;
            margin-bottom: 5px;
        }
        
        /* –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Ä–æ–∫–æ–≤ */
        .lessons-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .lesson-card {
            background: white;
            border-radius: var(--radius);
            padding: 20px;
            border: 2px solid var(--grass-light);
            box-shadow: var(--shadow);
            transition: var(--transition);
            cursor: pointer;
        }
        
        .lesson-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--sun-yellow);
        }
        
        .lesson-card.completed {
            border-color: var(--success);
            background: rgba(129, 199, 132, 0.05);
        }
        
        .lesson-card.locked {
            opacity: 0.6;
            cursor: not-allowed;
            border-color: #ccc;
        }
        
        .lesson-icon {
            font-size: 2.5rem;
            color: var(--grass-light);
            margin-bottom: 15px;
            text-align: center;
        }
        
        .lesson-card.completed .lesson-icon {
            color: var(--success);
        }
        
        .lesson-number {
            display: inline-block;
            background: var(--grass-light);
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        /* –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Ä–æ–∫–∞ */
        .lesson-content {
            background: white;
            border-radius: var(--radius);
            padding: 30px;
            margin-top: 20px;
            border: 2px solid var(--grass-light);
        }
        
        .code-editor {
            background: var(--code-bg);
            border-radius: var(--radius);
            padding: 20px;
            margin: 20px 0;
            font-family: 'Source Code Pro', monospace;
            color: var(--code-text);
            overflow-x: auto;
        }
        
        .task-container {
            background: rgba(127, 195, 66, 0.1);
            border-radius: var(--radius);
            padding: 20px;
            margin: 20px 0;
            border-left: 4px solid var(--grass-light);
        }
        
        .run-button {
            background: linear-gradient(135deg, var(--sun-yellow), var(--sun-dark));
            color: var(--grass-dark);
            font-weight: 700;
            padding: 12px 30px;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
            margin-top: 20px;
        }
        
        .run-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 213, 79, 0.4);
        }
        
        /* –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ */
        .progress-container {
            background: white;
            border-radius: var(--radius);
            padding: 30px;
            margin-top: 20px;
            border: 2px solid var(--grass-light);
        }
        
        .progress-bar {
            height: 20px;
            background: #eee;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--grass-light), var(--grass-dark));
            border-radius: 10px;
            transition: width 1s ease;
        }
        
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .achievement-card {
            background: white;
            border-radius: var(--radius);
            padding: 15px;
            text-align: center;
            border: 2px solid var(--grass-light);
        }
        
        .achievement-card.locked {
            filter: grayscale(1);
            opacity: 0.5;
        }
        
        /* –ü—Ä–æ—Ñ–∏–ª—å */
        .profile-card {
            background: white;
            border-radius: var(--radius);
            padding: 30px;
            margin-top: 20px;
            border: 2px solid var(--grass-light);
            text-align: center;
        }
        
        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--grass-light), var(--grass-dark));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2.5rem;
            font-weight: 700;
            margin: 0 auto 20px;
            border: 5px solid white;
            box-shadow: var(--shadow);
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes grow {
            from { transform: scale(0); }
            to { transform: scale(1); }
        }
        
        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            justify-content: center;
            align-items: center;
            z-index: 2000;
            padding: 20px;
        }
        
        .modal.active {
            display: flex;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: var(--radius-lg);
            max-width: 500px;
            width: 100%;
            animation: fadeIn 0.3s ease;
            border: 3px solid var(--grass-light);
        }
        
        /* –§–æ—Ä–º—ã */
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-input {
            width: 100%;
            padding: 14px;
            border: 2px solid var(--grass-light);
            border-radius: var(--radius);
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            transition: var(--transition);
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--sun-yellow);
            box-shadow: 0 0 0 3px rgba(127, 195, 66, 0.2);
        }
        
        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 3000;
            background: white;
            border-radius: var(--radius);
            padding: 16px 20px;
            box-shadow: var(--shadow-lg);
            border-left: 4px solid var(--grass-light);
            animation: fadeIn 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            max-width: 90%;
            width: 350px;
        }
        
        .notification.success {
            border-left-color: var(--success);
        }
        
        .notification.error {
            border-left-color: var(--error);
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .lessons-container {
                grid-template-columns: 1fr;
            }
            
            .farm-stats {
                flex-direction: column;
                gap: 10px;
            }
            
            .farm-field {
                height: 250px;
            }
        }
        
        /* –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
        .interactive {
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .interactive:hover {
            transform: scale(1.05);
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <!-- –í–µ—Ä—Ö–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="top-nav">
        <a href="#" class="logo" onclick="app.navigateToPage('farm')">
            <i class="fas fa-tractor logo-icon"></i>
            <span>IT Farm</span>
        </a>
        
        <div class="user-avatar" id="userAvatar" onclick="app.toggleUserMenu()">
            –ì
        </div>
    </nav>
    
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main>
        <!-- –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
        <div id="auth-page" class="page active">
            <div class="container auth-screen">
                <div class="auth-card">
                    <i class="fas fa-tractor auth-logo"></i>
                    <h1 class="auth-title">IT Farm</h1>
                    <p class="auth-subtitle">–û–±—É—á–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é —Å –Ω—É–ª—è —á–µ—Ä–µ–∑ –∏–≥—Ä—É</p>
                    
                    <div style="margin: 30px 0;">
                        <button class="btn btn-primary" onclick="app.showRegisterModal()" style="width: 100%; margin-bottom: 15px;">
                            <i class="fas fa-user-plus"></i>
                            –ù–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ
                        </button>
                        <button class="btn btn-secondary" onclick="app.showLoginModal()" style="width: 100%;">
                            <i class="fas fa-sign-in-alt"></i>
                            –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
                        </button>
                    </div>
                    
                    <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee;">
                        <p style="color: var(--grass-medium); font-size: 0.9rem;">
                            <i class="fas fa-graduation-cap"></i>
                            –ù–∞—á–Ω–∏—Ç–µ —Å –Ω—É–ª—è –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å–≤–æ—é —Ü–∏—Ñ—Ä–æ–≤—É—é —Ñ–µ—Ä–º—É
                        </p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ - –§–µ—Ä–º–∞ -->
        <div id="farm-page" class="page">
            <div class="container">
                <div class="farm-container">
                    <div class="farm-header">
                        <div class="farm-stats">
                            <div class="stat-item">
                                <div class="stat-value" id="levelStat">1</div>
                                <div class="stat-label">–£—Ä–æ–≤–µ–Ω—å</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="xpStat">0/100</div>
                                <div class="stat-label">–û–ø—ã—Ç</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="coinsStat">0</div>
                                <div class="stat-label">–ú–æ–Ω–µ—Ç—ã</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value" id="lessonsStat">0/20</div>
                                <div class="stat-label">–£—Ä–æ–∫–∏</div>
                            </div>
                        </div>
                        
                        <button class="run-button" onclick="app.runCurrentCode()">
                            <i class="fas fa-play"></i> –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–¥
                        </button>
                    </div>
                    
                    <div class="farm-field" id="farmField">
                        <!-- –§–µ—Ä–º–∞ –±—É–¥–µ—Ç –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        <div style="text-align: center; padding: 100px 20px; color: white;">
                            <i class="fas fa-seedling" style="font-size: 3rem; margin-bottom: 20px;"></i>
                            <p>–ù–∞—á–Ω–∏—Ç–µ –ø–µ—Ä–≤—ã–π —É—Ä–æ–∫, —á—Ç–æ–±—ã –æ–∂–∏–≤–∏—Ç—å —Å–≤–æ—é —Ñ–µ—Ä–º—É!</p>
                        </div>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button class="btn btn-primary" onclick="app.navigateToPage('lessons')">
                        <i class="fas fa-book-open"></i>
                        –ü–µ—Ä–µ–π—Ç–∏ –∫ —É—Ä–æ–∫–∞–º
                    </button>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Ä–æ–∫–æ–≤ -->
        <div id="lessons-page" class="page">
            <div class="container">
                <h1 style="color: var(--grass-dark); margin-bottom: 10px;">
                    <i class="fas fa-graduation-cap"></i>
                    –£—Ä–æ–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
                </h1>
                <p style="color: var(--grass-medium); margin-bottom: 20px;">
                    –ü—Ä–æ—Ö–æ–¥–∏—Ç–µ —É—Ä–æ–∫–∏ –ø–æ –ø–æ—Ä—è–¥–∫—É, —á—Ç–æ–±—ã —Ä–∞–∑–≤–∏–≤–∞—Ç—å —Å–≤–æ—é —Ñ–µ—Ä–º—É
                </p>
                
                <div class="lessons-container" id="lessonsList">
                    <!-- –£—Ä–æ–∫–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Ä–æ–∫–∞ -->
        <div id="lesson-page" class="page">
            <div class="container">
                <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                    <button class="btn btn-secondary" onclick="app.navigateToPage('lessons')">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <h1 style="color: var(--grass-dark);" id="lessonTitle">–£—Ä–æ–∫ 1</h1>
                </div>
                
                <div class="lesson-content">
                    <div id="lessonContent">
                        <!-- –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —É—Ä–æ–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                    
                    <div class="code-editor">
                        <pre id="codeEditor" contenteditable="true">// –í–∞—à –∫–æ–¥ –∑–¥–µ—Å—å
console.log("–ü—Ä–∏–≤–µ—Ç, —Ñ–µ—Ä–º–µ—Ä!");</pre>
                    </div>
                    
                    <div class="task-container">
                        <h3 style="color: var(--grass-dark); margin-bottom: 10px;">
                            <i class="fas fa-tasks"></i>
                            –ó–∞–¥–∞–Ω–∏–µ
                        </h3>
                        <p id="taskDescription">–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–≤–µ–¥–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –≤ –∫–æ–Ω—Å–æ–ª—å</p>
                    </div>
                    
                    <div style="display: flex; gap: 10px; margin-top: 20px;">
                        <button class="run-button" onclick="app.runLessonCode()">
                            <i class="fas fa-play"></i> –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–¥
                        </button>
                        <button class="btn btn-primary" onclick="app.checkLessonSolution()">
                            <i class="fas fa-check"></i> –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ -->
        <div id="progress-page" class="page">
            <div class="container">
                <h1 style="color: var(--grass-dark); margin-bottom: 20px;">
                    <i class="fas fa-chart-line"></i>
                    –í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å
                </h1>
                
                <div class="progress-container">
                    <h3 style="color: var(--grass-dark); margin-bottom: 15px;">–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span>0%</span>
                        <span id="progressPercent">0%</span>
                        <span>100%</span>
                    </div>
                    
                    <h3 style="color: var(--grass-dark); margin-top: 30px; margin-bottom: 15px;">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h3>
                    <div class="achievements-grid" id="achievementsList">
                        <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
        <div id="profile-page" class="page">
            <div class="container">
                <h1 style="color: var(--grass-dark); margin-bottom: 20px;">
                    <i class="fas fa-user"></i>
                    –ü—Ä–æ—Ñ–∏–ª—å
                </h1>
                
                <div class="profile-card">
                    <div class="profile-avatar" id="profileAvatar">
                        –ì
                    </div>
                    
                    <h2 id="profileName">–ì–æ—Å—Ç—å</h2>
                    <p style="color: var(--grass-medium); margin-bottom: 20px;" id="profileEmail"></p>
                    
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; margin: 20px 0;">
                        <div class="stat-item">
                            <div class="stat-value" id="profileLevel">1</div>
                            <div class="stat-label">–£—Ä–æ–≤–µ–Ω—å</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="profileXP">0</div>
                            <div class="stat-label">–û–ø—ã—Ç</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="profileCoins">0</div>
                            <div class="stat-label">–ú–æ–Ω–µ—Ç—ã</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="profileLessons">0</div>
                            <div class="stat-label">–£—Ä–æ–∫–∏</div>
                        </div>
                    </div>
                    
                    <button class="btn btn-secondary" onclick="app.logout()" style="width: 100%;">
                        <i class="fas fa-sign-out-alt"></i>
                        –í—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
                    </button>
                </div>
            </div>
        </div>
    </main>
    
    <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="bottom-nav" id="bottomNav" style="display: none;">
        <a href="#" class="nav-item active" onclick="app.navigateToPage('farm')" data-page="farm">
            <i class="fas fa-tractor"></i>
            <span>–§–µ—Ä–º–∞</span>
        </a>
        <a href="#" class="nav-item" onclick="app.navigateToPage('lessons')" data-page="lessons">
            <i class="fas fa-book-open"></i>
            <span>–£—Ä–æ–∫–∏</span>
        </a>
        <a href="#" class="nav-item" onclick="app.navigateToPage('progress')" data-page="progress">
            <i class="fas fa-chart-line"></i>
            <span>–ü—Ä–æ–≥—Ä–µ—Å—Å</span>
        </a>
        <a href="#" class="nav-item" onclick="app.navigateToPage('profile')" data-page="profile">
            <i class="fas fa-user"></i>
            <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
        </a>
    </nav>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <h3 style="color: var(--grass-dark); margin-bottom: 20px;">–í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç</h3>
            <form id="loginForm">
                <div class="form-group">
                    <input type="email" id="loginEmail" class="form-input" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <input type="password" id="loginPassword" class="form-input" placeholder="–ü–∞—Ä–æ–ª—å" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    –í–æ–π—Ç–∏
                </button>
            </form>
            <div style="text-align: center; margin-top: 20px;">
                <p style="color: var(--grass-medium); font-size: 0.9rem;">
                    –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? 
                    <a href="#" onclick="app.showRegisterModal()" style="color: var(--grass-light); text-decoration: none; font-weight: 600;">
                        –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                    </a>
                </p>
            </div>
        </div>
    </div>
    
    <div class="modal" id="registerModal">
        <div class="modal-content">
            <h3 style="color: var(--grass-dark); margin-bottom: 20px;">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3>
            <form id="registerForm">
                <div class="form-group">
                    <input type="text" id="registerName" class="form-input" placeholder="–ò–º—è" required>
                </div>
                <div class="form-group">
                    <input type="email" id="registerEmail" class="form-input" placeholder="Email" required>
                </div>
                <div class="form-group">
                    <input type="password" id="registerPassword" class="form-input" placeholder="–ü–∞—Ä–æ–ª—å (–º–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤)" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç
                </button>
            </form>
        </div>
    </div>
    
    <script>
        const app = {
            currentUser: JSON.parse(localStorage.getItem('currentUser')) || null,
            currentToken: localStorage.getItem('token') || null,
            currentLesson: null,
            userProgress: JSON.parse(localStorage.getItem('userProgress')) || {
                level: 1,
                xp: 0,
                coins: 0,
                completedLessons: [],
                farmState: {
                    grass: 100, // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç—Ä–∞–≤—ã –Ω–∞ –ø–æ–ª–µ (–≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö)
                    elements: [] // —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ —Ñ–µ—Ä–º–µ
                }
            },
            
            lessons: [], // –ë—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —Å —Å–µ—Ä–≤–µ—Ä–∞
            achievements: [], // –ë—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —Å —Å–µ—Ä–≤–µ—Ä–∞
            
            API_BASE_URL: 'http://localhost:3000', // –ò–∑–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä
            
            // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
            init: function() {
                console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è IT Farm...');
                
                this.setupEventListeners();
                this.loadLessons();
                this.loadAchievements();
                this.updateUI();
                
                // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω
                if (this.currentUser) {
                    this.navigateToPage('farm');
                }
            },
            
            // ==================== –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• ====================
            loadLessons: async function() {
                try {
                    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É
                    // const response = await fetch(`${this.API_BASE_URL}/api/lessons`);
                    // this.lessons = await response.json();
                    
                    // –í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
                    this.lessons = [
                        {
                            id: 1,
                            title: "–û—Å–Ω–æ–≤—ã JavaScript",
                            description: "–ù–∞–ø–∏—à–∏—Ç–µ —Å–≤–æ–π –ø–µ—Ä–≤—ã–π –∫–æ–¥ –∏ —Å–∫–æ—Å–∏—Ç–µ —Ç—Ä–∞–≤—É –Ω–∞ —Ñ–µ—Ä–º–µ",
                            icon: "fas fa-code",
                            difficulty: "easy",
                            duration: "15 –º–∏–Ω",
                            requirements: [],
                            content: `
                                <h3>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–∏—Ä –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è!</h3>
                                <p>JavaScript - —ç—Ç–æ —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –æ–∂–∏–≤–ª—è–µ—Ç –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã. –î–∞–≤–∞–π—Ç–µ –Ω–∞—á–Ω–µ–º —Å –ø—Ä–æ—Å—Ç–æ–≥–æ:</p>
                                <p>–ö–æ–º–∞–Ω–¥–∞ <code>console.log()</code> –≤—ã–≤–æ–¥–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.</p>
                            `,
                            task: "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ console.log() —á—Ç–æ–±—ã –≤—ã–≤–µ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ '–¢—Ä–∞–≤–∞ —Å–∫–æ—à–µ–Ω–∞!'",
                            solution: "console.log('–¢—Ä–∞–≤–∞ —Å–∫–æ—à–µ–Ω–∞!');",
                            farmEffect: "clearGrass" // –û—á–∏—â–∞–µ—Ç —Ç—Ä–∞–≤—É –Ω–∞ —Ñ–µ—Ä–º–µ
                        },
                        {
                            id: 2,
                            title: "–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö",
                            description: "–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è –ø–æ—Å–∞–¥–∫–∏ —Å–µ–º—è–Ω",
                            icon: "fas fa-seedling",
                            difficulty: "easy",
                            duration: "20 –º–∏–Ω",
                            requirements: [1],
                            content: `
                                <h3>–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è –¥–∞–Ω–Ω—ã—Ö</h3>
                                <p>–í JavaScript –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–±—ä—è–≤–ª—è—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é <code>let</code>, <code>const</code> –∏–ª–∏ <code>var</code>.</p>
                                <p>–ü—Ä–∏–º–µ—Ä: <code>let plantName = "–ü—à–µ–Ω–∏—Ü–∞";</code></p>
                            `,
                            task: "–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é seeds –∏ –ø—Ä–∏—Å–≤–æ–π—Ç–µ –µ–π –∑–Ω–∞—á–µ–Ω–∏–µ 10",
                            solution: "let seeds = 10;",
                            farmEffect: "plantSeeds"
                        },
                        // –î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ —É—Ä–æ–∫–æ–≤ –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
                    ];
                    
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —É—Ä–æ–∫–æ–≤:', error);
                }
            },
            
            loadAchievements: async function() {
                try {
                    // –í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                    this.achievements = [
                        { id: 1, title: "–ü–µ—Ä–≤—ã–π –∫–æ–¥", description: "–í—ã–ø–æ–ª–Ω–µ–Ω –ø–µ—Ä–≤—ã–π —É—Ä–æ–∫", icon: "fas fa-star", condition: "completedLessons >= 1" },
                        { id: 2, title: "–§–µ—Ä–º–µ—Ä-–Ω–æ–≤–∏—á–æ–∫", description: "–í—ã–ø–æ–ª–Ω–µ–Ω–æ 5 —É—Ä–æ–∫–æ–≤", icon: "fas fa-tractor", condition: "completedLessons >= 5" },
                        { id: 3, title: "–û–ø—ã—Ç–Ω—ã–π –∫–æ–¥–µ—Ä", description: "–î–æ—Å—Ç–∏–≥–Ω—É—Ç 3 —É—Ä–æ–≤–µ–Ω—å", icon: "fas fa-laptop-code", condition: "level >= 3" }
                    ];
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π:', error);
                }
            },
            
            // ==================== –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø ====================
            login: async function(email, password) {
                try {
                    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É
                    // const response = await fetch(`${this.API_BASE_URL}/api/auth/login`, {
                    //     method: 'POST',
                    //     headers: { 'Content-Type': 'application/json' },
                    //     body: JSON.stringify({ email, password })
                    // });
                    // const data = await response.json();
                    
                    // –î–ª—è –¥–µ–º–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                    this.currentUser = {
                        id: 1,
                        name: email.split('@')[0],
                        email: email,
                        createdAt: new Date().toISOString()
                    };
                    
                    this.currentToken = 'demo_token_' + Date.now();
                    
                    localStorage.setItem('currentUser', JSON.stringify(this.currentUser));
                    localStorage.setItem('token', this.currentToken);
                    
                    this.showNotification('–£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥!', 'success');
                    this.closeModal('loginModal');
                    this.updateUI();
                    this.navigateToPage('farm');
                    
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞:', error);
                    this.showNotification('–û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ.', 'error');
                }
            },
            
            register: async function(name, email, password) {
                try {
                    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ —Å–µ—Ä–≤–µ—Ä—É
                    // const response = await fetch(`${this.API_BASE_URL}/api/auth/register`, {...});
                    
                    this.currentUser = {
                        id: Date.now(),
                        name: name,
                        email: email,
                        createdAt: new Date().toISOString()
                    };
                    
                    this.currentToken = 'demo_token_' + Date.now();
                    
                    localStorage.setItem('currentUser', JSON.stringify(this.currentUser));
                    localStorage.setItem('token', this.currentToken);
                    
                    // –°–±—Ä–æ—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    this.userProgress = {
                        level: 1,
                        xp: 0,
                        coins: 0,
                        completedLessons: [],
                        farmState: {
                            grass: 100,
                            elements: []
                        }
                    };
                    localStorage.setItem('userProgress', JSON.stringify(this.userProgress));
                    
                    this.showNotification('–ê–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω! –ù–∞—á–Ω–∏—Ç–µ –ø–µ—Ä–≤—ã–π —É—Ä–æ–∫.', 'success');
                    this.closeModal('registerModal');
                    this.updateUI();
                    this.navigateToPage('farm');
                    
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:', error);
                    this.showNotification('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.', 'error');
                }
            },
            
            logout: function() {
                localStorage.removeItem('currentUser');
                localStorage.removeItem('token');
                this.currentUser = null;
                this.currentToken = null;
                this.showNotification('–í—ã –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã', 'success');
                this.navigateToPage('auth');
                this.updateUI();
            },
            
            // ==================== –£–†–û–ö–ò ====================
            loadLessonsPage: function() {
                const container = document.getElementById('lessonsList');
                if (!container) return;
                
                container.innerHTML = '';
                
                this.lessons.forEach(lesson => {
                    const isCompleted = this.userProgress.completedLessons.includes(lesson.id);
                    const isLocked = lesson.requirements.some(req => !this.userProgress.completedLessons.includes(req));
                    
                    const card = document.createElement('div');
                    card.className = `lesson-card ${isCompleted ? 'completed' : ''} ${isLocked && !isCompleted ? 'locked' : ''}`;
                    
                    if (!isLocked || isCompleted) {
                        card.onclick = () => this.startLesson(lesson.id);
                    }
                    
                    card.innerHTML = `
                        <div class="lesson-number">${lesson.id}</div>
                        <div class="lesson-icon">
                            <i class="${lesson.icon}"></i>
                        </div>
                        <h3 style="color: var(--grass-dark); margin-bottom: 8px;">${lesson.title}</h3>
                        <p style="color: var(--grass-medium); font-size: 0.9rem; margin-bottom: 10px;">${lesson.description}</p>
                        <div style="display: flex; justify-content: space-between; font-size: 0.8rem; color: var(--grass-light);">
                            <span><i class="fas fa-clock"></i> ${lesson.duration}</span>
                            <span><i class="fas fa-signal"></i> ${lesson.difficulty}</span>
                        </div>
                        ${isCompleted ? 
                            '<div style="margin-top: 10px; color: var(--success);"><i class="fas fa-check-circle"></i> –í—ã–ø–æ–ª–Ω–µ–Ω–æ</div>' : 
                            ''}
                        ${isLocked && !isCompleted ? 
                            '<div style="margin-top: 10px; color: var(--warning);"><i class="fas fa-lock"></i> –¢—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —É—Ä–æ–∫–∏</div>' : 
                            ''}
                    `;
                    
                    container.appendChild(card);
                });
            },
            
            startLesson: function(lessonId) {
                const lesson = this.lessons.find(l => l.id === lessonId);
                if (!lesson) return;
                
                this.currentLesson = lesson;
                
                document.getElementById('lessonTitle').textContent = `–£—Ä–æ–∫ ${lesson.id}: ${lesson.title}`;
                document.getElementById('lessonContent').innerHTML = lesson.content;
                document.getElementById('taskDescription').textContent = lesson.task;
                document.getElementById('codeEditor').textContent = '// –í–∞—à –∫–æ–¥ –∑–¥–µ—Å—å\n' + 
                    (lesson.id === 1 ? 'console.log("–¢—Ä–∞–≤–∞ —Å–∫–æ—à–µ–Ω–∞!");' : 'let seeds = 10;');
                
                this.navigateToPage('lesson');
            },
            
            runLessonCode: function() {
                const code = document.getElementById('codeEditor').textContent;
                try {
                    // –í –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Å—Ä–µ–¥–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å eval, –Ω–æ –ª—É—á—à–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
                    console.log('–ó–∞–ø—É—Å–∫ –∫–æ–¥–∞:', code);
                    
                    // –î–ª—è –¥–µ–º–æ –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                    const output = this.simulateCodeExecution(code);
                    this.showNotification(`–ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω: ${output}`, 'success');
                    
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞:', error);
                    this.showNotification('–û—à–∏–±–∫–∞ –≤ –∫–æ–¥–µ: ' + error.message, 'error');
                }
            },
            
            checkLessonSolution: function() {
                if (!this.currentLesson) return;
                
                const userCode = document.getElementById('codeEditor').textContent.trim();
                const isCorrect = this.checkCodeSolution(userCode, this.currentLesson.solution);
                
                if (isCorrect) {
                    this.completeLesson(this.currentLesson.id);
                    this.showNotification('–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –£—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω!', 'success');
                } else {
                    this.showNotification('–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∫–æ–¥–∞.', 'error');
                }
            },
            
            checkCodeSolution: function(userCode, solution) {
                // –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è –¥–µ–º–æ
                // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
                return userCode.includes(solution.split(';')[0]);
            },
            
            completeLesson: function(lessonId) {
                if (!this.userProgress.completedLessons.includes(lessonId)) {
                    this.userProgress.completedLessons.push(lessonId);
                    
                    // –ù–∞—á–∏—Å–ª—è–µ–º –æ–ø—ã—Ç –∏ –º–æ–Ω–µ—Ç—ã
                    this.userProgress.xp += 100;
                    this.userProgress.coins += 50;
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–≤—ã—à–µ–Ω–∏–µ —É—Ä–æ–≤–Ω—è
                    if (this.userProgress.xp >= (this.userProgress.level * 100)) {
                        this.userProgress.level++;
                        this.userProgress.xp = 0;
                        this.showNotification(`–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –¥–æ—Å—Ç–∏–≥–ª–∏ ${this.userProgress.level} —É—Ä–æ–≤–Ω—è!`, 'success');
                    }
                    
                    // –ü—Ä–∏–º–µ–Ω—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç –∫ —Ñ–µ—Ä–º–µ
                    this.applyFarmEffect(lessonId);
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
                    localStorage.setItem('userProgress', JSON.stringify(this.userProgress));
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                    this.updateUI();
                    this.renderFarm();
                }
            },
            
            // ==================== –§–ï–†–ú–ê ====================
            applyFarmEffect: function(lessonId) {
                const lesson = this.lessons.find(l => l.id === lessonId);
                if (!lesson || !lesson.farmEffect) return;
                
                switch(lesson.farmEffect) {
                    case 'clearGrass':
                        this.userProgress.farmState.grass = 0;
                        this.userProgress.farmState.elements.push({
                            type: 'soil',
                            x: 50,
                            y: 50,
                            size: 30
                        });
                        break;
                        
                    case 'plantSeeds':
                        this.userProgress.farmState.elements.push({
                            type: 'seed',
                            x: 30,
                            y: 30,
                            icon: 'fas fa-seedling',
                            color: '#7CB342'
                        });
                        break;
                        
                    // –î–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–≥–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
                }
            },
            
            renderFarm: function() {
                const field = document.getElementById('farmField');
                if (!field) return;
                
                field.innerHTML = '';
                
                // –†–∏—Å—É–µ–º —Ç—Ä–∞–≤—É
                if (this.userProgress.farmState.grass > 0) {
                    this.createGrassPattern(field, this.userProgress.farmState.grass);
                }
                
                // –†–∏—Å—É–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã —Ñ–µ—Ä–º—ã
                this.userProgress.farmState.elements.forEach(element => {
                    const el = document.createElement('div');
                    el.className = 'farm-element interactive';
                    el.style.left = element.x + '%';
                    el.style.top = element.y + '%';
                    
                    if (element.type === 'soil') {
                        el.innerHTML = '<div style="width: ' + element.size + 'px; height: ' + element.size + 'px; border-radius: 50%; background: ' + element.color + ';"></div>';
                    } else if (element.icon) {
                        el.innerHTML = `<i class="${element.icon}" style="color: ${element.color}; font-size: 2rem;"></i>`;
                    }
                    
                    field.appendChild(el);
                });
                
                // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
                this.addInteractiveElements(field);
            },
            
            createGrassPattern: function(container, grassPercentage) {
                const grassCount = Math.floor((grassPercentage / 100) * 50);
                
                for (let i = 0; i < grassCount; i++) {
                    const grass = document.createElement('div');
                    grass.className = 'grass interactive';
                    grass.style.width = Math.random() * 30 + 20 + 'px';
                    grass.style.height = grass.style.width;
                    grass.style.left = Math.random() * 90 + '%';
                    grass.style.top = Math.random() * 80 + '%';
                    grass.style.backgroundColor = `hsl(${100 + Math.random() * 40}, 60%, ${40 + Math.random() * 20}%)`;
                    grass.style.opacity = 0.7 + Math.random() * 0.3;
                    
                    grass.onclick = () => {
                        if (this.userProgress.farmState.grass > 0) {
                            this.userProgress.farmState.grass -= 2;
                            this.userProgress.coins += 1;
                            localStorage.setItem('userProgress', JSON.stringify(this.userProgress));
                            this.updateUI();
                            grass.style.opacity = '0';
                            setTimeout(() => grass.remove(), 300);
                        }
                    };
                    
                    container.appendChild(grass);
                }
            },
            
            addInteractiveElements: function(container) {
                // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–ª–Ω—Ü–µ
                const sun = document.createElement('div');
                sun.className = 'farm-element pulse';
                sun.style.left = '85%';
                sun.style.top = '10%';
                sun.innerHTML = '<i class="fas fa-sun" style="color: var(--sun-yellow); font-size: 3rem;"></i>';
                container.appendChild(sun);
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ–±–ª–∞–∫–∞
                for (let i = 0; i < 3; i++) {
                    const cloud = document.createElement('div');
                    cloud.className = 'farm-element';
                    cloud.style.left = (10 + i * 25) + '%';
                    cloud.style.top = (15 + Math.random() * 10) + '%';
                    cloud.innerHTML = '<i class="fas fa-cloud" style="color: white; font-size: 2.5rem;"></i>';
                    container.appendChild(cloud);
                }
            },
            
            runCurrentCode: function() {
                // –ó–∞–ø—É—Å–∫ –∫–æ–¥–∞ —Å —Ñ–µ—Ä–º—ã
                this.showNotification('–ó–∞–ø—É—Å–∫ –∫–æ–¥–∞... –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (F12)', 'success');
                console.log('–ö–æ–¥ —Å —Ñ–µ—Ä–º—ã –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...');
            },
            
            // ==================== –ü–†–û–ì–†–ï–°–° ====================
            loadProgressPage: function() {
                // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
                const totalLessons = this.lessons.length;
                const completedLessons = this.userProgress.completedLessons.length;
                const progressPercent = Math.round((completedLessons / totalLessons) * 100);
                
                document.getElementById('progressFill').style.width = progressPercent + '%';
                document.getElementById('progressPercent').textContent = progressPercent + '%';
                
                // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è
                this.renderAchievements();
            },
            
            renderAchievements: function() {
                const container = document.getElementById('achievementsList');
                if (!container) return;
                
                container.innerHTML = '';
                
                this.achievements.forEach(achievement => {
                    const isUnlocked = this.checkAchievementCondition(achievement.condition);
                    
                    const card = document.createElement('div');
                    card.className = `achievement-card ${!isUnlocked ? 'locked' : ''}`;
                    
                    card.innerHTML = `
                        <i class="${achievement.icon}" style="font-size: 2rem; color: ${isUnlocked ? 'var(--sun-yellow)' : '#ccc'}; margin-bottom: 10px;"></i>
                        <h4 style="font-size: 0.9rem; margin-bottom: 5px;">${achievement.title}</h4>
                        <p style="font-size: 0.75rem; color: var(--grass-medium);">${achievement.description}</p>
                    `;
                    
                    container.appendChild(card);
                });
            },
            
            checkAchievementCondition: function(condition) {
                // –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π –¥–ª—è –¥–µ–º–æ
                const stats = this.userProgress;
                
                if (condition === "completedLessons >= 1") {
                    return stats.completedLessons.length >= 1;
                }
                if (condition === "completedLessons >= 5") {
                    return stats.completedLessons.length >= 5;
                }
                if (condition === "level >= 3") {
                    return stats.level >= 3;
                }
                
                return false;
            },
            
            // ==================== –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò–ù–¢–ï–†–§–ï–ô–°–ê ====================
            updateUI: function() {
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –Ω–∞ —Ñ–µ—Ä–º–µ
                document.getElementById('levelStat').textContent = this.userProgress.level;
                document.getElementById('xpStat').textContent = `${this.userProgress.xp}/${this.userProgress.level * 100}`;
                document.getElementById('coinsStat').textContent = this.userProgress.coins;
                document.getElementById('lessonsStat').textContent = `${this.userProgress.completedLessons.length}/${this.lessons.length}`;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å
                if (this.currentUser) {
                    document.getElementById('userAvatar').textContent = this.currentUser.name.charAt(0).toUpperCase();
                    document.getElementById('profileAvatar').textContent = this.currentUser.name.charAt(0).toUpperCase();
                    document.getElementById('profileName').textContent = this.currentUser.name;
                    document.getElementById('profileEmail').textContent = this.currentUser.email;
                    
                    document.getElementById('profileLevel').textContent = this.userProgress.level;
                    document.getElementById('profileXP').textContent = this.userProgress.xp;
                    document.getElementById('profileCoins').textContent = this.userProgress.coins;
                    document.getElementById('profileLessons').textContent = this.userProgress.completedLessons.length;
                    
                    document.getElementById('bottomNav').style.display = 'flex';
                } else {
                    document.getElementById('bottomNav').style.display = 'none';
                }
                
                // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º —Ñ–µ—Ä–º—É –µ—Å–ª–∏ –æ–Ω–∞ –∞–∫—Ç–∏–≤–Ω–∞
                if (document.getElementById('farm-page').classList.contains('active')) {
                    this.renderFarm();
                }
            },
            
            // ==================== –ù–ê–í–ò–ì–ê–¶–ò–Ø ====================
            navigateToPage: function(pageId) {
                // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                document.querySelectorAll('.page').forEach(page => {
                    page.classList.remove('active');
                });
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
                const targetPage = document.getElementById(pageId + '-page');
                if (targetPage) {
                    targetPage.classList.add('active');
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
                    document.querySelectorAll('.nav-item').forEach(item => {
                        item.classList.remove('active');
                        if (item.getAttribute('data-page') === pageId) {
                            item.classList.add('active');
                        }
                    });
                    
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                    switch(pageId) {
                        case 'farm':
                            this.renderFarm();
                            break;
                        case 'lessons':
                            this.loadLessonsPage();
                            break;
                        case 'lesson':
                            // –î–∞–Ω–Ω—ã–µ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —É—Ä–æ–∫–∞
                            break;
                        case 'progress':
                            this.loadProgressPage();
                            break;
                        case 'profile':
                            // –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –≤ updateUI
                            break;
                    }
                }
            },
            
            // ==================== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================
            simulateCodeExecution: function(code) {
                // –°–∏–º—É–ª—è—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –¥–ª—è –¥–µ–º–æ
                if (code.includes('console.log')) {
                    return '–°–æ–æ–±—â–µ–Ω–∏–µ –≤—ã–≤–µ–¥–µ–Ω–æ –≤ –∫–æ–Ω—Å–æ–ª—å';
                } else if (code.includes('let') || code.includes('const') || code.includes('var')) {
                    return '–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å–æ–∑–¥–∞–Ω–∞';
                }
                return '–ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ';
            },
            
            showNotification: function(message, type) {
                const notification = document.createElement('div');
                notification.className = `notification ${type}`;
                notification.innerHTML = `<i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i> ${message}`;
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.remove();
                }, 3000);
            },
            
            showLoginModal: function() {
                document.getElementById('loginModal').classList.add('active');
            },
            
            showRegisterModal: function() {
                document.getElementById('registerModal').classList.add('active');
            },
            
            closeModal: function(modalId) {
                document.getElementById(modalId).classList.remove('active');
            },
            
            toggleUserMenu: function() {
                // –ü—Ä–æ—Å—Ç–æ–µ –º–µ–Ω—é –¥–ª—è –¥–µ–º–æ
                if (this.currentUser) {
                    this.navigateToPage('profile');
                } else {
                    this.showLoginModal();
                }
            },
            
            // ==================== –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô ====================
            setupEventListeners: function() {
                // –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
                const loginForm = document.getElementById('loginForm');
                if (loginForm) {
                    loginForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        const email = document.getElementById('loginEmail').value;
                        const password = document.getElementById('loginPassword').value;
                        this.login(email, password);
                    });
                }
                
                // –§–æ—Ä–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
                const registerForm = document.getElementById('registerForm');
                if (registerForm) {
                    registerForm.addEventListener('submit', (e) => {
                        e.preventDefault();
                        const name = document.getElementById('registerName').value;
                        const email = document.getElementById('registerEmail').value;
                        const password = document.getElementById('registerPassword').value;
                        this.register(name, email, password);
                    });
                }
                
                // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –∏—Ö
                document.addEventListener('click', (e) => {
                    if (e.target.classList.contains('modal')) {
                        e.target.classList.remove('active');
                    }
                });
            }
        };
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', () => {
            app.init();
        });
        
        // –î–µ–ª–∞–µ–º app –¥–æ—Å—Ç—É–ø–Ω—ã–º –≥–ª–æ–±–∞–ª—å–Ω–æ
        window.app = app;
    </script>
</body>
</html>
