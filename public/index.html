<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Artistic Soul | –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ==================== –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò ==================== */
        :root {
            --blue-primary: #0066FF;
            --blue-dark: #0052CC;
            --blue-light: #4D94FF;
            --blue-bright: #3399FF;
            --blue-pale: #E6F2FF;
            --pink: #FF3366;
            --white: #FFFFFF;
            --gray-light: #F5F7FA;
            --gray-medium: #E1E5EB;
            --gray-dark: #7F8C8D;
            --success: #28A745;
            --error: #DC3545;
            --warning: #FFC107;
            --shadow: 0 4px 12px rgba(0, 102, 255, 0.15);
        }

        @font-face {
            font-family: 'ArtisticSoul';
            src: url('https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92Fr1Mu4mxK.woff2');
            font-weight: 400;
        }

        @font-face {
            font-family: 'ArtisticSoul';
            src: url('https://fonts.gstatic.com/s/roboto/v30/KFOlCnqEu92Fr1MmEU9fBBc4.woff2');
            font-weight: 700;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'ArtisticSoul', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--white);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 0;
            margin: 0;
        }

        /* ==================== –°–¢–†–ê–ù–ò–¶–ê –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò ==================== */
        #auth-page {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            background: linear-gradient(135deg, var(--blue-pale) 0%, var(--white) 100%);
        }

        .auth-container {
            max-width: 400px;
            width: 100%;
            background: var(--white);
            border-radius: 20px;
            padding: 40px 30px;
            box-shadow: var(--shadow);
            border: 2px solid var(--blue-primary);
        }

        .auth-logo {
            text-align: center;
            margin-bottom: 30px;
        }

        .logo-image {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            margin-bottom: 20px;
            border: 3px solid var(--blue-primary);
            background: linear-gradient(45deg, var(--blue-primary), var(--blue-bright));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            font-weight: bold;
            margin: 0 auto 20px;
        }

        .auth-logo-text {
            font-family: 'ArtisticSoul';
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--blue-primary);
            margin-bottom: 5px;
        }

        .auth-subtitle {
            font-size: 1rem;
            color: var(--gray-dark);
            text-align: center;
            margin-bottom: 30px;
        }

        .auth-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--blue-primary);
            text-align: center;
            margin-bottom: 20px;
        }

        .phone-form {
            margin-bottom: 25px;
        }

        .phone-label {
            display: block;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--blue-primary);
            margin-bottom: 8px;
        }

        .phone-input {
            width: 100%;
            padding: 16px;
            border: 2px solid var(--blue-primary);
            border-radius: 12px;
            font-size: 1.1rem;
            color: #333;
            background: var(--white);
            font-family: 'ArtisticSoul', sans-serif;
            transition: all 0.3s ease;
        }

        .phone-input:focus {
            outline: none;
            border-color: var(--pink);
            box-shadow: 0 0 0 3px rgba(255, 51, 102, 0.2);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 16px 30px;
            border: 2px solid var(--blue-primary);
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 15px;
            background: var(--blue-primary);
            color: var(--white);
            font-family: 'ArtisticSoul', sans-serif;
            text-decoration: none;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .btn-primary {
            background: var(--blue-primary);
            color: var(--white);
        }

        .btn-primary:hover {
            background: var(--blue-dark);
            border-color: var(--blue-dark);
        }

        .btn-secondary {
            background: var(--white);
            color: var(--blue-primary);
        }

        .btn-secondary:hover {
            background: var(--blue-primary);
            color: var(--white);
        }

        .btn-pink {
            background: var(--pink);
            color: var(--white);
            border-color: var(--pink);
        }

        .btn-pink:hover {
            background: #ff1a53;
            border-color: #ff1a53;
        }

        .auth-footer {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 2px solid var(--gray-medium);
            text-align: center;
            color: var(--gray-dark);
            font-size: 0.9rem;
        }

        /* ==================== –û–°–ù–û–í–ù–û–ô –ò–ù–¢–ï–†–§–ï–ô–° ==================== */
        .app-container {
            display: none;
            min-height: 100vh;
            flex-direction: column;
        }

        /* –í–ï–†–•–ù–ò–ô –ë–ê–† */
        .top-bar {
            background: var(--blue-primary);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 102, 255, 0.2);
        }

        .logo-small {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--blue-primary);
            font-weight: bold;
            font-size: 1.2rem;
        }

        .logo-text {
            font-family: 'ArtisticSoul';
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--white);
            margin-left: 10px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--white);
            color: var(--blue-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            cursor: pointer;
        }

        /* –ù–ò–ñ–ù–Ø–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 70px;
            background: var(--white);
            border-top: 2px solid var(--blue-primary);
            display: flex;
            justify-content: space-around;
            align-items: center;
            z-index: 1000;
            box-shadow: 0 -2px 10px rgba(0, 102, 255, 0.1);
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: var(--gray-dark);
            text-decoration: none;
            padding: 10px 15px;
            border-radius: 12px;
            transition: all 0.3s ease;
            width: 80px;
            height: 60px;
        }

        .nav-item.active {
            color: var(--blue-primary);
            background: var(--blue-pale);
            transform: translateY(-5px);
        }

        .nav-item i {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .nav-item span {
            font-size: 0.75rem;
            font-weight: 600;
        }

        /* –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ */
        .main-content {
            flex: 1;
            padding: 20px;
            padding-bottom: 90px;
            overflow-y: auto;
            background: var(--white);
        }

        /* –í–´–ë–û–† –£–ß–ï–ù–ò–ö–ê */
        .student-selector {
            background: var(--white);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid var(--blue-primary);
            box-shadow: var(--shadow);
        }

        .selector-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--blue-primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .student-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            background: var(--blue-pale);
            border-radius: 12px;
            border: 2px solid var(--blue-primary);
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .student-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }

        .student-item.active {
            background: var(--blue-primary);
            color: var(--white);
        }

        .student-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .student-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--blue-primary);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 1.2rem;
        }

        .student-details {
            flex: 1;
        }

        .student-name {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .student-branch {
            font-size: 0.9rem;
            color: var(--blue-dark);
        }

        .student-item.active .student-branch {
            color: var(--blue-pale);
        }

        .student-status {
            font-size: 0.8rem;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: 600;
        }

        .status-active {
            background: var(--success);
            color: white;
        }

        .status-expired {
            background: var(--error);
            color: white;
        }

        .status-pending {
            background: var(--warning);
            color: white;
        }

        /* –ì–õ–ê–í–ù–ê–Ø –°–¢–†–ê–ù–ò–¶–ê */
        .welcome-card {
            background: linear-gradient(135deg, var(--blue-primary), var(--blue-bright));
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            color: white;
            box-shadow: var(--shadow);
        }

        .greeting {
            font-size: 1rem;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .student-greeting-name {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .student-details-info {
            font-size: 0.9rem;
            opacity: 0.9;
            line-height: 1.4;
        }

        /* –ë–´–°–¢–†–´–ï –ö–ê–†–¢–û–ß–ö–ò */
        .quick-cards {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .quick-card {
            background: var(--white);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid var(--blue-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .quick-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }

        .quick-card-icon {
            width: 50px;
            height: 50px;
            background: var(--blue-primary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 1.5rem;
            margin-bottom: 15px;
        }

        .quick-card-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--blue-primary);
            margin-bottom: 5px;
        }

        .quick-card-desc {
            font-size: 0.8rem;
            color: var(--gray-dark);
        }

        /* –°–ï–ö–¶–ò–ò */
        .section {
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--blue-primary);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            color: var(--pink);
        }

        /* –ö–ê–†–¢–û–ß–ö–ò */
        .card {
            background: var(--white);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid var(--blue-primary);
            margin-bottom: 15px;
            box-shadow: var(--shadow);
        }

        /* –°–¢–†–ê–ù–ò–¶–ê –†–ê–°–ü–ò–°–ê–ù–ò–Ø */
        .schedule-filter {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-select {
            flex: 1;
            min-width: 150px;
            padding: 12px;
            border: 2px solid var(--blue-primary);
            border-radius: 12px;
            background: var(--white);
            color: var(--blue-primary);
            font-family: 'ArtisticSoul', sans-serif;
            font-size: 1rem;
        }

        .schedule-day {
            background: var(--white);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border: 2px solid var(--blue-primary);
        }

        .day-header {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--blue-primary);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--gray-medium);
        }

        .lesson-item {
            padding: 15px;
            background: var(--blue-pale);
            border-radius: 12px;
            margin-bottom: 10px;
            border-left: 4px solid var(--blue-primary);
        }

        .lesson-item.cancelled {
            border-left-color: var(--error);
            opacity: 0.7;
        }

        .lesson-item.replacement {
            border-left-color: var(--warning);
        }

        .lesson-item.rescheduled {
            border-left-color: var(--pink);
        }

        .lesson-time {
            font-weight: 600;
            color: var(--blue-primary);
            margin-bottom: 5px;
        }

        .lesson-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        .lesson-teacher {
            font-size: 0.9rem;
            color: var(--blue-dark);
        }

        .lesson-status {
            font-size: 0.8rem;
            padding: 3px 8px;
            border-radius: 12px;
            font-weight: 600;
        }

        .status-normal {
            background: var(--success);
            color: white;
        }

        .status-cancelled {
            background: var(--error);
            color: white;
        }

        .status-replacement {
            background: var(--warning);
            color: white;
        }

        .status-rescheduled {
            background: var(--pink);
            color: white;
        }

        /* –°–¢–†–ê–ù–ò–¶–ê –ê–ë–û–ù–ï–ú–ï–ù–¢–ê */
        .subscription-card {
            background: linear-gradient(135deg, var(--blue-primary), var(--blue-bright));
            border-radius: 15px;
            padding: 25px;
            color: white;
            margin-bottom: 20px;
        }

        .subscription-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 20px;
        }

        .subscription-type {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .subscription-branch {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .subscription-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        .progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--white);
            border-radius: 5px;
        }

        .dates-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .date-item {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            padding: 15px;
        }

        .date-label {
            font-size: 0.8rem;
            opacity: 0.9;
            margin-bottom: 5px;
        }

        .date-value {
            font-size: 1.1rem;
            font-weight: 600;
        }

        .visits-list {
            background: var(--white);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid var(--blue-primary);
        }

        .visit-item {
            padding: 12px 0;
            border-bottom: 1px solid var(--gray-medium);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .visit-item:last-child {
            border-bottom: none;
        }

        .visit-date {
            font-weight: 600;
            color: var(--blue-primary);
        }

        .visit-time {
            color: var(--gray-dark);
            font-size: 0.9rem;
        }

        /* –°–¢–†–ê–ù–ò–¶–ê –ü–†–ï–ü–û–î–ê–í–ê–¢–ï–õ–ï–ô */
        .teachers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
        }

        .teacher-card {
            background: var(--white);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid var(--blue-primary);
            text-align: center;
            transition: all 0.3s ease;
        }

        .teacher-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
        }

        .teacher-photo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--blue-primary), var(--blue-bright));
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            font-weight: bold;
        }

        .teacher-name {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--blue-primary);
            margin-bottom: 5px;
        }

        .teacher-branch {
            font-size: 0.8rem;
            color: var(--blue-dark);
            margin-bottom: 10px;
        }

        .teacher-specialization {
            font-size: 0.9rem;
            color: var(--blue-primary);
            font-style: italic;
        }

        /* –°–¢–†–ê–ù–ò–¶–ê FAQ */
        .faq-list {
            background: var(--white);
            border-radius: 15px;
            border: 2px solid var(--blue-primary);
            overflow: hidden;
        }

        .faq-item {
            border-bottom: 2px solid var(--gray-medium);
            overflow: hidden;
        }

        .faq-item:last-child {
            border-bottom: none;
        }

        .faq-question {
            padding: 20px;
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--blue-primary);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--white);
            transition: background 0.3s ease;
        }

        .faq-question:hover {
            background: var(--blue-pale);
        }

        .faq-question i {
            transition: transform 0.3s ease;
        }

        .faq-item.active .faq-question i {
            transform: rotate(180deg);
        }

        .faq-answer {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s ease;
            background: var(--blue-pale);
            font-size: 1rem;
            line-height: 1.6;
        }

        .faq-item.active .faq-answer {
            padding: 20px;
            max-height: 500px;
        }

        /* –°–¢–†–ê–ù–ò–¶–ê –ù–û–í–û–°–¢–ï–ô */
        .news-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .news-item {
            background: var(--white);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid var(--blue-primary);
            transition: all 0.3s ease;
        }

        .news-item:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }

        .news-date {
            font-size: 0.8rem;
            color: var(--gray-dark);
            margin-bottom: 10px;
        }

        .news-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--blue-primary);
            margin-bottom: 10px;
        }

        .news-content {
            font-size: 1rem;
            color: #333;
            line-height: 1.6;
        }

        .news-content-short {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* –°–¢–†–ê–ù–ò–¶–ê –ö–û–ù–¢–ê–ö–¢–û–í */
        .contact-cards {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }

        .contact-card {
            background: var(--white);
            border-radius: 15px;
            padding: 25px;
            border: 2px solid var(--blue-primary);
            text-align: center;
        }

        .contact-icon {
            width: 60px;
            height: 60px;
            background: var(--blue-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            margin: 0 auto 15px;
        }

        .contact-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--blue-primary);
            margin-bottom: 10px;
        }

        .contact-info {
            font-size: 1rem;
            color: #333;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .contact-hours {
            font-size: 0.9rem;
            color: var(--gray-dark);
            margin-bottom: 20px;
        }

        /* –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø */
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 3000;
            background: var(--white);
            border-radius: 12px;
            padding: 15px 20px;
            border: 2px solid var(--blue-primary);
            animation: slideIn 0.3s ease;
            max-width: 90%;
            width: 350px;
            box-shadow: var(--shadow);
        }

        .notification.error {
            border-color: var(--error);
            color: var(--error);
        }

        .notification.success {
            border-color: var(--success);
            color: var(--success);
        }

        .notification.warning {
            border-color: var(--warning);
            color: var(--warning);
        }

        /* –°–ü–ò–ù–ù–ï–† */
        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--blue-pale);
            border-top: 3px solid var(--blue-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        /* –ê–ù–ò–ú–ê–¶–ò–ò */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ */
        @media (max-width: 768px) {
            .quick-cards {
                grid-template-columns: 1fr;
            }
            
            .subscription-stats {
                grid-template-columns: repeat(3, 1fr);
            }
            
            .dates-info {
                grid-template-columns: 1fr;
            }
            
            .teachers-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .top-bar {
                padding: 12px 15px;
            }
            
            .main-content {
                padding: 15px;
                padding-bottom: 90px;
            }
            
            .notification {
                width: calc(100% - 40px);
                right: 20px;
                left: 20px;
            }
        }

        @media (max-width: 480px) {
            .auth-container {
                padding: 30px 20px;
            }
            
            .auth-logo-text {
                font-size: 2rem;
            }
            
            .teachers-grid {
                grid-template-columns: 1fr;
            }
            
            .top-bar {
                flex-direction: column;
                gap: 10px;
                padding: 15px;
            }
        }

        /* –£–¢–ò–õ–ò–¢–´ */
        .loading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.95);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            gap: 20px;
        }

        .loading.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--gray-dark);
            border: 2px dashed var(--gray-medium);
            border-radius: 15px;
            background: var(--white);
            margin: 20px 0;
        }

        .empty-state i {
            font-size: 3rem;
            color: var(--blue-primary);
            margin-bottom: 15px;
        }

        .text-center { text-align: center; }
        .text-right { text-align: right; }
        .mt-10 { margin-top: 10px; }
        .mt-20 { margin-top: 20px; }
        .mt-30 { margin-top: 30px; }
        .mb-10 { margin-bottom: 10px; }
        .mb-20 { margin-bottom: 20px; }
        .mb-30 { margin-bottom: 30px; }
        .w-100 { width: 100%; }
        .d-none { display: none !important; }
        .d-flex { display: flex !important; }
        .d-block { display: block !important; }
        .justify-between { justify-content: space-between; }
        .align-center { align-items: center; }
        .gap-10 { gap: 10px; }
        .gap-20 { gap: 20px; }
        .flex-wrap { flex-wrap: wrap; }

        /* –ë–ï–ô–î–ñ–ò */
        .badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .badge-primary {
            background: var(--blue-primary);
            color: white;
        }

        .badge-success {
            background: var(--success);
            color: white;
        }

        .badge-error {
            background: var(--error);
            color: white;
        }

        .badge-warning {
            background: var(--warning);
            color: white;
        }

        .badge-pink {
            background: var(--pink);
            color: white;
        }

        /* –ö–ù–û–ü–ö–ê –ù–ê–ó–ê–î */
        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 10px 20px;
            background: var(--white);
            border: 2px solid var(--blue-primary);
            border-radius: 12px;
            color: var(--blue-primary);
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background: var(--blue-primary);
            color: white;
            transform: translateX(-5px);
        }

        /* –ó–ê–ì–û–õ–û–í–ö–ò –°–¢–†–ê–ù–ò–¶ */
        .page-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .page-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--blue-primary);
            flex: 1;
        }

        /* –°–ö–†–´–¢–´–ï –≠–õ–ï–ú–ï–ù–¢–´ */
        .page-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .page-section.active {
            display: block;
        }

        /* –°–ï–¢–ö–ê –§–ò–õ–¨–¢–†–û–í */
        .branch-badge {
            display: inline-block;
            padding: 8px 16px;
            background: var(--blue-primary);
            color: white;
            border-radius: 20px;
            font-weight: 600;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>
    <!-- –ó–ê–ì–†–£–ó–ö–ê -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
        <div class="loading-text" id="loadingText">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
    </div>
    
    <!-- –°–¢–†–ê–ù–ò–¶–ê –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò -->
    <div id="auth-page">
        <div class="auth-container">
            <div class="auth-logo">
                <div class="logo-image">AS</div>
                <div class="auth-logo-text">Artistic Soul</div>
                <div class="auth-subtitle">–•—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è —Å—Ç—É–¥–∏—è</div>
            </div>
            
            <h2 class="auth-title">–í—Ö–æ–¥ –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>
            
            <div class="phone-form">
                <div class="phone-label">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</div>
                <input type="tel" id="phoneNumber" class="phone-input" placeholder="7 999 123-45-67" required>
                <div style="font-size: 0.8rem; color: var(--gray-dark); margin-top: 5px;">
                    –í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä, —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞
                </div>
            </div>
            
            <button class="btn btn-primary" id="loginBtn">
                <i class="fas fa-sign-in-alt"></i>
                –í–æ–π—Ç–∏
            </button>
            
            <div class="auth-footer">
                <i class="fas fa-info-circle"></i>
                <div>–î–ª—è —Å–≤—è–∑–∏: +7 (999) 123-45-67</div>
            </div>
        </div>
    </div>
    
    <!-- –û–°–ù–û–í–ù–û–ô –ò–ù–¢–ï–†–§–ï–ô–° -->
    <div class="app-container" id="appContainer">
        <!-- –í–ï–†–•–ù–ò–ô –ë–ê–† -->
        <nav class="top-bar">
            <div style="display: flex; align-items: center;">
                <div class="logo-small">AS</div>
                <div class="logo-text">Artistic Soul</div>
            </div>
            
            <div class="user-avatar" id="userAvatar" onclick="ArtApp.showProfileMenu()">
                <i class="fas fa-user"></i>
            </div>
        </nav>
        
        <!-- –í–´–ë–û–† –£–ß–ï–ù–ò–ö–ê (–ü–û–ö–ê–ó–´–í–ê–ï–¢–°–Ø –ü–†–ò –ù–ï–°–ö–û–õ–¨–ö–ò–• –£–ß–ï–ù–ò–ö–ê–•) -->
        <div id="studentSelector" class="student-selector d-none">
            <div class="selector-title">
                <i class="fas fa-users"></i>
                –í—ã–±–µ—Ä–∏—Ç–µ —É—á–µ–Ω–∏–∫–∞
            </div>
            <div class="students-list" id="studentsList">
                <!-- –°–ø–∏—Å–æ–∫ —É—á–µ–Ω–∏–∫–æ–≤ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
            </div>
        </div>
        
        <!-- –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ -->
        <main class="main-content" id="mainContent">
            <!-- –ì–õ–ê–í–ù–ê–Ø –°–¢–†–ê–ù–ò–¶–ê -->
            <section id="homePage" class="page-section active">
                <div class="welcome-card" id="welcomeCard">
                    <div class="greeting" id="greeting">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å</div>
                    <div class="student-greeting-name" id="studentGreetingName">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    <div class="student-details-info" id="studentDetailsInfo">
                        –ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É—á–µ–Ω–∏–∫–µ...
                    </div>
                </div>
                
                <div class="quick-cards">
                    <div class="quick-card" onclick="ArtApp.navigateTo('subscription')">
                        <div class="quick-card-icon">
                            <i class="fas fa-ticket-alt"></i>
                        </div>
                        <div class="quick-card-title">–ê–±–æ–Ω–µ–º–µ–Ω—Ç</div>
                        <div class="quick-card-desc">–û—Å—Ç–∞—Ç–æ–∫ –∑–∞–Ω—è—Ç–∏–π –∏ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è</div>
                    </div>
                    
                    <div class="quick-card" onclick="ArtApp.navigateTo('schedule')">
                        <div class="quick-card-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div class="quick-card-title">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</div>
                        <div class="quick-card-desc">–í–∞—à–∏ –∑–∞–Ω—è—Ç–∏—è –Ω–∞ –Ω–µ–¥–µ–ª—é</div>
                    </div>
                    
                    <div class="quick-card" onclick="ArtApp.navigateTo('teachers')">
                        <div class="quick-card-icon">
                            <i class="fas fa-chalkboard-teacher"></i>
                        </div>
                        <div class="quick-card-title">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏</div>
                        <div class="quick-card-desc">–ù–∞—à–∏ –ø–µ–¥–∞–≥–æ–≥–∏ –∏ –∏—Ö —Ä–µ–≥–∞–ª–∏–∏</div>
                    </div>
                    
                    <div class="quick-card" onclick="ArtApp.navigateTo('news')">
                        <div class="quick-card-icon">
                            <i class="fas fa-newspaper"></i>
                        </div>
                        <div class="quick-card-title">–ù–æ–≤–æ—Å—Ç–∏</div>
                        <div class="quick-card-desc">–ê–∫—Ü–∏–∏ –∏ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è —à–∫–æ–ª—ã</div>
                    </div>
                </div>
                
                <div class="section">
                    <h3 class="section-title">
                        <i class="fas fa-fire"></i> –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø
                    </h3>
                    
                    <div class="card" onclick="ArtApp.navigateTo('faq')">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <div style="width: 50px; height: 50px; background: var(--blue-primary); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem;">
                                <i class="fas fa-question-circle"></i>
                            </div>
                            <div>
                                <div style="font-weight: 600; color: var(--blue-primary); margin-bottom: 5px;">–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã</div>
                                <div style="font-size: 0.9rem; color: var(--gray-dark);">–û—Ç–≤–µ—Ç—ã –Ω–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card" onclick="ArtApp.navigateTo('contact')">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <div style="width: 50px; height: 50px; background: var(--blue-primary); border-radius: 12px; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.5rem;">
                                <i class="fas fa-headset"></i>
                            </div>
                            <div>
                                <div style="font-weight: 600; color: var(--blue-primary); margin-bottom: 5px;">–°–≤—è–∑–∞—Ç—å—Å—è —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º</div>
                                <div style="font-size: 0.9rem; color: var(--gray-dark);">–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –ø—Ä–æ–¥–ª–∏—Ç—å –∞–±–æ–Ω–µ–º–µ–Ω—Ç</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- –†–ê–°–ü–ò–°–ê–ù–ò–ï -->
            <section id="schedulePage" class="page-section">
                <div class="page-header">
                    <div class="back-button" onclick="ArtApp.navigateTo('home')">
                        <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                    </div>
                    <h2 class="page-title">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</h2>
                </div>
                
                <div id="branchBadge" style="display: none;" class="branch-badge">
                    <!-- –§–∏–ª–∏–∞–ª –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω –∑–¥–µ—Å—å -->
                </div>
                
                <div id="scheduleContainer">
                    <!-- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </section>
            
            <!-- –ê–ë–û–ù–ï–ú–ï–ù–¢ -->
            <section id="subscriptionPage" class="page-section">
                <div class="page-header">
                    <div class="back-button" onclick="ArtApp.navigateTo('home')">
                        <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                    </div>
                    <h2 class="page-title">–ú–æ–π –∞–±–æ–Ω–µ–º–µ–Ω—Ç</h2>
                    <button class="btn btn-secondary" onclick="ArtApp.refreshSubscription()" style="width: auto; padding: 10px 20px;">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                </div>
                
                <div id="subscriptionContainer">
                    <!-- –ê–±–æ–Ω–µ–º–µ–Ω—Ç –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
                
                <div class="mt-30">
                    <button class="btn btn-pink w-100" onclick="ArtApp.contactAdmin('–ü—Ä–æ–¥–ª–∏—Ç—å –∞–±–æ–Ω–µ–º–µ–Ω—Ç')">
                        <i class="fas fa-credit-card"></i>
                        –ü—Ä–æ–¥–ª–∏—Ç—å –∞–±–æ–Ω–µ–º–µ–Ω—Ç
                    </button>
                </div>
            </section>
            
            <!-- –ü–†–ï–ü–û–î–ê–í–ê–¢–ï–õ–ò -->
            <section id="teachersPage" class="page-section">
                <div class="page-header">
                    <div class="back-button" onclick="ArtApp.navigateTo('home')">
                        <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                    </div>
                    <h2 class="page-title">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏</h2>
                </div>
                
                <div id="branchBadgeTeachers" style="display: none;" class="branch-badge">
                    <!-- –§–∏–ª–∏–∞–ª –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω –∑–¥–µ—Å—å -->
                </div>
                
                <div class="teachers-grid" id="teachersContainer">
                    <!-- –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </section>
            
            <!-- FAQ -->
            <section id="faqPage" class="page-section">
                <div class="page-header">
                    <div class="back-button" onclick="ArtApp.navigateTo('home')">
                        <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                    </div>
                    <h2 class="page-title">–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã</h2>
                </div>
                
                <div class="faq-list" id="faqContainer">
                    <!-- FAQ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </section>
            
            <!-- –ù–û–í–û–°–¢–ò -->
            <section id="newsPage" class="page-section">
                <div class="page-header">
                    <div class="back-button" onclick="ArtApp.navigateTo('home')">
                        <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                    </div>
                    <h2 class="page-title">–ù–æ–≤–æ—Å—Ç–∏ —à–∫–æ–ª—ã</h2>
                </div>
                
                <div id="branchBadgeNews" style="display: none;" class="branch-badge">
                    <!-- –§–∏–ª–∏–∞–ª –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω –∑–¥–µ—Å—å -->
                </div>
                
                <div class="news-list" id="newsContainer">
                    <!-- –ù–æ–≤–æ—Å—Ç–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                </div>
            </section>
            
            <!-- –ö–û–ù–¢–ê–ö–¢–´ -->
            <section id="contactPage" class="page-section">
                <div class="page-header">
                    <div class="back-button" onclick="ArtApp.navigateTo('home')">
                        <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                    </div>
                    <h2 class="page-title">–°–≤—è–∑–∞—Ç—å—Å—è —Å –Ω–∞–º–∏</h2>
                </div>
                
                <div class="contact-cards">
                    <div class="contact-card">
                        <div class="contact-icon">
                            <i class="fas fa-comments"></i>
                        </div>
                        <h3 class="contact-title">–ù–∞–ø–∏—Å–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É</h3>
                        <div class="contact-info">
                            –û—Ç–≤–µ—Ç–∏–º –Ω–∞ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã, –ø–æ–º–æ–∂–µ–º —Å –ø—Ä–æ–¥–ª–µ–Ω–∏–µ–º –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞
                        </div>
                        <button class="btn btn-primary w-100" onclick="ArtApp.contactAdmin('–í–æ–ø—Ä–æ—Å –ø–æ –∞–±–æ–Ω–µ–º–µ–Ω—Ç—É')">
                            <i class="fas fa-paper-plane"></i> –ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
                        </button>
                    </div>
                    
                    <div class="contact-card">
                        <div class="contact-icon">
                            <i class="fas fa-phone"></i>
                        </div>
                        <h3 class="contact-title">–ü–æ–∑–≤–æ–Ω–∏—Ç—å</h3>
                        <div class="contact-info" id="phoneInfo">
                            –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏...
                        </div>
                        <div class="contact-hours">
                            –ü–Ω-–ü—Ç: 9:00-20:00<br>
                            –°–±-–í—Å: 10:00-18:00
                        </div>
                        <button class="btn btn-secondary w-100" onclick="ArtApp.callAdmin()">
                            <i class="fas fa-phone"></i> –ü–æ–∑–≤–æ–Ω–∏—Ç—å
                        </button>
                    </div>
                </div>
            </section>
        </main>
        
        <!-- –ù–ò–ñ–ù–Ø–Ø –ù–ê–í–ò–ì–ê–¶–ò–Ø -->
        <nav class="bottom-nav" id="bottomNav">
            <a href="#" class="nav-item active" data-page="home" onclick="ArtApp.navigateTo('home')">
                <i class="fas fa-home"></i>
                <span>–ì–ª–∞–≤–Ω–∞—è</span>
            </a>
            <a href="#" class="nav-item" data-page="schedule" onclick="ArtApp.navigateTo('schedule')">
                <i class="fas fa-calendar-alt"></i>
                <span>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</span>
            </a>
            <a href="#" class="nav-item" data-page="subscription" onclick="ArtApp.navigateTo('subscription')">
                <i class="fas fa-ticket-alt"></i>
                <span>–ê–±–æ–Ω–µ–º–µ–Ω—Ç</span>
            </a>
            <a href="#" class="nav-item" data-page="teachers" onclick="ArtApp.navigateTo('teachers')">
                <i class="fas fa-chalkboard-teacher"></i>
                <span>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏</span>
            </a>
            <a href="#" class="nav-item" data-page="contact" onclick="ArtApp.navigateTo('contact')">
                <i class="fas fa-headset"></i>
                <span>–ö–æ–Ω—Ç–∞–∫—Ç—ã</span>
            </a>
        </nav>
    </div>
    
    <!-- –ú–ï–ù–Æ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø -->
    <div id="userMenu" class="d-none" style="position: fixed; top: 70px; right: 20px; background: var(--white); border: 2px solid var(--blue-primary); border-radius: 12px; padding: 20px; width: 250px; z-index: 2000; box-shadow: var(--shadow);">
        <div style="font-weight: 600; color: var(--blue-primary); margin-bottom: 15px;">
            <i class="fas fa-user-circle"></i> –ê–∫–∫–∞—É–Ω—Ç
        </div>
        <div style="margin-bottom: 15px; padding-bottom: 15px; border-bottom: 2px solid var(--gray-medium);">
            <div style="font-weight: 600;" id="userMenuName">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            <div style="font-size: 0.9rem; color: var(--gray-dark);" id="userMenuPhone">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
        <div style="display: flex; flex-direction: column; gap: 10px;">
            <button class="btn btn-secondary" onclick="ArtApp.navigateTo('home')">
                <i class="fas fa-home"></i> –ì–ª–∞–≤–Ω–∞—è
            </button>
            <button class="btn btn-secondary" onclick="ArtApp.showStudentsSelector()">
                <i class="fas fa-users"></i> –°–º–µ–Ω–∏—Ç—å —É—á–µ–Ω–∏–∫–∞
            </button>
            <button class="btn btn-secondary" style="border-color: var(--error); color: var(--error);" onclick="ArtApp.logout()">
                <i class="fas fa-sign-out-alt"></i> –í—ã–π—Ç–∏
            </button>
        </div>
    </div>
    
    <!-- –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø -->
    <div id="notificationContainer"></div>

    <script>
    const ArtApp = {
        config: {
            API_BASE_URL: window.location.origin,
            currentUser: null,
            currentProfile: null,
            profiles: [],
            token: null,
            subscriptionData: null,
            currentPage: 'home',
            branchContacts: {
                '–°–≤–∏–±–ª–æ–≤–æ': '+7 (999) 123-45-67',
                '–ß–µ—Ä—Ç–∞–Ω–æ–≤–æ': '+7 (999) 987-65-43',
                'all': '+7 (999) 111-22-33'
            },
            notificationInterval: null
        },

        // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø
        init: function() {
            console.log('üé® –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Artistic Soul...');
            this.setupEventListeners();
            this.loadSession();
            this.checkAuthState();
        },
formatDate: function(dateString) {
    if (!dateString) return '';
    
    try {
        const date = new Date(dateString);
        if (isNaN(date.getTime())) return dateString;
        
        const day = date.getDate().toString().padStart(2, '0');
        const month = (date.getMonth() + 1).toString().padStart(2, '0');
        const year = date.getFullYear();
        
        // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ + –¥–∞—Ç—É
        const days = ['–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ', '–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–í—Ç–æ—Ä–Ω–∏–∫', '–°—Ä–µ–¥–∞', '–ß–µ—Ç–≤–µ—Ä–≥', '–ü—è—Ç–Ω–∏—Ü–∞', '–°—É–±–±–æ—Ç–∞'];
        const dayName = days[date.getDay()];
        
        return `${dayName}, ${day}.${month}.${year}`;
    } catch (error) {
        console.error('–û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã:', error);
        return dateString;
    }
},
        // –ü–†–û–í–ï–†–ö–ê –°–û–°–¢–û–Ø–ù–ò–Ø –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò
        checkAuthState: function() {
            if (this.config.token && this.config.currentUser) {
                this.showMainInterface();
                this.navigateToPage('home');
                this.loadHomePage();
            } else {
                this.showAuthPage();
            }
        },

        // –ü–û–ö–ê–ó–ê–¢–¨ –°–¢–†–ê–ù–ò–¶–£ –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò
        showAuthPage: function() {
            document.getElementById('auth-page').style.display = 'flex';
            document.getElementById('appContainer').style.display = 'none';
        },

        // –ü–û–ö–ê–ó–ê–¢–¨ –û–°–ù–û–í–ù–û–ô –ò–ù–¢–ï–†–§–ï–ô–°
        showMainInterface: function() {
            document.getElementById('auth-page').style.display = 'none';
            document.getElementById('appContainer').style.display = 'flex';
            
            if (this.config.currentUser) {
                const initials = this.getInitials(this.config.currentUser.name || this.config.currentUser.phone);
                document.getElementById('userAvatar').innerHTML = initials;
            }
        },

        // –ü–û–ö–ê–ó–ê–¢–¨ –ú–ï–ù–Æ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø
        showProfileMenu: function() {
            const menu = document.getElementById('userMenu');
            if (menu.classList.contains('d-none')) {
                // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –º–µ–Ω—é
                if (this.config.currentProfile) {
                    document.getElementById('userMenuName').textContent = this.config.currentProfile.student_name;
                    document.getElementById('userMenuPhone').textContent = this.config.currentProfile.phone_number;
                }
                menu.classList.remove('d-none');
            } else {
                menu.classList.add('d-none');
            }
        },

        // –í–•–û–î –ü–û –¢–ï–õ–ï–§–û–ù–£
        handlePhoneLogin: function() {
            const phoneInput = document.getElementById('phoneNumber');
            const loginBtn = document.getElementById('loginBtn');
            
            let phone = phoneInput.value.replace(/\D/g, '');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
            if (!phone || phone.length < 10) {
                this.showNotification('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–º–∏–Ω–∏–º—É–º 10 —Ü–∏—Ñ—Ä)', 'error');
                return;
            }
            
            console.log(`üì± –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É: ${phone}`);
            
            loginBtn.disabled = true;
            loginBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> –í—Ö–æ–¥...';
            this.showLoading('–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—Ö–æ–¥...');
            
            // –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ API
            fetch('/api/auth/phone', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ 
                    phone: phone
                })
            })
            .then(response => {
                if (!response.ok) {
                    if (response.status === 404) {
                        throw new Error('–£—á–µ–Ω–∏–∫–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã');
                    }
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                return response.json();
            })
            .then(data => {
                console.log('üìä –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:', data);
                
                if (data.success && data.data && data.data.profiles) {
                    console.log('‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!');
                    
                    this.config.token = data.data.token;
                    this.config.currentUser = data.data.user;
                    this.config.profiles = data.data.profiles;
                    this.config.currentProfile = this.config.profiles[0];
                    
                    // –§–æ—Ä–º–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞
                    this.config.subscriptionData = {
                        student: {
                            name: this.config.currentProfile.student_name,
                            branch: this.config.currentProfile.branch,
                            teacher_name: this.config.currentProfile.teacher_name,
                            age_group: this.config.currentProfile.age_group,
                            parent_name: this.config.currentProfile.parent_name
                        },
                        subscription: {
                            type: this.config.currentProfile.subscription_type,
                            status: this.config.currentProfile.subscription_status,
                            active: this.config.currentProfile.subscription_active,
                            badge: this.config.currentProfile.subscription_badge,
                            classes: {
                                total: this.config.currentProfile.total_classes,
                                used: this.config.currentProfile.used_classes,
                                remaining: this.config.currentProfile.remaining_classes,
                                progress: this.config.currentProfile.total_classes > 0 ? 
                                    Math.round((this.config.currentProfile.used_classes / this.config.currentProfile.total_classes) * 100) : 0
                            },
                            dates: {
                                activation: this.config.currentProfile.activation_date,
                                expiration: this.config.currentProfile.expiration_date,
                                last_visit: this.config.currentProfile.last_visit_date
                            }
                        }
                    };
                    
                    this.saveSession();
                    this.showMainInterface();
                    this.showNotification('‚úÖ –í—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ!', 'success');
                    this.navigateToPage('home');
                    this.loadHomePage();
                    
                    // –ü–æ–¥–∫–ª—é—á–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ polling
                    this.setupNotifications();
                } else {
                    throw new Error(data.error || '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ');
                }
            })
            .catch(error => {
                console.error('‚ùå –û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞:', error);
                this.showNotification('–û—à–∏–±–∫–∞: ' + error.message, 'error');
            })
            .finally(() => {
                this.hideLoading();
                loginBtn.disabled = false;
                loginBtn.innerHTML = '<i class="fas fa-sign-in-alt"></i> –í–æ–π—Ç–∏';
            });
        },

        // –ù–ê–°–¢–†–û–ô–ö–ê –£–í–ï–î–û–ú–õ–ï–ù–ò–ô (POLLING)
        setupNotifications: function() {
            const phone = this.config.currentUser?.phone_number;
            if (!phone) return;
            
            console.log('üîî –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (polling)...');
            
            // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
            const checkNotifications = () => {
                if (!this.config.token || !this.config.currentProfile) return;
                
                fetch('/api/notifications', {
                    headers: {
                        'Authorization': `Bearer ${this.config.token}`
                    }
                })
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                    }
                    return response.json();
                })
                .then(data => {
                    if (data.success && data.data.notifications) {
                        data.data.notifications.forEach(notification => {
                            this.showNotification(notification.message, 'info');
                        });
                    }
                })
                .catch(error => {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:', error);
                });
            };
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
            this.config.notificationInterval = setInterval(checkNotifications, 30000);
            
            // –ü–µ—Ä–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
            checkNotifications();
        },

        // –û–ß–ò–°–¢–ö–ê –ò–ù–¢–ï–†–í–ê–õ–ê –£–í–ï–î–û–ú–õ–ï–ù–ò–ô
        clearNotificationInterval: function() {
            if (this.config.notificationInterval) {
                clearInterval(this.config.notificationInterval);
                this.config.notificationInterval = null;
            }
        },

        // –û–ë–ù–û–í–õ–ï–ù–ò–ï –ò–ù–§–û–†–ú–ê–¶–ò–ò –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø
        updateUserInfo: function() {
            if (!this.config.currentProfile) {
                console.log('‚ö†Ô∏è –ù–µ—Ç —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è');
                return;
            }
            
            const profile = this.config.currentProfile;
            const currentHour = new Date().getHours();
            let greeting = '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å';
            
            if (currentHour < 12) greeting = '–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ';
            else if (currentHour < 18) greeting = '–î–æ–±—Ä—ã–π –¥–µ–Ω—å';
            else greeting = '–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä';
            
            document.getElementById('greeting').textContent = greeting;
            document.getElementById('studentGreetingName').textContent = profile.student_name || '–£—á–µ–Ω–∏–∫';
            
            let studentInfo = '';
            if (profile.branch) studentInfo += `–§–∏–ª–∏–∞–ª: ${profile.branch}<br>`;
            if (profile.age_group) studentInfo += `–í–æ–∑—Ä–∞—Å—Ç–Ω–∞—è –≥—Ä—É–ø–ø–∞: ${profile.age_group}<br>`;
            if (profile.teacher_name) studentInfo += `–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å: ${profile.teacher_name}`;
            
            if (!studentInfo) studentInfo = '–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...';
            
            document.getElementById('studentDetailsInfo').innerHTML = studentInfo;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–Ω—Ç–∞–∫—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
            this.updateContactInfo();
        },

        // –û–ë–ù–û–í–õ–ï–ù–ò–ï –ö–û–ù–¢–ê–ö–¢–ù–û–ô –ò–ù–§–û–†–ú–ê–¶–ò–ò
        updateContactInfo: function() {
            if (!this.config.currentProfile) return;
            
            const branch = this.config.currentProfile.branch;
            let phone = this.config.branchContacts['all'];
            
            if (branch && this.config.branchContacts[branch]) {
                phone = this.config.branchContacts[branch];
            }
            
            document.getElementById('phoneInfo').innerHTML = `
                <strong>${branch || '–û–±—â–∏–π'}:</strong> ${phone}<br>
                <small>–¢–µ–ª–µ—Ñ–æ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</small>
            `;
        },

        // –ó–ê–ì–†–£–ó–ö–ê –ì–õ–ê–í–ù–û–ô –°–¢–†–ê–ù–ò–¶–´
        loadHomePage: function() {
            console.log('üè† –ó–ê–ì–†–£–ó–ö–ê –ì–õ–ê–í–ù–û–ô –°–¢–†–ê–ù–ò–¶–´');
            
            if (!this.config.token) {
                this.showNotification('–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è', 'error');
                this.showAuthPage();
                return;
            }
            
            this.updateUserInfo();
            this.loadStudentsList();
        },

        // –ó–ê–ì–†–£–ó–ö–ê –°–ü–ò–°–ö–ê –£–ß–ï–ù–ò–ö–û–í
        loadStudentsList: function() {
            const container = document.getElementById('studentsList');
            const selector = document.getElementById('studentSelector');
            
            if (!this.config.profiles || this.config.profiles.length === 0) {
                selector.classList.add('d-none');
                return;
            }
            
            if (this.config.profiles.length === 1) {
                selector.classList.add('d-none');
                return;
            }
            
            selector.classList.remove('d-none');
            container.innerHTML = '';
            
            this.config.profiles.forEach((profile, index) => {
                const isActive = this.config.currentProfile && 
                               this.config.currentProfile.student_name === profile.student_name;
                
                const studentItem = document.createElement('div');
                studentItem.className = `student-item ${isActive ? 'active' : ''}`;
                studentItem.dataset.studentName = profile.student_name;
                
                studentItem.innerHTML = `
                    <div class="student-info">
                        <div class="student-avatar">
                            ${this.getInitials(profile.student_name)}
                        </div>
                        <div class="student-details">
                            <div class="student-name">${profile.student_name || '–ù–µ —É–∫–∞–∑–∞–Ω–æ'}</div>
                            <div class="student-branch">${profile.branch || '–§–∏–ª–∏–∞–ª –Ω–µ —É–∫–∞–∑–∞–Ω'}</div>
                        </div>
                    </div>
                    <div class="student-status ${profile.subscription_active === 1 ? 'status-active' : 'status-expired'}">
                        ${profile.subscription_active === 1 ? '–ê–∫—Ç–∏–≤–µ–Ω' : '–ù–µ –∞–∫—Ç–∏–≤–µ–Ω'}
                    </div>
                `;
                
                studentItem.addEventListener('click', () => {
                    this.selectStudent(profile.student_name);
                });
                
                container.appendChild(studentItem);
            });
        },

        // –ü–û–ö–ê–ó–ê–¢–¨ –í–´–ë–û–† –£–ß–ï–ù–ò–ö–ê
        showStudentsSelector: function() {
            const selector = document.getElementById('studentSelector');
            selector.classList.remove('d-none');
            this.showNotification('–í—ã–±–µ—Ä–∏—Ç–µ —É—á–µ–Ω–∏–∫–∞ –∏–∑ —Å–ø–∏—Å–∫–∞', 'success');
        },

        // –í–´–ë–û–† –£–ß–ï–ù–ò–ö–ê
        selectStudent: function(studentName) {
            if (!studentName) return;
            
            const profile = this.config.profiles.find(p => p.student_name === studentName);
            if (!profile) {
                this.showNotification('–ü—Ä–æ—Ñ–∏–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
                return;
            }
            
            this.config.currentProfile = profile;
            
            // –§–æ—Ä–º–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞
            this.config.subscriptionData = {
                student: {
                    name: profile.student_name,
                    branch: profile.branch,
                    teacher_name: profile.teacher_name,
                    age_group: profile.age_group,
                    parent_name: profile.parent_name
                },
                subscription: {
                    type: profile.subscription_type,
                    status: profile.subscription_status,
                    active: profile.subscription_active,
                    badge: profile.subscription_badge,
                    classes: {
                        total: profile.total_classes,
                        used: profile.used_classes,
                        remaining: profile.remaining_classes,
                        progress: profile.total_classes > 0 ? 
                            Math.round((profile.used_classes / profile.total_classes) * 100) : 0
                    },
                    dates: {
                        activation: profile.activation_date,
                        expiration: profile.expiration_date,
                        last_visit: profile.last_visit_date
                    }
                }
            };
            
            this.updateUserInfo();
            this.loadStudentsList();
            this.hideProfileMenu();
            
            this.showNotification(`–í—ã–±—Ä–∞–Ω —É—á–µ–Ω–∏–∫: ${profile.student_name}`, 'success');
            this.saveSession();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
            this.loadPageData(this.config.currentPage);
        },

        // –ù–ê–í–ò–ì–ê–¶–ò–Ø –ü–û –°–¢–†–ê–ù–ò–¶–ê–ú
        navigateTo: function(pageName) {
            this.navigateToPage(pageName);
        },

        navigateToPage: function(pageName) {
            console.log(`üìç –ù–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É: ${pageName}`);
            
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            document.querySelectorAll('.page-section').forEach(page => {
                page.classList.remove('active');
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                if (item.getAttribute('data-page') === pageName) {
                    item.classList.add('active');
                }
            });
            
            // –°–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            this.hideProfileMenu();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
            const pageElement = document.getElementById(`${pageName}Page`);
            if (pageElement) {
                pageElement.classList.add('active');
                this.config.currentPage = pageName;
                
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                this.loadPageData(pageName);
            }
        },

        // –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• –î–õ–Ø –°–¢–†–ê–ù–ò–¶–´
        loadPageData: function(pageName) {
            switch(pageName) {
                case 'home':
                    this.loadHomePage();
                    break;
                case 'subscription':
                    this.loadSubscriptionPage();
                    break;
                case 'schedule':
                    this.loadSchedulePage();
                    break;
                case 'teachers':
                    this.loadTeachersPage();
                    break;
                case 'faq':
                    this.loadFaqPage();
                    break;
                case 'news':
                    this.loadNewsPage();
                    break;
                case 'contact':
                    this.loadContactPage();
                    break;
            }
        },

        // –ó–ê–ì–†–£–ó–ö–ê –°–¢–†–ê–ù–ò–¶–´ –ê–ë–û–ù–ï–ú–ï–ù–¢–ê
        loadSubscriptionPage: function() {
            const container = document.getElementById('subscriptionContainer');
            
            if (!this.config.currentProfile) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-exclamation-circle"></i>
                        <p>–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è</p>
                    </div>
                `;
                return;
            }
            
            if (this.config.subscriptionData) {
                this.renderSubscription(this.config.subscriptionData);
                return;
            }
            
            // –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
            container.innerHTML = `
                <div class="empty-state">
                    <div class="spinner"></div>
                    <p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞...</p>
                </div>
            `;
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ API
            this.loadSubscriptionFromAPI();
        },

        // –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• –ê–ë–û–ù–ï–ú–ï–ù–¢–ê –ò–ó API
        loadSubscriptionFromAPI: function() {
            if (!this.config.token) {
                this.showNotification('–¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è', 'error');
                return;
            }
            
            fetch('/api/profiles', {
                method: 'GET',
                headers: {
                    'Authorization': `Bearer ${this.config.token}`,
                    'Content-Type': 'application/json'
                }
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                return response.json();
            })
            .then(data => {
                if (data.success && data.data && data.data.profiles) {
                    // –ù–∞–π–¥–µ–º —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ñ–∏–ª—å –≤ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
                    const currentProfileName = this.config.currentProfile.student_name;
                    const updatedProfile = data.data.profiles.find(p => p.student_name === currentProfileName);
                    
                    if (updatedProfile) {
                        this.config.currentProfile = updatedProfile;
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º subscriptionData
                        this.config.subscriptionData = {
                            student: {
                                name: updatedProfile.student_name,
                                branch: updatedProfile.branch,
                                teacher_name: updatedProfile.teacher_name,
                                age_group: updatedProfile.age_group,
                                parent_name: updatedProfile.parent_name
                            },
                            subscription: {
                                type: updatedProfile.subscription_type,
                                status: updatedProfile.subscription_status,
                                active: updatedProfile.subscription_active,
                                badge: updatedProfile.subscription_badge,
                                classes: {
                                    total: updatedProfile.total_classes,
                                    used: updatedProfile.used_classes,
                                    remaining: updatedProfile.remaining_classes,
                                    progress: updatedProfile.total_classes > 0 ? 
                                        Math.round((updatedProfile.used_classes / updatedProfile.total_classes) * 100) : 0
                                },
                                dates: {
                                    activation: updatedProfile.activation_date,
                                    expiration: updatedProfile.expiration_date,
                                    last_visit: updatedProfile.last_visit_date
                                }
                            }
                        };
                        
                        this.renderSubscription(this.config.subscriptionData);
                        this.saveSession();
                        this.showNotification('‚úÖ –î–∞–Ω–Ω—ã–µ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã', 'success');
                    }
                }
            })
            .catch(error => {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞:', error);
                this.showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö', 'error');
            });
        },

        // –†–ï–ù–î–ï–†–ò–ù–ì –ê–ë–û–ù–ï–ú–ï–ù–¢–ê
        renderSubscription: function(subscriptionData) {
            const container = document.getElementById('subscriptionContainer');
            
            if (!subscriptionData || !subscriptionData.subscription) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-exclamation-triangle"></i>
                        <p>–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ–± –∞–±–æ–Ω–µ–º–µ–Ω—Ç–µ</p>
                    </div>
                `;
                return;
            }
            
            const student = subscriptionData.student || {};
            const subscription = subscriptionData.subscription;
            
            const total = subscription.classes?.total || 0;
            const remaining = subscription.classes?.remaining || 0;
            const used = subscription.classes?.used || 0;
            const progress = subscription.classes?.progress || 0;
            
            let statusClass = 'badge-error';
            if (subscription.active) statusClass = 'badge-success';
            else if (subscription.badge === 'pending') statusClass = 'badge-warning';
            
            container.innerHTML = `
                <div class="subscription-card">
                    <div class="subscription-header">
                        <div>
                            <div class="subscription-type">${subscription.type || '–ê–±–æ–Ω–µ–º–µ–Ω—Ç'}</div>
                            <div class="subscription-branch">${student.branch || '–§–∏–ª–∏–∞–ª –Ω–µ —É–∫–∞–∑–∞–Ω'}</div>
                        </div>
                        <div class="badge ${statusClass}">
                            ${subscription.active ? '–ê–∫—Ç–∏–≤–µ–Ω' : subscription.status || '–ù–µ –∞–∫—Ç–∏–≤–µ–Ω'}
                        </div>
                    </div>
                    
                    <div class="subscription-stats">
                        <div class="stat-item">
                            <div class="stat-value">${total}</div>
                            <div class="stat-label">–í—Å–µ–≥–æ –∑–∞–Ω—è—Ç–∏–π</div>
                        </div>
                        
                        <div class="stat-item">
                            <div class="stat-value" style="color: ${remaining > 0 ? 'white' : '#ff6b6b'}">
                                ${remaining}
                            </div>
                            <div class="stat-label">–û—Å—Ç–∞–ª–æ—Å—å</div>
                        </div>
                        
                        <div class="stat-item">
                            <div class="stat-value">${used}</div>
                            <div class="stat-label">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</div>
                        </div>
                    </div>
                    
                    ${total > 0 ? `
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${progress}%"></div>
                    </div>
                    <div style="text-align: center; font-size: 0.9rem; opacity: 0.9;">
                        –ü—Ä–æ–≥—Ä–µ—Å—Å: ${progress}%
                    </div>
                    ` : ''}
                    
                    <div class="dates-info">
                        <div class="date-item">
                            <div class="date-label">–î–∞—Ç–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏</div>
                            <div class="date-value">${this.formatDate(subscription.dates?.activation) || '–ù–µ —É–∫–∞–∑–∞–Ω–∞'}</div>
                        </div>
                        <div class="date-item">
                            <div class="date-label">–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è</div>
                            <div class="date-value">${this.formatDate(subscription.dates?.expiration) || '–ù–µ —É–∫–∞–∑–∞–Ω'}</div>
                        </div>
                    </div>
                    
                    ${subscription.dates?.last_visit ? `
                    <div class="date-item" style="margin-top: 10px;">
                        <div class="date-label">–ü–æ—Å–ª–µ–¥–Ω–∏–π –≤–∏–∑–∏—Ç</div>
                        <div class="date-value">${this.formatDate(subscription.dates.last_visit)}</div>
                    </div>
                    ` : ''}
                </div>
                
                ${used > 0 ? `
                <div class="visits-list">
                    <h3 style="color: var(--blue-primary); margin-bottom: 15px; font-size: 1.2rem;">
                        <i class="fas fa-history"></i> –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–µ—â–µ–Ω–∏–π
                    </h3>
                    <div style="text-align: center; padding: 20px; color: var(--gray-dark);">
                        <i class="fas fa-info-circle"></i> –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–µ—â–µ–Ω–∏–π –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å
                    </div>
                </div>
                ` : ''}
            `;
        },

        // –û–ë–ù–û–í–õ–ï–ù–ò–ï –î–ê–ù–ù–´–• –ê–ë–û–ù–ï–ú–ï–ù–¢–ê
        refreshSubscription: function() {
            this.showNotification('–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö...', 'success');
            this.config.subscriptionData = null;
            this.loadSubscriptionFromAPI();
        },

        // –ó–ê–ì–†–£–ó–ö–ê –°–¢–†–ê–ù–ò–¶–´ –†–ê–°–ü–ò–°–ê–ù–ò–Ø
        loadSchedulePage: function() {
            const container = document.getElementById('scheduleContainer');
            const branchBadge = document.getElementById('branchBadge');
            
            if (!this.config.currentProfile) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-exclamation-circle"></i>
                        <p>–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è</p>
                    </div>
                `;
                branchBadge.style.display = 'none';
                return;
            }
            
            const branch = this.config.currentProfile.branch;
            
            if (!branch) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-map-marker-alt"></i>
                        <p>–§–∏–ª–∏–∞–ª –Ω–µ —É–∫–∞–∑–∞–Ω –≤ –ø—Ä–æ—Ñ–∏–ª–µ</p>
                    </div>
                `;
                branchBadge.style.display = 'none';
                return;
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–µ–π–¥–∂ —Ñ–∏–ª–∏–∞–ª–∞
            branchBadge.textContent = `–§–∏–ª–∏–∞–ª: ${branch}`;
            branchBadge.style.display = 'inline-block';
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∏–∑ API
            this.loadScheduleFromAPI(branch);
        },

       loadScheduleFromAPI: function(branch) {
    const container = document.getElementById('scheduleContainer');
    
    this.showLoading('–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è...');
    
    // –ö–æ–¥–∏—Ä—É–µ–º branch –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ –≤ URL
    const encodedBranch = encodeURIComponent(branch);
    
    fetch(`/api/schedule/student/${encodedBranch}`, {
        headers: {
            'Authorization': `Bearer ${this.config.token}`
        }
    })
    .then(response => {
        if (!response.ok) {
            if (response.status === 404) {
                // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ñ–∏–ª–∏–∞–ª–∞ –±–µ–∑ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
                return {
                    success: true,
                    data: {
                        schedule: [],
                        branch: branch,
                        total_lessons: 0
                    }
                };
            }
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }
        return response.json();
    })
    .then(data => {
        if (data.success && data.data && data.data.schedule) {
            this.renderSchedule(data.data.schedule);
        } else {
            throw new Error(data.error || '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è');
        }
    })
    .catch(error => {
        console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è:', error);
        this.showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è', 'error');
        container.innerHTML = `
            <div class="empty-state">
                <i class="fas fa-calendar"></i>
                <p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</p>
                <p style="font-size: 0.9rem; margin-top: 10px;">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É</p>
            </div>
        `;
    })
    .finally(() => {
        this.hideLoading();
    });
},
      renderSchedule: function(schedule) {
    const container = document.getElementById('scheduleContainer');
    
    if (!schedule || !Array.isArray(schedule) || schedule.length === 0) {
        container.innerHTML = `
            <div class="empty-state">
                <i class="fas fa-calendar"></i>
                <p>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ–∫–∞ –Ω–µ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–æ</p>
                <p style="font-size: 0.9rem; margin-top: 10px;">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –ø–æ—è–≤–∏—Ç—Å—è –∑–¥–µ—Å—å, –∫–æ–≥–¥–∞ –µ–≥–æ –¥–æ–±–∞–≤—è—Ç</p>
            </div>
        `;
        return;
    }
    
    let html = '';
    
    schedule.forEach(daySchedule => {
        html += `
            <div class="schedule-day">
                <div class="day-header">${daySchedule.day}</div>
        `;
        
        if (!daySchedule.lessons || daySchedule.lessons.length === 0) {
            html += `
                <div style="text-align: center; padding: 20px; color: var(--gray-dark);">
                    <i class="fas fa-coffee"></i> –ó–∞–Ω—è—Ç–∏–π –Ω–µ—Ç
                </div>
            `;
        } else {
            daySchedule.lessons.forEach(lesson => {
                html += `
                    <div class="lesson-item ${lesson.status.type || ''}">
                        <div class="lesson-time">${lesson.time || '–í—Ä–µ–º—è –Ω–µ —É–∫–∞–∑–∞–Ω–æ'}</div>
                        <div class="lesson-details">
                            <div class="lesson-teacher">
                                <i class="fas fa-chalkboard-teacher"></i> ${lesson.teacher || '–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –Ω–µ —É–∫–∞–∑–∞–Ω'}
                            </div>
                            <div class="lesson-status status-${lesson.status.type || 'normal'}">
                                ${lesson.status.text || '–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ'}
                            </div>
                        </div>
                        <div style="font-size: 0.9rem; color: var(--gray-dark);">
                            ${lesson.group ? lesson.group : ''} ${lesson.group && lesson.ageGroup ? '‚Ä¢' : ''} ${lesson.ageGroup || ''}
                        </div>
                    </div>
                `;
            });
        }
        
        html += `</div>`;
    });
    
    container.innerHTML = html;
},

        // –ó–ê–ì–†–£–ó–ö–ê –°–¢–†–ê–ù–ò–¶–´ –ü–†–ï–ü–û–î–ê–í–ê–¢–ï–õ–ï–ô
        loadTeachersPage: function() {
            const container = document.getElementById('teachersContainer');
            const branchBadge = document.getElementById('branchBadgeTeachers');
            
            if (!this.config.currentProfile) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-exclamation-circle"></i>
                        <p>–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è</p>
                    </div>
                `;
                branchBadge.style.display = 'none';
                return;
            }
            
            const branch = this.config.currentProfile.branch;
            
            if (!branch) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-map-marker-alt"></i>
                        <p>–§–∏–ª–∏–∞–ª –Ω–µ —É–∫–∞–∑–∞–Ω –≤ –ø—Ä–æ—Ñ–∏–ª–µ</p>
                    </div>
                `;
                branchBadge.style.display = 'none';
                return;
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–µ–π–¥–∂ —Ñ–∏–ª–∏–∞–ª–∞
            branchBadge.textContent = `–§–∏–ª–∏–∞–ª: ${branch}`;
            branchBadge.style.display = 'inline-block';
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π –∏–∑ API
            this.loadTeachersFromAPI(branch);
        },

        // –ó–ê–ì–†–£–ó–ö–ê –ü–†–ï–ü–û–î–ê–í–ê–¢–ï–õ–ï–ô –ò–ó API
        loadTeachersFromAPI: function(branch) {
            const container = document.getElementById('teachersContainer');
            
            this.showLoading('–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π...');
            
            fetch(`/api/teachers/student/${encodeURIComponent(branch)}`, {
                headers: {
                    'Authorization': `Bearer ${this.config.token}`
                }
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                return response.json();
            })
            .then(data => {
                if (data.success && data.data && data.data.teachers) {
                    this.renderTeachers(data.data.teachers);
                } else {
                    throw new Error(data.error || '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π');
                }
            })
            .catch(error => {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π:', error);
                this.showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π', 'error');
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-users"></i>
                        <p>–í –≤–∞—à–µ–º —Ñ–∏–ª–∏–∞–ª–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                    </div>
                `;
            })
            .finally(() => {
                this.hideLoading();
            });
        },

        // –†–ï–ù–î–ï–†–ò–ù–ì –ü–†–ï–ü–û–î–ê–í–ê–¢–ï–õ–ï–ô
        renderTeachers: function(teachers) {
            const container = document.getElementById('teachersContainer');
            
            if (!teachers || teachers.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-users"></i>
                        <p>–í –≤–∞—à–µ–º —Ñ–∏–ª–∏–∞–ª–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            
            teachers.forEach(teacher => {
                html += `
                    <div class="teacher-card">
                        <div class="teacher-photo">
                            ${this.getInitials(teacher.name)}
                        </div>
                        <div class="teacher-name">${teacher.name}</div>
                        <div class="teacher-specialization">${teacher.specialization}</div>
                        <div style="margin-top: 10px; font-size: 0.8rem; color: var(--gray-dark);">
                            <i class="fas fa-award"></i> –°—Ç–∞–∂: ${teacher.experience} –ª–µ—Ç
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        },

        // –ó–ê–ì–†–£–ó–ö–ê –°–¢–†–ê–ù–ò–¶–´ FAQ
        loadFaqPage: function() {
            const container = document.getElementById('faqContainer');
            
            this.showLoading('–ó–∞–≥—Ä—É–∑–∫–∞ FAQ...');
            
            fetch('/api/faq/student', {
                headers: {
                    'Authorization': `Bearer ${this.config.token}`
                }
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                return response.json();
            })
            .then(data => {
                if (data.success && data.data && data.data.faq) {
                    this.renderFaq(data.data.faq);
                } else {
                    throw new Error(data.error || '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ FAQ');
                }
            })
            .catch(error => {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ FAQ:', error);
                this.showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ FAQ', 'error');
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-question-circle"></i>
                        <p>–í–æ–ø—Ä–æ—Å—ã –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</p>
                    </div>
                `;
            })
            .finally(() => {
                this.hideLoading();
            });
        },

        // –†–ï–ù–î–ï–†–ò–ù–ì FAQ
        renderFaq: function(faq) {
            const container = document.getElementById('faqContainer');
            
            if (!faq || faq.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-question-circle"></i>
                        <p>–í–æ–ø—Ä–æ—Å—ã –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            
            faq.forEach((item, index) => {
                html += `
                    <div class="faq-item" id="faq-${index}">
                        <div class="faq-question" onclick="ArtApp.toggleFaq(${index})">
                            ${item.question}
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            ${item.answer}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        },

        // –ü–ï–†–ï–ö–õ–Æ–ß–ï–ù–ò–ï FAQ
        toggleFaq: function(index) {
            const faqItem = document.getElementById(`faq-${index}`);
            faqItem.classList.toggle('active');
        },

        // –ó–ê–ì–†–£–ó–ö–ê –°–¢–†–ê–ù–ò–¶–´ –ù–û–í–û–°–¢–ï–ô
        loadNewsPage: function() {
            const container = document.getElementById('newsContainer');
            const branchBadge = document.getElementById('branchBadgeNews');
            
            if (!this.config.currentProfile) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-exclamation-circle"></i>
                        <p>–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è</p>
                    </div>
                `;
                branchBadge.style.display = 'none';
                return;
            }
            
            const branch = this.config.currentProfile.branch;
            
            if (!branch) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-map-marker-alt"></i>
                        <p>–§–∏–ª–∏–∞–ª –Ω–µ —É–∫–∞–∑–∞–Ω –≤ –ø—Ä–æ—Ñ–∏–ª–µ</p>
                    </div>
                `;
                branchBadge.style.display = 'none';
                return;
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–µ–π–¥–∂ —Ñ–∏–ª–∏–∞–ª–∞
            branchBadge.textContent = `–§–∏–ª–∏–∞–ª: ${branch}`;
            branchBadge.style.display = 'inline-block';
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏ –∏–∑ API
            this.loadNewsFromAPI(branch);
        },

        // –ó–ê–ì–†–£–ó–ö–ê –ù–û–í–û–°–¢–ï–ô –ò–ó API
        loadNewsFromAPI: function(branch) {
            const container = document.getElementById('newsContainer');
            
            this.showLoading('–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π...');
            
            fetch(`/api/news/student/${encodeURIComponent(branch)}`, {
                headers: {
                    'Authorization': `Bearer ${this.config.token}`
                }
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                return response.json();
            })
            .then(data => {
                if (data.success && data.data && data.data.news) {
                    this.renderNews(data.data.news);
                } else {
                    throw new Error(data.error || '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π');
                }
            })
            .catch(error => {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π:', error);
                this.showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π', 'error');
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-newspaper"></i>
                        <p>–ù–æ–≤–æ—Å—Ç–µ–π –¥–ª—è –≤–∞—à–µ–≥–æ —Ñ–∏–ª–∏–∞–ª–∞ –ø–æ–∫–∞ –Ω–µ—Ç</p>
                    </div>
                `;
            })
            .finally(() => {
                this.hideLoading();
            });
        },

        // –†–ï–ù–î–ï–†–ò–ù–ì –ù–û–í–û–°–¢–ï–ô
        renderNews: function(news) {
            const container = document.getElementById('newsContainer');
            
            if (!news || news.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-newspaper"></i>
                        <p>–ù–æ–≤–æ—Å—Ç–µ–π –¥–ª—è –≤–∞—à–µ–≥–æ —Ñ–∏–ª–∏–∞–ª–∞ –ø–æ–∫–∞ –Ω–µ—Ç</p>
                    </div>
                `;
                return;
            }
            
            let html = '';
            
            news.forEach(item => {
                html += `
                    <div class="news-item">
                        <div class="news-date">
                            <i class="far fa-calendar"></i> ${item.date}
                        </div>
                        <div class="news-title">${item.title}</div>
                        <div class="news-content news-content-short">
                            ${item.content}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        },

        // –ó–ê–ì–†–£–ó–ö–ê –°–¢–†–ê–ù–ò–¶–´ –ö–û–ù–¢–ê–ö–¢–û–í
        loadContactPage: function() {
            this.updateContactInfo();
        },

        // –°–í–Ø–ó–¨ –° –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–û–ú
        contactAdmin: function(subject) {
            const message = `–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!\n\n–ü—Ä–æ—à—É —Å–≤—è–∑–∞—Ç—å—Å—è —Å–æ –º–Ω–æ–π –ø–æ –≤–æ–ø—Ä–æ—Å—É: ${subject || '–í–æ–ø—Ä–æ—Å –ø–æ –∞–±–æ–Ω–µ–º–µ–Ω—Ç—É'}\n\n–£—á–µ–Ω–∏–∫: ${this.config.currentProfile?.student_name || ''}\n–§–∏–ª–∏–∞–ª: ${this.config.currentProfile?.branch || ''}\n\n–°–ø–∞—Å–∏–±–æ!`;
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —á–µ—Ä–µ–∑ API
            this.showLoading('–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è...');
            
            fetch('/api/contact/admin', {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${this.config.token}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    subject: subject,
                    message: message,
                    student_name: this.config.currentProfile?.student_name || '',
                    branch: this.config.currentProfile?.branch || ''
                })
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                return response.json();
            })
            .then(data => {
                if (data.success) {
                    this.showNotification('‚úÖ –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É', 'success');
                } else {
                    throw new Error(data.error || '–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è');
                }
            })
            .catch(error => {
                console.error('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è:', error);
                this.showNotification('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è: ' + error.message, 'error');
            })
            .finally(() => {
                this.hideLoading();
            });
        },

        // –ó–í–û–ù–û–ö –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–£
        callAdmin: function() {
            const branch = this.config.currentProfile?.branch;
            let phone = this.config.branchContacts['all'];
            
            if (branch && this.config.branchContacts[branch]) {
                phone = this.config.branchContacts[branch];
            }
            
            if (confirm(`–ü–æ–∑–≤–æ–Ω–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É?\n\n${branch || '–û–±—â–∏–π'}: ${phone}\n\n–ù–∞–∂–º–∏—Ç–µ OK –¥–ª—è –∑–≤–æ–Ω–∫–∞`)) {
                // –ò–Ω–∏—Ü–∏–∏—Ä—É–µ–º –∑–≤–æ–Ω–æ–∫ —á–µ—Ä–µ–∑ tel: —Å—Å—ã–ª–∫—É
                window.location.href = `tel:${phone.replace(/\D/g, '')}`;
            }
        },

        // –í–´–•–û–î –ò–ó –°–ò–°–¢–ï–ú–´
        logout: function() {
            if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏?')) {
                this.clearNotificationInterval();
                this.clearSession();
                this.showAuthPage();
                this.showNotification('–í—ã —É—Å–ø–µ—à–Ω–æ –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã', 'success');
                this.hideProfileMenu();
            }
        },

        // –°–ö–†–´–¢–¨ –ú–ï–ù–Æ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø
        hideProfileMenu: function() {
            document.getElementById('userMenu').classList.add('d-none');
        },

        // –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø
        showNotification: function(message, type = 'success', duration = 3000) {
            const container = document.getElementById('notificationContainer');
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            
            const icon = type === 'error' ? 'exclamation-circle' : 
                         type === 'warning' ? 'exclamation-triangle' : 
                         type === 'success' ? 'check-circle' : 'info-circle';
            
            notification.innerHTML = `
                <i class="fas fa-${icon}"></i> ${message}
            `;
            
            container.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, duration);
        },

        // –ò–ù–î–ò–ö–ê–¢–û–† –ó–ê–ì–†–£–ó–ö–ò
        showLoading: function(message) {
            const loading = document.getElementById('loading');
            const loadingText = document.getElementById('loadingText');
            
            if (loadingText) loadingText.textContent = message || '–ó–∞–≥—Ä—É–∑–∫–∞...';
            if (loading) loading.classList.add('active');
        },

        hideLoading: function() {
            const loading = document.getElementById('loading');
            if (loading) loading.classList.remove('active');
        },

        // –†–ê–ë–û–¢–ê –° –°–ï–°–°–ò–ï–ô
        saveSession: function() {
            try {
                const sessionData = {
                    token: this.config.token,
                    currentUser: this.config.currentUser,
                    currentProfile: this.config.currentProfile,
                    profiles: this.config.profiles,
                    subscriptionData: this.config.subscriptionData,
                    timestamp: Date.now()
                };
                localStorage.setItem('artSchoolSession', JSON.stringify(sessionData));
                console.log('üíæ –°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏:', error);
            }
        },

        loadSession: function() {
            try {
                const saved = localStorage.getItem('artSchoolSession');
                if (saved) {
                    const sessionData = JSON.parse(saved);
                    
                    const maxAge = 24 * 60 * 60 * 1000;
                    if (Date.now() - (sessionData.timestamp || 0) < maxAge) {
                        this.config.token = sessionData.token;
                        this.config.currentUser = sessionData.currentUser;
                        this.config.currentProfile = sessionData.currentProfile;
                        this.config.profiles = sessionData.profiles || [];
                        this.config.subscriptionData = sessionData.subscriptionData;
                        console.log('üìÇ –°–µ—Å—Å–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
                        return true;
                    } else {
                        console.log('‚åõ –°–µ—Å—Å–∏—è —É—Å—Ç–∞—Ä–µ–ª–∞, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è');
                        this.clearSession();
                    }
                }
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Å—Å–∏–∏:', error);
                this.clearSession();
            }
            return false;
        },

        clearSession: function() {
            localStorage.removeItem('artSchoolSession');
            this.config.token = null;
            this.config.currentUser = null;
            this.config.currentProfile = null;
            this.config.profiles = [];
            this.config.subscriptionData = null;
            console.log('üóëÔ∏è –°–µ—Å—Å–∏—è –æ—á–∏—â–µ–Ω–∞');
        },

        // –£–¢–ò–õ–ò–¢–´
        getInitials: function(name) {
            if (!name || typeof name !== 'string') return '–£';
            return name.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2) || '–£';
        },

        formatDate: function(dateString) {
            if (!dateString) return '–ù–µ —É–∫–∞–∑–∞–Ω–æ';
            
            try {
                if (/^\d+$/.test(dateString)) {
                    const timestamp = parseInt(dateString);
                    const date = timestamp < 10000000000 
                        ? new Date(timestamp * 1000)
                        : new Date(timestamp);
                    return date.toLocaleDateString('ru-RU');
                }
                
                const date = new Date(dateString);
                if (isNaN(date.getTime())) return dateString;
                
                return date.toLocaleDateString('ru-RU', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric'
                });
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Ç—ã:', error);
                return dateString;
            }
        },

        // –ù–ê–°–¢–†–û–ô–ö–ê –û–ë–†–ê–ë–û–¢–ß–ò–ö–û–í –°–û–ë–´–¢–ò–ô
        setupEventListeners: function() {
            const self = this;
            
            // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
            const phoneInput = document.getElementById('phoneNumber');
            if (phoneInput) {
                phoneInput.addEventListener('input', function(e) {
                    let value = e.target.value.replace(/\D/g, '');
                    
                    if (value.length > 0) {
                        value = value.substring(0, 11);
                    }
                    
                    // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: 7 999 123-45-67
                    if (value.length > 0) {
                        let formatted = '';
                        if (value.length > 0) formatted = value.substring(0, 1);
                        if (value.length > 1) formatted += ' ' + value.substring(1, 4);
                        if (value.length > 4) formatted += ' ' + value.substring(4, 7);
                        if (value.length > 7) formatted += '-' + value.substring(7, 9);
                        if (value.length > 9) formatted += '-' + value.substring(9, 11);
                        e.target.value = formatted;
                    }
                });
                
                phoneInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        self.handlePhoneLogin();
                    }
                });
            }
            
            // –ö–Ω–æ–ø–∫–∞ –≤—Ö–æ–¥–∞ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É
            const loginBtn = document.getElementById('loginBtn');
            if (loginBtn) {
                loginBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    self.handlePhoneLogin();
                });
            }
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
            document.addEventListener('click', (e) => {
                const userMenu = document.getElementById('userMenu');
                const userAvatar = document.getElementById('userAvatar');
                
                if (userMenu && !userMenu.classList.contains('d-none') && 
                    !userMenu.contains(e.target) && 
                    userAvatar && !userAvatar.contains(e.target)) {
                    userMenu.classList.add('d-none');
                }
            });
        }
    };

    // –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–ò –ó–ê–ì–†–£–ó–ö–ï –°–¢–†–ê–ù–ò–¶–´
    document.addEventListener('DOMContentLoaded', function() {
        console.log('üöÄ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ, –∑–∞–ø—É—Å–∫...');
        ArtApp.init();
    });

    // –î–û–°–¢–£–ü –ö –ì–õ–û–ë–ê–õ–¨–ù–û–ú–£ –û–ë–™–ï–ö–¢–£
    window.ArtApp = ArtApp;
    </script>
</body>
</html>
