<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>üé® Art School | –ö–∞–±–∏–Ω–µ—Ç —É—á–µ–Ω–∏–∫–∞</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
/* ==================== –ü–û–õ–ù–´–ï –°–¢–ò–õ–ò –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ==================== */

/* –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ü–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞ –¥–ª—è —à–∫–æ–ª—ã —Ä–∏—Å–æ–≤–∞–Ω–∏—è */
:root {
    --ivory-bg: #F9F7F3;
    --ivory-light: #FDFCF9;
    --graphite-dark: #3D3D3D;
    --graphite-medium: #555555;
    --graphite-light: #888888;
    --art-blue: #4A90E2;
    --art-blue-light: #E8F0FE;
    --art-blue-dark: #3A7BC8;
    --creative-purple: #9C6ADE;
    --creative-purple-light: #F3EDFC;
    --creative-yellow: #FFC107;
    --creative-yellow-light: #FFF8E1;
    --creative-orange: #FF9800;
    --creative-green: #4CAF50;
    --creative-green-light: #E8F5E9;
    --creative-red: #F44336;
    --creative-red-light: #FFEBEE;
    --white: #FFFFFF;
    --success: var(--creative-green);
    --warning: var(--creative-orange);
    --error: var(--creative-red);
    --info: var(--art-blue);
    --primary-accent: var(--art-blue);
    --primary-accent-dark: var(--art-blue-dark);
    --secondary-accent: var(--creative-purple);
    --secondary-accent-light: var(--creative-purple-light);
    --action-color: var(--creative-yellow);
    --action-dark: #FFA000;
    --rating-color: var(--creative-purple);
    --card-bg: var(--ivory-bg);
    --card-hover-bg: var(--ivory-light);
    
    --primary-gradient: linear-gradient(135deg, var(--art-blue), var(--art-blue-dark));
    --secondary-gradient: linear-gradient(135deg, var(--creative-purple), #7B52AB);
    --action-gradient: linear-gradient(135deg, var(--creative-yellow), #FFB300);
    --success-gradient: linear-gradient(135deg, var(--creative-green), #43A047);
    --warning-gradient: linear-gradient(135deg, var(--creative-orange), #F57C00);
    
    --shadow-sm: 0 2px 8px rgba(61, 61, 61, 0.04);
    --shadow: 0 4px 16px rgba(61, 61, 61, 0.08);
    --shadow-lg: 0 8px 32px rgba(61, 61, 61, 0.12);
    --shadow-xl: 0 20px 40px rgba(61, 61, 61, 0.15);
    
    --radius-sm: 8px;
    --radius: 12px;
    --radius-lg: 16px;
    --radius-xl: 20px;
    --radius-full: 9999px;
    
    --transition-fast: 0.15s ease;
    --transition: 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    --transition-slow: 0.4s ease;
    
    --nav-height: 70px;
    --bottom-nav-height: 60px;
}

/* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
}

html, body {
    font-family: 'Inter', sans-serif;
    background: var(--ivory-bg);
    color: var(--graphite-dark);
    line-height: 1.6;
    min-height: 100vh;
    font-weight: 400;
    padding-top: var(--nav-height);
    padding-bottom: var(--bottom-nav-height);
    overflow-x: hidden;
    max-width: 100%;
    position: relative;
    font-size: 16px;
}

.container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 16px;
    width: 100%;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã */
@media (min-width: 1400px) {
    .container { max-width: 1320px; }
}

@media (max-width: 1200px) {
    .container { max-width: 1140px; }
}

@media (max-width: 992px) {
    .container { max-width: 960px; }
    html, body { font-size: 15px; }
}

@media (max-width: 768px) {
    .container { max-width: 720px; }
    html, body { font-size: 14px; }
    .container { padding: 0 12px; }
}

@media (max-width: 576px) {
    .container { max-width: 540px; }
    html, body { font-size: 14px; }
    .container { padding: 0 10px; }
}

/* ==================== –ù–ê–í–ò–ì–ê–¶–ò–Ø ==================== */
.top-nav {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    height: var(--nav-height);
    background: rgba(255, 255, 255, 0.98);
    border-bottom: 2px solid var(--art-blue);
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 20px;
    z-index: 1000;
    backdrop-filter: blur(10px);
    box-shadow: 0 2px 20px rgba(74, 144, 226, 0.1);
}

/* –õ–æ–≥–æ—Ç–∏–ø */
.logo-container {
    display: flex;
    align-items: center;
    gap: 12px;
    text-decoration: none;
    height: 100%;
}

.logo-frame {
    width: 60px;
    height: 60px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--primary-gradient);
    border-radius: 50%;
    padding: 12px;
}

.logo-img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    border-radius: 8px;
}

.logo-text-container {
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.logo-main-text {
    display: flex;
    align-items: center;
    gap: 4px;
    font-family: 'Playfair Display', serif;
    font-weight: 700;
    line-height: 1;
}

.logo-art {
    font-size: 1.6rem;
    color: var(--art-blue);
}

.logo-school {
    font-size: 1.6rem;
    color: var(--creative-purple);
}

.logo-tagline {
    font-size: 0.75rem;
    color: var(--graphite-medium);
    font-weight: 500;
    margin-top: 2px;
    white-space: nowrap;
}

/* –ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
.user-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: var(--primary-gradient);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: 700;
    font-size: 1.2rem;
    cursor: pointer;
    flex-shrink: 0;
    border: 3px solid white;
    transition: var(--transition);
    box-shadow: var(--shadow-sm);
}

.user-avatar:hover {
    transform: scale(1.05);
}

.user-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
}

/* –ú–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
.user-menu {
    display: none;
    position: absolute;
    top: 70px;
    right: 15px;
    background: white;
    border-radius: var(--radius);
    box-shadow: var(--shadow-lg);
    width: 280px;
    z-index: 1000;
    border: 1px solid rgba(61, 61, 61, 0.1);
    animation: fadeIn 0.2s ease;
}

.nav-menu-item {
    display: flex;
    align-items: center;
    padding: 12px 16px;
    text-decoration: none;
    color: var(--graphite-dark);
    border-radius: var(--radius-sm);
    transition: var(--transition-fast);
    gap: 12px;
    width: 100%;
}

.nav-menu-item:hover {
    background: var(--art-blue-light);
}

/* –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è */
.bottom-nav {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    height: var(--bottom-nav-height);
    background: rgba(255, 255, 255, 0.98);
    border-top: 2px solid var(--art-blue);
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: 0 5px;
    z-index: 1000;
    backdrop-filter: blur(10px);
    box-shadow: 0 -2px 20px rgba(74, 144, 226, 0.1);
}

.nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-decoration: none;
    color: var(--graphite-medium);
    padding: 8px;
    border-radius: var(--radius-sm);
    transition: var(--transition-fast);
    min-width: 60px;
    cursor: pointer;
    flex: 1;
    max-width: 100px;
}

.nav-item.active {
    color: var(--art-blue);
    background: var(--art-blue-light);
}

.nav-item i {
    font-size: 1.2rem;
    margin-bottom: 4px;
}

.nav-item span {
    font-size: 0.75rem;
    font-weight: 500;
    white-space: nowrap;
}

/* ==================== –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ ==================== */
.page {
    display: none;
    animation: fadeIn 0.3s ease;
    min-height: calc(100vh - var(--nav-height) - var(--bottom-nav-height));
    padding: 20px 0;
    width: 100%;
}

.page.active {
    display: block;
}

.section {
    margin-bottom: 30px;
    width: 100%;
}

.section-title {
    font-family: 'Playfair Display', serif;
    font-size: 1.8rem;
    font-weight: 600;
    color: var(--graphite-dark);
    margin-bottom: 20px;
}

.section-subtitle {
    font-size: 1rem;
    color: var(--graphite-medium);
    margin-bottom: 24px;
    line-height: 1.5;
}

/* –ö–∞—Ä—Ç–æ—á–∫–∏ */
.card {
    background: var(--white);
    border-radius: var(--radius-lg);
    padding: 24px;
    border: 2px solid var(--art-blue-light);
    box-shadow: var(--shadow-sm);
    transition: var(--transition);
    width: 100%;
}

.card:hover {
    background: var(--ivory-light);
    transform: translateY(-4px);
    box-shadow: var(--shadow);
    border-color: var(--art-blue);
}

/* ==================== –ö–ù–û–ü–ö–ò ==================== */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    padding: 14px 28px;
    border: none;
    border-radius: var(--radius);
    font-family: 'Inter', sans-serif;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    text-decoration: none;
    text-align: center;
}

.btn:active {
    transform: translateY(0) !important;
}

.btn-primary {
    background: var(--primary-gradient);
    color: white;
    box-shadow: 0 4px 12px rgba(74, 144, 226, 0.25);
}

.btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(74, 144, 226, 0.3);
}

.btn-secondary {
    background: var(--white);
    color: var(--graphite-dark);
    border: 2px solid var(--art-blue);
    color: var(--art-blue);
}

.btn-secondary:hover {
    background: var(--art-blue-light);
    transform: translateY(-1px);
}

.btn-success {
    background: var(--success-gradient);
    color: white;
    box-shadow: 0 4px 12px rgba(76, 175, 80, 0.25);
}

.btn-success:hover {
    background: linear-gradient(135deg, var(--creative-green), #2E7D32);
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(76, 175, 80, 0.3);
}

.btn-warning {
    background: var(--warning-gradient);
    color: white;
}

.btn-warning:hover {
    background: linear-gradient(135deg, var(--creative-orange), #E65100);
    transform: translateY(-2px);
}

/* ==================== HERO –°–ï–ö–¶–ò–Ø ==================== */
.hero {
    background: linear-gradient(135deg, rgba(74, 144, 226, 0.1), rgba(156, 106, 222, 0.05));
    border-radius: var(--radius-xl);
    padding: 40px;
    margin-bottom: 40px;
    text-align: center;
    position: relative;
    overflow: hidden;
    border: 2px solid var(--art-blue);
}

.hero:before,
.hero:after {
    content: '';
    position: absolute;
    border-radius: 50%;
    opacity: 0.15;
}

.hero:before {
    top: -50%;
    right: -50%;
    width: 200px;
    height: 200px;
    background: linear-gradient(135deg, var(--creative-purple-light), transparent);
}

.hero:after {
    bottom: -30%;
    left: -30%;
    width: 150px;
    height: 150px;
    background: linear-gradient(135deg, transparent, var(--art-blue-light));
}

.hero-content {
    position: relative;
    z-index: 1;
}

.hero h1 {
    font-family: 'Playfair Display', serif;
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 16px;
    color: var(--graphite-dark);
    line-height: 1.2;
}

.hero .tagline {
    font-size: 1.8rem;
    color: var(--art-blue);
    font-weight: 600;
    margin-bottom: 24px;
}

.hero p {
    font-size: 1.1rem;
    color: var(--graphite-medium);
    margin-bottom: 32px;
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
}

.hero-actions {
    display: flex;
    gap: 16px;
    justify-content: center;
    flex-wrap: wrap;
}

/* ==================== –ö–ê–†–¢–û–ß–ö–ò ==================== */
.category-card-main-style {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px 15px;
    background: var(--white);
    border-radius: var(--radius-lg);
    border: 2px solid var(--art-blue-light);
    box-shadow: var(--shadow-sm);
    transition: var(--transition);
    cursor: pointer;
    position: relative;
    overflow: hidden;
    height: 100%;
    text-align: center;
    animation: fadeIn 0.5s ease;
    min-height: 280px;
}

.category-card-main-style:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow);
    border-color: var(--art-blue);
    background: var(--ivory-light);
}

.category-image-main {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    margin: 0 auto 15px;
    overflow: hidden;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    background: var(--primary-gradient);
}

.category-image-main img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
    display: block;
    transition: transform 0.3s ease;
}

.category-card-main-style:hover .category-image-main img {
    transform: scale(1.08);
}

.category-card-main-style h3 {
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 10px;
    color: var(--graphite-dark);
    text-align: center;
    width: 100%;
    line-height: 1.3;
    height: 42px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
    padding: 0 5px;
}

.category-description-main {
    color: var(--graphite-medium);
    font-size: 0.85rem;
    line-height: 1.4;
    flex-grow: 1;
    background: var(--art-blue-light);
    padding: 12px;
    border-radius: 12px;
    border-bottom-left-radius: 25px;
    border-bottom-right-radius: 25px;
    width: 100%;
    max-height: 90px;
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    text-overflow: ellipsis;
    margin-bottom: 15px;
    border: 1px solid rgba(74, 144, 226, 0.2);
}

/* –§—É—Ç–µ—Ä –∫–∞—Ä—Ç–æ—á–∫–∏ */
.category-card-footer {
    margin-top: auto;
    color: var(--art-blue);
    font-weight: 600;
    font-size: 0.8rem !important;
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    padding: 0 5px;
    gap: 8px;
}

.category-card-footer .category-name {
    color: var(--graphite-medium);
    font-weight: 500;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    flex: 1;
    text-align: left;
    font-size: 0.8rem;
}

.category-card-footer .select-action {
    display: flex;
    align-items: center;
    gap: 4px;
    color: var(--art-blue);
    font-weight: 600;
    white-space: nowrap;
    flex-shrink: 0;
}

.category-card-footer .fa-arrow-right {
    color: var(--art-blue);
    font-size: 0.75rem !important;
    transition: transform 0.2s ease;
}

.category-card-main-style:hover .fa-arrow-right {
    transform: translateX(3px);
}

/* ==================== –°–ï–¢–ö–ò ==================== */
.grid {
    display: grid;
    gap: 20px;
    width: 100%;
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å–µ—Ç–∫–∏ */
@media (min-width: 1200px) {
    .grid-3-main, .grid-2-main, #allServicesList, #allCategoriesList {
        grid-template-columns: repeat(3, 1fr);
    }
}

@media (min-width: 768px) and (max-width: 1199px) {
    .grid-3-main, .grid-2-main, #allServicesList, #allCategoriesList {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 767px) {
    .grid-3-main, .grid-2-main, #allServicesList, #allCategoriesList {
        grid-template-columns: 1fr;
        gap: 15px;
    }
    
    .category-card-main-style {
        min-height: 250px;
        padding: 15px 10px;
    }
    
    .category-image-main {
        width: 80px;
        height: 80px;
    }
    
    .category-card-main-style h3 {
        font-size: 1rem;
        height: 36px;
    }
    
    .category-description-main {
        font-size: 0.8rem;
        padding: 10px;
        -webkit-line-clamp: 3;
    }
    
    .category-card-footer {
        font-size: 0.75rem !important;
        gap: 6px;
    }
}

/* ==================== –§–û–†–ú–´ –ò –ò–ù–ü–£–¢–´ ==================== */
.form-group {
    margin-bottom: 20px;
    width: 100%;
}

.form-label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: var(--graphite-dark);
}

.form-input {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid var(--art-blue-light);
    border-radius: var(--radius);
    font-family: 'Inter', sans-serif;
    font-size: 1rem;
    transition: var(--transition);
    background: var(--white);
}

.form-input:focus {
    outline: none;
    border-color: var(--art-blue);
    box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.2);
}

/* ==================== –ü–û–ò–°–ö ==================== */
.search-box {
    position: relative;
    margin-bottom: 20px;
    width: 100%;
}

.search-input {
    width: 100%;
    padding: 14px 20px 14px 50px;
    border: 2px solid var(--art-blue-light);
    border-radius: 50px;
    font-size: 1rem;
    background: var(--white);
    transition: var(--transition);
}

.search-input:focus {
    outline: none;
    border-color: var(--art-blue);
    box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.3);
}

.search-icon {
    position: absolute;
    left: 20px;
    top: 50%;
    transform: translateY(-50%);
    color: var(--graphite-light);
    z-index: 1;
}

/* ==================== –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ==================== */
.notification {
    position: fixed;
    top: 80px;
    right: 20px;
    z-index: 3000;
    background: white;
    border-radius: var(--radius);
    padding: 16px 20px;
    box-shadow: var(--shadow-lg);
    border-left: 4px solid var(--art-blue);
    animation: slideInDown 0.3s ease;
    display: flex;
    align-items: center;
    gap: 12px;
    max-width: 90%;
    width: 350px;
    backdrop-filter: blur(10px);
}

.notification.hiding {
    animation: slideOutUp 0.3s ease forwards;
}

.notification.error {
    border-left-color: var(--error);
}

.notification.warning {
    border-left-color: var(--warning);
}

.notification.info {
    border-left-color: var(--info);
}

/* ==================== –ü–†–û–§–ò–õ–¨ ==================== */
.profile-header {
    background: var(--primary-gradient);
    color: white;
    padding: 30px 20px;
    border-radius: var(--radius-xl);
    margin-bottom: 20px;
    text-align: center;
    position: relative;
    overflow: hidden;
}

.profile-avatar {
    width: 100px;
    height: 100px;
    background: white;
    border-radius: 50%;
    margin: 0 auto 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--art-blue);
    font-size: 2.5rem;
    font-weight: 700;
    border: 4px solid rgba(255, 255, 255, 0.3);
}

.profile-name {
    font-size: 1.8rem;
    font-weight: 600;
    margin-bottom: 8px;
}

.profile-email {
    font-size: 1rem;
    opacity: 0.9;
    margin-bottom: 16px;
}

.profile-stats {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin-top: 20px;
}

.stat-item {
    background: rgba(255, 255, 255, 0.15);
    padding: 12px;
    border-radius: var(--radius);
    text-align: center;
    backdrop-filter: blur(10px);
}

.stat-value {
    font-size: 1.4rem;
    font-weight: 700;
    margin-bottom: 4px;
}

.stat-label {
    font-size: 0.8rem;
    opacity: 0.9;
}

/* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å */
.compact-profile-header {
    background: var(--primary-gradient);
    color: white;
    padding: 20px;
    border-radius: var(--radius);
    margin-bottom: 20px;
    text-align: center;
    position: relative;
    overflow: hidden;
}

.compact-profile-avatar {
    width: 80px;
    height: 80px;
    background: white;
    border-radius: 50%;
    margin: 0 auto 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--art-blue);
    font-size: 2rem;
    font-weight: 700;
    border: 4px solid rgba(255, 255, 255, 0.3);
    box-shadow: var(--shadow);
    flex-shrink: 0;
    overflow: hidden;
}

.compact-profile-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
    display: block;
}

.compact-profile-name {
    font-size: 1.3rem;
    font-weight: 600;
    margin-bottom: 4px;
}

.compact-profile-email {
    font-size: 0.9rem;
    opacity: 0.9;
    margin-bottom: 15px;
}

.compact-profile-stats {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 15px;
}

.compact-stat-item {
    text-align: center;
    min-width: 60px;
}

.compact-stat-value {
    font-size: 1.2rem;
    font-weight: 700;
    margin-bottom: 3px;
}

.compact-stat-label {
    font-size: 0.7rem;
    opacity: 0.9;
}

/* ==================== –†–ê–°–ü–ò–°–ê–ù–ò–ï ==================== */
.schedule-day {
    margin-bottom: 20px;
}

.schedule-day-header {
    background: var(--art-blue-light);
    padding: 12px 16px;
    border-radius: var(--radius);
    margin-bottom: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-left: 4px solid var(--art-blue);
}

.schedule-day-title {
    font-weight: 600;
    color: var(--graphite-dark);
    font-size: 1.1rem;
}

.schedule-lesson {
    background: var(--white);
    border-radius: var(--radius);
    padding: 16px;
    margin-bottom: 10px;
    border: 2px solid var(--art-blue-light);
    transition: var(--transition);
}

.schedule-lesson:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow);
}

.lesson-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 10px;
}

.lesson-time {
    font-weight: 600;
    color: var(--art-blue);
    font-size: 1.1rem;
}

.lesson-status {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
}

.lesson-status.normal {
    background: var(--creative-green-light);
    color: var(--creative-green);
}

.lesson-status.cancelled {
    background: var(--creative-red-light);
    color: var(--creative-red);
}

.lesson-status.changed {
    background: var(--creative-yellow-light);
    color: #FF8F00;
}

.lesson-details {
    color: var(--graphite-medium);
    font-size: 0.9rem;
}

.lesson-teacher {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 8px;
    color: var(--graphite-dark);
}

/* ==================== –ê–ë–û–ù–ï–ú–ï–ù–¢ ==================== */
.subscription-card-detailed {
    padding: 24px;
    background: var(--white);
    border-radius: var(--radius-lg);
    border: 2px solid var(--art-blue-light);
    margin-bottom: 20px;
}

.subscription-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 20px;
    padding-bottom: 20px;
    border-bottom: 2px solid var(--art-blue-light);
}

.subscription-title h3 {
    font-size: 1.4rem;
    font-weight: 700;
    color: var(--graphite-dark);
    margin-bottom: 8px;
    font-family: 'Playfair Display', serif;
}

.subscription-stats {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
    margin-bottom: 20px;
}

.subscription-stat {
    background: var(--art-blue-light);
    padding: 16px;
    border-radius: var(--radius);
    text-align: center;
}

.subscription-stat-value {
    font-size: 1.8rem;
    font-weight: 700;
    color: var(--art-blue);
    margin-bottom: 4px;
}

.subscription-stat-label {
    font-size: 0.9rem;
    color: var(--graphite-medium);
}

.visits-list {
    margin-top: 20px;
}

.visit-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 0;
    border-bottom: 1px solid var(--art-blue-light);
}

.visit-item:last-child {
    border-bottom: none;
}

.visit-date {
    font-weight: 500;
    color: var(--graphite-dark);
}

.visit-status {
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
}

.visit-status.attended {
    background: var(--creative-green-light);
    color: var(--creative-green);
}

.visit-status.missed {
    background: var(--creative-red-light);
    color: var(--creative-red);
}

/* ==================== –ü–†–ï–ü–û–î–ê–í–ê–¢–ï–õ–ò ==================== */
.teachers-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
}

.teacher-card {
    background: var(--white);
    border-radius: var(--radius-lg);
    padding: 20px;
    border: 2px solid var(--art-blue-light);
    transition: var(--transition);
    text-align: center;
}

.teacher-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow);
    border-color: var(--art-blue);
}

.teacher-avatar {
    width: 100px;
    height: 100px;
    border-radius: 50%;
    margin: 0 auto 15px;
    overflow: hidden;
    background: var(--primary-gradient);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 2.5rem;
    font-weight: 700;
    border: 4px solid white;
    box-shadow: var(--shadow);
}

.teacher-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
}

.teacher-name {
    font-size: 1.2rem;
    font-weight: 600;
    margin-bottom: 8px;
    color: var(--graphite-dark);
}

.teacher-qualification {
    color: var(--graphite-medium);
    font-size: 0.9rem;
    margin-bottom: 12px;
    min-height: 60px;
}

.teacher-specialization {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: var(--creative-purple-light);
    color: var(--creative-purple);
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 600;
}

/* ==================== FAQ ==================== */
.faq-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.faq-item {
    background: var(--white);
    border-radius: var(--radius);
    border: 2px solid var(--art-blue-light);
    overflow: hidden;
    transition: var(--transition);
}

.faq-question {
    padding: 16px 20px;
    font-weight: 600;
    color: var(--graphite-dark);
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: var(--transition);
}

.faq-question:hover {
    background: var(--art-blue-light);
}

.faq-question.active {
    background: var(--art-blue-light);
    border-bottom: 2px solid var(--art-blue);
}

.faq-answer {
    padding: 0 20px;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
}

.faq-answer.active {
    padding: 20px;
    max-height: 500px;
}

/* ==================== –ù–û–í–û–°–¢–ò ==================== */
.news-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
}

.news-card {
    background: var(--white);
    border-radius: var(--radius-lg);
    padding: 20px;
    border: 2px solid var(--art-blue-light);
    transition: var(--transition);
    cursor: pointer;
}

.news-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow);
    border-color: var(--art-blue);
}

.news-date {
    font-size: 0.85rem;
    color: var(--graphite-light);
    margin-bottom: 10px;
    display: flex;
    align-items: center;
    gap: 6px;
}

.news-title {
    font-size: 1.1rem;
    font-weight: 600;
    margin-bottom: 10px;
    color: var(--graphite-dark);
}

.news-preview {
    color: var(--graphite-medium);
    font-size: 0.9rem;
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* ==================== –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ ==================== */
.admin-section {
    background: var(--white);
    border-radius: var(--radius-lg);
    padding: 24px;
    margin-bottom: 20px;
    border: 2px solid var(--art-blue-light);
}

.admin-section-title {
    font-size: 1.3rem;
    font-weight: 600;
    margin-bottom: 20px;
    color: var(--graphite-dark);
    padding-bottom: 12px;
    border-bottom: 2px solid var(--art-blue-light);
    display: flex;
    align-items: center;
    gap: 10px;
}

.filters-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
    margin-bottom: 20px;
}

.filter-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.filter-label {
    font-weight: 500;
    color: var(--graphite-dark);
    font-size: 0.9rem;
}

.filter-select {
    padding: 10px 12px;
    border: 2px solid var(--art-blue-light);
    border-radius: var(--radius);
    font-family: 'Inter', sans-serif;
    font-size: 0.9rem;
    background: var(--white);
    transition: var(--transition);
}

.filter-select:focus {
    outline: none;
    border-color: var(--art-blue);
}

.message-template {
    margin-bottom: 20px;
}

.template-textarea {
    width: 100%;
    min-height: 120px;
    padding: 12px;
    border: 2px solid var(--art-blue-light);
    border-radius: var(--radius);
    font-family: 'Inter', sans-serif;
    font-size: 0.9rem;
    resize: vertical;
    transition: var(--transition);
}

.template-textarea:focus {
    outline: none;
    border-color: var(--art-blue);
    box-shadow: 0 0 0 3px rgba(74, 144, 226, 0.2);
}

.recipients-count {
    background: var(--art-blue-light);
    padding: 16px;
    border-radius: var(--radius);
    margin-bottom: 20px;
    text-align: center;
    font-weight: 500;
    color: var(--graphite-dark);
}

.recipients-count strong {
    color: var(--art-blue);
    font-size: 1.2rem;
}

.broadcast-actions {
    display: flex;
    gap: 12px;
    justify-content: center;
}

.log-entry {
    padding: 12px;
    border-bottom: 1px solid var(--art-blue-light);
    font-size: 0.9rem;
}

.log-entry:last-child {
    border-bottom: none;
}

.log-date {
    color: var(--graphite-light);
    font-size: 0.85rem;
}

.log-action {
    font-weight: 500;
    color: var(--graphite-dark);
    margin: 4px 0;
}

.log-details {
    color: var(--graphite-medium);
    font-size: 0.85rem;
}

/* ==================== –ê–ù–ò–ú–ê–¶–ò–ò ==================== */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

@keyframes slideInDown {
    from { transform: translateY(-100%); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

@keyframes slideOutUp {
    from { transform: translateY(0); opacity: 1; }
    to { transform: translateY(-100%); opacity: 0; }
}

@keyframes modalSlideIn {
    from { opacity: 0; transform: translateY(-20px) scale(0.95); }
    to { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

/* ==================== –¢–ê–ë–´ ==================== */
.tabs {
    display: flex;
    border-bottom: 2px solid var(--art-blue-light);
    margin-bottom: 20px;
    overflow-x: auto;
}

.tab {
    padding: 12px 20px;
    font-weight: 500;
    color: var(--graphite-medium);
    border-bottom: 3px solid transparent;
    cursor: pointer;
    white-space: nowrap;
    transition: var(--transition-fast);
}

.tab.active {
    color: var(--art-blue);
    border-bottom-color: var(--art-blue);
}

/* ==================== –ü–£–°–¢–´–ï –°–û–°–¢–û–Ø–ù–ò–Ø ==================== */
.empty-state {
    text-align: center;
    padding: 60px 20px;
}

.empty-state-icon {
    font-size: 4rem;
    color: rgba(61, 61, 61, 0.1);
    margin-bottom: 20px;
}

.empty-state-title {
    font-size: 1.3rem;
    font-weight: 600;
    color: var(--graphite-dark);
    margin-bottom: 10px;
}

.empty-state-description {
    color: var(--graphite-medium);
    margin-bottom: 25px;
}

/* ==================== –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê ==================== */
.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.5);
    justify-content: center;
    align-items: center;
    z-index: 2000;
    padding: 20px;
    overflow-y: auto;
}

.modal.active {
    display: flex;
}

.modal-content {
    background: white;
    padding: 30px;
    border-radius: var(--radius-lg);
    max-width: 90%;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
    animation: modalSlideIn 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
    border: 2px solid var(--art-blue);
}

@media (max-width: 768px) {
    .modal {
        padding: 10px;
    }
    
    .modal-content {
        padding: 20px;
        max-width: 95%;
    }
}

/* ==================== –°–ü–ò–ù–ù–ï–† ==================== */
.spinner {
    width: 40px;
    height: 40px;
    border: 4px solid var(--art-blue-light);
    border-top: 4px solid var(--art-blue);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 0 auto;
}

/* ==================== –°–ö–†–û–õ–õ–ë–ê–† ==================== */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: var(--ivory-bg);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb {
    background: var(--art-blue);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: var(--art-blue-dark);
}

/* –î–ª—è Firefox */
* {
    scrollbar-width: thin;
    scrollbar-color: var(--art-blue) var(--ivory-bg);
}

/* ==================== –£–¢–ò–õ–ò–¢–´ ==================== */
.text-center { text-align: center; }
.mt-20 { margin-top: 20px; }
.mb-20 { margin-bottom: 20px; }
.w-100 { width: 100%; }
.d-flex { display: flex; }
.justify-between { justify-content: space-between; }
.align-center { align-items: center; }
.gap-10 { gap: 10px; }
.gap-20 { gap: 20px; }

/* ==================== –ê–î–ê–ü–¢–ò–í–ù–û–°–¢–¨ ==================== */
@media (max-width: 768px) {
    .hero {
        padding: 30px 20px;
    }
    
    .hero h1 {
        font-size: 2rem;
    }
    
    .hero .tagline {
        font-size: 1.4rem;
    }
    
    .section-title {
        font-size: 1.5rem;
    }
    
    .subscription-stats {
        grid-template-columns: 1fr;
    }
    
    .teachers-grid {
        grid-template-columns: 1fr;
    }
    
    .news-grid {
        grid-template-columns: 1fr;
    }
    
    .filters-row {
        grid-template-columns: 1fr;
    }
    
    .broadcast-actions {
        flex-direction: column;
    }
    
    .broadcast-actions .btn {
        width: 100%;
    }
}

/* ==================== –¢–ï–õ–ï–ì–†–ê–ú –°–¢–ò–õ–ò ==================== */
.tg-theme {
    background: var(--white);
    color: var(--graphite-dark);
}

.tg-btn {
    background: var(--art-blue);
    color: white;
    border: none;
    border-radius: var(--radius);
    padding: 12px 24px;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition);
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.tg-btn:hover {
    background: var(--art-blue-dark);
    transform: translateY(-2px);
}

.tg-btn-secondary {
    background: transparent;
    color: var(--art-blue);
    border: 2px solid var(--art-blue);
}

.tg-btn-secondary:hover {
    background: var(--art-blue-light);
}
</style>
</head>
<body>
    <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div id="loading-bar" style="position: fixed; top: 0; left: 0; width: 100%; height: 3px; background: var(--art-blue); z-index: 9999; transform: translateX(-100%);"></div>
    
    <!-- –û–≤–µ—Ä–ª–µ–π –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–µ–Ω—é -->
    <div id="mobile-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 999;"></div>
    
    <!-- –í–µ—Ä—Ö–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="top-nav">
        <a href="#" class="logo-container" onclick="app.navigateToPage('home')">
            <div class="logo-frame">
                <div style="color: white; font-size: 2rem;">
                    üé®
                </div>
            </div>
            <div class="logo-text-container">
                <div class="logo-main-text">
                    <span class="logo-art">ART</span>
                    <span class="logo-school">SCHOOL</span>
                </div>
                <div class="logo-tagline">–†–∏—Å—É–µ–º –±—É–¥—É—â–µ–µ</div>
            </div>
        </a>
        
        <div class="user-avatar" id="userAvatar" onclick="app.toggleUserMenu()" style="display: none;">
            <img id="userAvatarImg" 
                 alt="–ê–≤–∞—Ç–∞—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
                 onerror="this.style.display='none'; this.parentElement.innerHTML=this.parentElement.textContent || '–ì';"
                 style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">
        </div>
        
        <div class="user-menu" id="userMenu">
            <div style="padding: 10px; border-bottom: 1px solid var(--art-blue-light);">
                <div style="font-weight: 600;" id="menuUserName">–ì–æ—Å—Ç—å</div>
                <div style="font-size: 0.9rem; color: var(--graphite-medium);" id="menuUserEmail"></div>
            </div>
            <div style="padding: 5px 0;">
                <a href="#" class="nav-menu-item" onclick="app.navigateToPage('profile')">
                    <i class="fas fa-user"></i>–ü—Ä–æ—Ñ–∏–ª—å
                </a>
                <a href="#" class="nav-menu-item" onclick="app.navigateToPage('schedule')">
                    <i class="fas fa-calendar-alt"></i>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
                </a>
                <a href="#" class="nav-menu-item" onclick="app.navigateToPage('subscription')">
                    <i class="fas fa-ticket-alt"></i>–ê–±–æ–Ω–µ–º–µ–Ω—Ç
                </a>
                <a href="#" class="nav-menu-item" onclick="app.navigateToPage('teachers')">
                    <i class="fas fa-chalkboard-teacher"></i>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏
                </a>
                <a href="#" class="nav-menu-item" onclick="app.showLoginModal()" id="loginMenuBtn">
                    <i class="fas fa-sign-in-alt"></i>–í–æ–π—Ç–∏
                </a>
                <a href="#" class="nav-menu-item" onclick="app.logout()" id="logoutMenuBtn" style="display: none;">
                    <i class="fas fa-sign-out-alt"></i>–í—ã–π—Ç–∏
                </a>
            </div>
        </div>
    </nav>
    
    <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="bottom-nav" id="bottomNav" style="display: none;">
        <a href="#" class="nav-item active" data-page="home" onclick="app.navigateToPage('home')">
            <i class="fas fa-home"></i>
            <span>–ì–ª–∞–≤–Ω–∞—è</span>
        </a>
        <a href="#" class="nav-item" data-page="schedule" onclick="app.navigateToPage('schedule')">
            <i class="fas fa-calendar-alt"></i>
            <span>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</span>
        </a>
        <a href="#" class="nav-item" data-page="subscription" onclick="app.navigateToPage('subscription')">
            <i class="fas fa-ticket-alt"></i>
            <span>–ê–±–æ–Ω–µ–º–µ–Ω—Ç</span>
        </a>
        <a href="#" class="nav-item" data-page="teachers" onclick="app.navigateToPage('teachers')">
            <i class="fas fa-chalkboard-teacher"></i>
            <span>–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏</span>
        </a>
        <a href="#" class="nav-item" data-page="profile" onclick="app.navigateToPage('profile')">
            <i class="fas fa-user"></i>
            <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
        </a>
    </nav>
    
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main>
        <!-- –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
        <div id="auth-page" class="page active">
            <div class="container" style="min-height: 80vh; display: flex; align-items: center; justify-content: center;">
                <div style="max-width: 500px; width: 100%;">
                    <div class="card" style="text-align: center; padding: 40px;">
                        <div style="margin-bottom: 30px;">
                            <div style="width: 80px; height: 80px; background: var(--primary-gradient); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px; color: white; font-size: 2.5rem;">
                                üé®
                            </div>
                            <h1 style="font-family: 'Playfair Display', serif; font-size: 2.2rem; color: var(--graphite-dark); margin-bottom: 10px;">ART SCHOOL</h1>
                            <p style="color: var(--graphite-medium); font-size: 1.1rem;">–ö–∞–±–∏–Ω–µ—Ç —É—á–µ–Ω–∏–∫–∞ —à–∫–æ–ª—ã —Ä–∏—Å–æ–≤–∞–Ω–∏—è</p>
                        </div>
                        
                        <div id="authContent">
                            <div style="text-align: center; margin-bottom: 30px;">
                                <h2 style="color: var(--graphite-dark); margin-bottom: 15px;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
                                <p style="color: var(--graphite-medium); margin-bottom: 25px;">
                                    –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ª–∏—á–Ω–æ–º—É –∫–∞–±–∏–Ω–µ—Ç—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ Telegram
                                </p>
                            </div>
                            
                            <button class="btn btn-primary" onclick="app.startTelegramAuth()" style="width: 100%; padding: 16px; font-size: 1.1rem;">
                                <i class="fab fa-telegram-plane"></i>
                                –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Telegram
                            </button>
                            
                            <div style="margin-top: 25px; padding: 20px; background: var(--art-blue-light); border-radius: var(--radius);">
                                <h4 style="color: var(--graphite-dark); margin-bottom: 10px; font-size: 1rem;">
                                    <i class="fas fa-info-circle"></i> –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
                                </h4>
                                <p style="color: var(--graphite-medium); font-size: 0.9rem; line-height: 1.5;">
                                    –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–π–¥—ë—Ç –≤–∞—à–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç—ã –≤ amoCRM –ø–æ –Ω–æ–º–µ—Ä—É —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–∑ Telegram –∏ –ø–æ–∫–∞–∂–µ—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
        <div id="home-page" class="page">
            <div class="container">
                <!-- Hero —Å–µ–∫—Ü–∏—è -->
                <section class="hero">
                    <div class="hero-content">
                        <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —à–∫–æ–ª—É —Ä–∏—Å–æ–≤–∞–Ω–∏—è!</h1>
                        <div class="tagline">–†–∏—Å—É–µ–º –±—É–¥—É—â–µ–µ –≤–º–µ—Å—Ç–µ</div>
                        <p>–í–∞—à –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞–º–∏, –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏ —Å–≤—è–∑–∏ —Å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏</p>
                        <div class="hero-actions">
                            <button class="btn btn-primary" onclick="app.navigateToPage('schedule')">
                                <i class="fas fa-calendar-alt"></i>
                                –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
                            </button>
                            <button class="btn btn-secondary" onclick="app.navigateToPage('subscription')">
                                <i class="fas fa-ticket-alt"></i>
                                –ú–æ–π –∞–±–æ–Ω–µ–º–µ–Ω—Ç
                            </button>
                        </div>
                    </div>
                </section>
                
                <!-- –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø -->
                <section class="section">
                    <h2 class="section-title">–ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø</h2>
                    <div class="grid grid-3-main">
                        <div class="category-card-main-style" onclick="app.navigateToPage('schedule')">
                            <div class="category-image-main">
                                <i class="fas fa-calendar-alt" style="font-size: 2.5rem; color: white;"></i>
                            </div>
                            <h3>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π</h3>
                            <div class="category-description-main">
                                –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π –Ω–∞ –Ω–µ–¥–µ–ª—é, —É–∑–Ω–∞–π—Ç–µ –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –∏ –æ—Ç–º–µ–Ω–∞—Ö
                            </div>
                            <div class="category-card-footer">
                                <span class="category-name">–ê–∫—Ç—É–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ</span>
                                <span class="select-action">
                                    –ü–µ—Ä–µ–π—Ç–∏ <i class="fas fa-arrow-right"></i>
                                </span>
                            </div>
                        </div>
                        
                        <div class="category-card-main-style" onclick="app.navigateToPage('subscription')">
                            <div class="category-image-main">
                                <i class="fas fa-ticket-alt" style="font-size: 2.5rem; color: white;"></i>
                            </div>
                            <h3>–ú–æ–π –∞–±–æ–Ω–µ–º–µ–Ω—Ç</h3>
                            <div class="category-description-main">
                                –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Å—Ç–∞—Ç–æ–∫ –∑–∞–Ω—è—Ç–∏–π, —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞ –∏ –∏—Å—Ç–æ—Ä–∏—é –ø–æ—Å–µ—â–µ–Ω–∏–π
                            </div>
                            <div class="category-card-footer">
                                <span class="category-name">–î–µ—Ç–∞–ª–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞</span>
                                <span class="select-action">
                                    –ü–µ—Ä–µ–π—Ç–∏ <i class="fas fa-arrow-right"></i>
                                </span>
                            </div>
                        </div>
                        
                        <div class="category-card-main-style" onclick="app.navigateToPage('teachers')">
                            <div class="category-image-main">
                                <i class="fas fa-chalkboard-teacher" style="font-size: 2.5rem; color: white;"></i>
                            </div>
                            <h3>–ù–∞—à–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏</h3>
                            <div class="category-description-main">
                                –ü–æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –Ω–∞—à–∏–º–∏ —Ç–∞–ª–∞–Ω—Ç–ª–∏–≤—ã–º–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∏—Ö —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π
                            </div>
                            <div class="category-card-footer">
                                <span class="category-name">–ö–æ–º–∞–Ω–¥–∞ —à–∫–æ–ª—ã</span>
                                <span class="select-action">
                                    –ü–µ—Ä–µ–π—Ç–∏ <i class="fas fa-arrow-right"></i>
                                </span>
                            </div>
                        </div>
                    </div>
                </section>
                
                <!-- –ë–ª–∏–∂–∞–π—à–∏–µ –∑–∞–Ω—è—Ç–∏—è -->
                <section class="section">
                    <h2 class="section-title">–ë–ª–∏–∂–∞–π—à–∏–µ –∑–∞–Ω—è—Ç–∏—è</h2>
                    <div id="upcomingLessons" class="card">
                        <!-- –ó–∞–Ω—è—Ç–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        <div class="text-center">
                            <div class="spinner"></div>
                            <p class="mt-20">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è...</p>
                        </div>
                    </div>
                </section>
                
                <!-- –ù–æ–≤–æ—Å—Ç–∏ —à–∫–æ–ª—ã -->
                <section class="section">
                    <div class="d-flex justify-between align-center mb-20">
                        <h2 class="section-title">–ù–æ–≤–æ—Å—Ç–∏ —à–∫–æ–ª—ã</h2>
                        <button class="btn btn-secondary btn-sm" onclick="app.navigateToPage('news')">
                            –í—Å–µ –Ω–æ–≤–æ—Å—Ç–∏ <i class="fas fa-arrow-right"></i>
                        </button>
                    </div>
                    <div id="schoolNews" class="grid news-grid">
                        <!-- –ù–æ–≤–æ—Å—Ç–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                </section>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è -->
        <div id="schedule-page" class="page">
            <div class="container">
                <section class="section">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                        <button class="btn btn-secondary" onclick="app.navigateToPage('home')" style="padding: 8px 16px;">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h2 class="section-title">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π</h2>
                    </div>
                    
                    <div class="card">
                        <div style="margin-bottom: 20px;">
                            <div class="d-flex justify-between align-center mb-20">
                                <div>
                                    <h3 style="color: var(--graphite-dark); font-weight: 600; margin-bottom: 5px;">
                                        <i class="fas fa-school" style="color: var(--art-blue);"></i>
                                        <span id="branchName">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                                    </h3>
                                    <p style="color: var(--graphite-medium); font-size: 0.9rem;">
                                        –ù–µ–¥–µ–ª—è —Å <span id="scheduleWeekStart"></span> –ø–æ <span id="scheduleWeekEnd"></span>
                                    </p>
                                </div>
                                <button class="btn btn-primary" onclick="app.refreshSchedule()">
                                    <i class="fas fa-sync-alt"></i>
                                    –û–±–Ω–æ–≤–∏—Ç—å
                                </button>
                            </div>
                            
                            <div id="studentInfo" style="background: var(--art-blue-light); padding: 15px; border-radius: var(--radius); margin-bottom: 20px;">
                                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—á–µ–Ω–∏–∫–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            </div>
                        </div>
                        
                        <div id="scheduleContainer">
                            <!-- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            <div class="text-center">
                                <div class="spinner"></div>
                                <p class="mt-20">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è...</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞ -->
        <div id="subscription-page" class="page">
            <div class="container">
                <section class="section">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                        <button class="btn btn-secondary" onclick="app.navigateToPage('home')" style="padding: 8px 16px;">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h2 class="section-title">–ú–æ–π –∞–±–æ–Ω–µ–º–µ–Ω—Ç</h2>
                    </div>
                    
                    <div class="subscription-card-detailed">
                        <div id="subscriptionInfo">
                            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–±–æ–Ω–µ–º–µ–Ω—Ç–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            <div class="text-center">
                                <div class="spinner"></div>
                                <p class="mt-20">–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–±–æ–Ω–µ–º–µ–Ω—Ç–µ...</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card mt-20">
                        <h3 style="color: var(--graphite-dark); margin-bottom: 20px; font-size: 1.2rem; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-history"></i> –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–µ—â–µ–Ω–∏–π
                        </h3>
                        <div id="visitsHistory">
                            <!-- –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–µ—â–µ–Ω–∏–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            <div class="text-center">
                                <div class="spinner"></div>
                                <p class="mt-20">–ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ—Å–µ—â–µ–Ω–∏–π...</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-20">
                        <button class="btn btn-primary w-100" onclick="app.contactAdminForRenewal()">
                            <i class="fas fa-comments"></i>
                            –°–≤—è–∑–∞—Ç—å—Å—è —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º / –ø—Ä–æ–¥–ª–∏—Ç—å –∞–±–æ–Ω–µ–º–µ–Ω—Ç
                        </button>
                    </div>
                </section>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π -->
        <div id="teachers-page" class="page">
            <div class="container">
                <section class="section">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                        <button class="btn btn-secondary" onclick="app.navigateToPage('home')" style="padding: 8px 16px;">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h2 class="section-title">–ù–∞—à–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏</h2>
                    </div>
                    
                    <div class="card">
                        <p style="color: var(--graphite-medium); margin-bottom: 25px; font-size: 1rem;">
                            –ü–æ–∑–Ω–∞–∫–æ–º—å—Ç–µ—Å—å —Å –Ω–∞—à–∏–º–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–º–æ–≥—É—Ç –≤–∞–º —Ä–∞—Å–∫—Ä—ã—Ç—å —Ç–≤–æ—Ä—á–µ—Å–∫–∏–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª.
                        </p>
                        
                        <div id="teachersList" class="teachers-grid">
                            <!-- –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            <div class="text-center" style="grid-column: 1 / -1;">
                                <div class="spinner"></div>
                                <p class="mt-20">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π...</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ FAQ -->
        <div id="faq-page" class="page">
            <div class="container">
                <section class="section">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                        <button class="btn btn-secondary" onclick="app.navigateToPage('home')" style="padding: 8px 16px;">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h2 class="section-title">–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã</h2>
                    </div>
                    
                    <div class="card">
                        <div id="faqList" class="faq-list">
                            <!-- FAQ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            <div class="text-center">
                                <div class="spinner"></div>
                                <p class="mt-20">–ó–∞–≥—Ä—É–∑–∫–∞ —á–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤...</p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–æ–≤–æ—Å—Ç–µ–π -->
        <div id="news-page" class="page">
            <div class="container">
                <section class="section">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                        <button class="btn btn-secondary" onclick="app.navigateToPage('home')" style="padding: 8px 16px;">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h2 class="section-title">–ù–æ–≤–æ—Å—Ç–∏ —à–∫–æ–ª—ã</h2>
                    </div>
                    
                    <div id="newsList" class="grid news-grid">
                        <!-- –ù–æ–≤–æ—Å—Ç–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        <div class="text-center" style="grid-column: 1 / -1;">
                            <div class="spinner"></div>
                            <p class="mt-20">–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π...</p>
                        </div>
                    </div>
                </section>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
        <div id="profile-page" class="page">
            <div class="container">
                <section class="section">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                        <button class="btn btn-secondary" onclick="app.navigateToPage('home')" style="padding: 8px 16px;">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h2 class="section-title">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h2>
                    </div>
                    
                    <div class="compact-profile-header">
                        <div class="compact-profile-avatar" id="profileAvatar">
                            <img id="profileAvatarImg" alt="–ê–≤–∞—Ç–∞—Ä –ø—Ä–æ—Ñ–∏–ª—è" onerror="this.style.display='none'; this.parentElement.innerHTML=this.parentElement.textContent || '–ì';">
                        </div>
                        <div class="compact-profile-name" id="profileName">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                        <div class="compact-profile-email" id="profileEmail">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                        <div class="compact-profile-stats">
                            <div class="compact-stat-item">
                                <div class="compact-stat-value" id="statVisits">0</div>
                                <div class="compact-stat-label">–ü–æ—Å–µ—â–µ–Ω–∏–π</div>
                            </div>
                            <div class="compact-stat-item">
                                <div class="compact-stat-value" id="statRemaining">0</div>
                                <div class="compact-stat-label">–û—Å—Ç–∞–ª–æ—Å—å –∑–∞–Ω—è—Ç–∏–π</div>
                            </div>
                            <div class="compact-stat-item">
                                <div class="compact-stat-value" id="statBranch">-</div>
                                <div class="compact-stat-label">–§–∏–ª–∏–∞–ª</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <h3 style="color: var(--graphite-dark); margin-bottom: 20px; font-size: 1.2rem;">
                            <i class="fas fa-cog"></i> –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                        </h3>
                        
                        <div id="profileSettingsList">
                            <a href="#" class="nav-menu-item" onclick="app.navigateToPage('faq')">
                                <i class="fas fa-question-circle"></i>–ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã
                            </a>
                            <a href="#" class="nav-menu-item" onclick="app.navigateToPage('news')">
                                <i class="fas fa-newspaper"></i>–ù–æ–≤–æ—Å—Ç–∏ —à–∫–æ–ª—ã
                            </a>
                            <a href="#" class="nav-menu-item" onclick="app.contactAdmin()">
                                <i class="fas fa-headset"></i>–°–≤—è–∑–∞—Ç—å—Å—è —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
                            </a>
                            <div style="margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--art-blue-light);">
                                <button class="btn btn-secondary w-100" onclick="app.logout()">
                                    <i class="fas fa-sign-out-alt"></i>–í—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
                                </button>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
        
        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤) -->
        <div id="admin-page" class="page">
            <div class="container">
                <section class="section">
                    <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 20px;">
                        <button class="btn btn-secondary" onclick="app.navigateToPage('home')" style="padding: 8px 16px;">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h2 class="section-title">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å</h2>
                    </div>
                    
                    <div class="tabs">
                        <div class="tab active" onclick="app.showAdminTab('broadcast')">–†–∞—Å—Å—ã–ª–∫–∏</div>
                        <div class="tab" onclick="app.showAdminTab('teachers')">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏</div>
                        <div class="tab" onclick="app.showAdminTab('faq')">FAQ</div>
                        <div class="tab" onclick="app.showAdminTab('news')">–ù–æ–≤–æ—Å—Ç–∏</div>
                        <div class="tab" onclick="app.showAdminTab('schedule')">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</div>
                    </div>
                    
                    <div id="adminBroadcastTab" class="admin-section">
                        <div class="admin-section-title">
                            <i class="fas fa-bullhorn"></i> –°–µ—Ä–≤–∏—Å–Ω—ã–µ —Ä–∞—Å—Å—ã–ª–∫–∏
                        </div>
                        
                        <div class="filters-row">
                            <div class="filter-group">
                                <div class="filter-label">–§–∏–ª–∏–∞–ª</div>
                                <select class="filter-select" id="adminBranchFilter">
                                    <option value="">–í—Å–µ —Ñ–∏–ª–∏–∞–ª—ã</option>
                                    <option value="–°–≤–∏–±–ª–æ–≤–æ">–°–≤–∏–±–ª–æ–≤–æ</option>
                                    <option value="–ß–µ—Ä—Ç–∞–Ω–æ–≤–æ">–ß–µ—Ä—Ç–∞–Ω–æ–≤—Å–∫–∞—è</option>
                                </select>
                            </div>
                            
                            <div class="filter-group">
                                <div class="filter-label">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å</div>
                                <select class="filter-select" id="adminTeacherFilter">
                                    <option value="">–í—Å–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏</option>
                                    <!-- –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                                </select>
                            </div>
                            
                            <div class="filter-group">
                                <div class="filter-label">–î–µ–Ω—å –Ω–µ–¥–µ–ª–∏</div>
                                <select class="filter-select" id="adminDayFilter">
                                    <option value="">–í—Å–µ –¥–Ω–∏</option>
                                    <option value="–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫">–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫</option>
                                    <option value="–≤—Ç–æ—Ä–Ω–∏–∫">–í—Ç–æ—Ä–Ω–∏–∫</option>
                                    <option value="—Å—Ä–µ–¥–∞">–°—Ä–µ–¥–∞</option>
                                    <option value="—á–µ—Ç–≤–µ—Ä–≥">–ß–µ—Ç–≤–µ—Ä–≥</option>
                                    <option value="–ø—è—Ç–Ω–∏—Ü–∞">–ü—è—Ç–Ω–∏—Ü–∞</option>
                                    <option value="—Å—É–±–±–æ—Ç–∞">–°—É–±–±–æ—Ç–∞</option>
                                    <option value="–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ">–í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ</option>
                                </select>
                            </div>
                            
                            <div class="filter-group">
                                <div class="filter-label">–¢–∏–ø —Ä–∞—Å—Å—ã–ª–∫–∏</div>
                                <select class="filter-select" id="adminMessageType">
                                    <option value="cancellation">–û—Ç–º–µ–Ω–∞ –∑–∞–Ω—è—Ç–∏—è</option>
                                    <option value="replacement">–ó–∞–º–µ–Ω–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è</option>
                                    <option value="reschedule">–ü–µ—Ä–µ–Ω–æ—Å –∑–∞–Ω—è—Ç–∏—è</option>
                                    <option value="custom">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="message-template">
                            <textarea class="template-textarea" id="adminMessageTemplate" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è..."></textarea>
                        </div>
                        
                        <div class="recipients-count" id="recipientsCount">
                            <button class="btn btn-secondary" onclick="app.calculateRecipients()">
                                <i class="fas fa-calculator"></i> –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π
                            </button>
                        </div>
                        
                        <div class="broadcast-actions">
                            <button class="btn btn-secondary" onclick="app.sendTestBroadcast()">
                                <i class="fas fa-paper-plane"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç —Å–µ–±–µ
                            </button>
                            <button class="btn btn-primary" onclick="app.sendBroadcast()" id="sendBroadcastBtn" disabled>
                                <i class="fas fa-bullhorn"></i> –û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ–º –ø–æ–ª—É—á–∞—Ç–µ–ª—è–º
                            </button>
                        </div>
                        
                        <div class="mt-20">
                            <div class="admin-section-title">
                                <i class="fas fa-history"></i> –ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—Å—ã–ª–æ–∫
                            </div>
                            <div id="broadcastHistory">
                                <!-- –ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—Å—ã–ª–æ–∫ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                            </div>
                        </div>
                    </div>
                    
                    <div id="adminTeachersTab" class="admin-section" style="display: none;">
                        <div class="admin-section-title">
                            <i class="fas fa-chalkboard-teacher"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏
                        </div>
                        <!-- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º–∏ -->
                    </div>
                    
                    <div id="adminFaqTab" class="admin-section" style="display: none;">
                        <div class="admin-section-title">
                            <i class="fas fa-question-circle"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ FAQ
                        </div>
                        <!-- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è FAQ -->
                    </div>
                    
                    <div id="adminNewsTab" class="admin-section" style="display: none;">
                        <div class="admin-section-title">
                            <i class="fas fa-newspaper"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç—è–º–∏
                        </div>
                        <!-- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç—è–º–∏ -->
                    </div>
                    
                    <div id="adminScheduleTab" class="admin-section" style="display: none;">
                        <div class="admin-section-title">
                            <i class="fas fa-calendar-alt"></i> –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º
                        </div>
                        <!-- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º -->
                    </div>
                </section>
            </div>
        </div>
    </main>
    
    <!-- –ö–Ω–æ–ø–∫–∞ –±—ã—Å—Ç—Ä–æ–π —Å–≤—è–∑–∏ —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º -->
    <a href="#" class="quick-tasks-btn" onclick="app.contactAdmin()" id="floatingAdminBtn" style="display: none;">
        <i class="fas fa-headset"></i>
    </a>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
    <div class="modal" id="profileSelectModal">
        <div class="modal-content">
            <h3 style="color: var(--graphite-dark); margin-bottom: 20px; font-family: 'Playfair Display', serif;">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ—Ñ–∏–ª—å</h3>
            <p style="color: var(--graphite-medium); margin-bottom: 25px;">
                –ù–∞ –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –Ω–∞–π–¥–µ–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∞–±–æ–Ω–µ–º–µ–Ω—Ç–æ–≤. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –ø–æ–¥—Ö–æ–¥—è—â–∏–π –ø—Ä–æ—Ñ–∏–ª—å:
            </p>
            
            <div id="profilesList" style="margin-bottom: 25px;">
                <!-- –°–ø–∏—Å–æ–∫ –ø—Ä–æ—Ñ–∏–ª–µ–π –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
            
            <div class="d-flex gap-10">
                <button class="btn btn-secondary" style="flex: 1;" onclick="app.closeModal('profileSelectModal')">
                    –û—Ç–º–µ–Ω–∞
                </button>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–±–æ—Ä–∞ —Ñ–∏–ª–∏–∞–ª–∞ -->
    <div class="modal" id="branchSelectModal">
        <div class="modal-content">
            <h3 style="color: var(--graphite-dark); margin-bottom: 20px; font-family: 'Playfair Display', serif;">–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª–∏–∞–ª</h3>
            <p style="color: var(--graphite-medium); margin-bottom: 25px;">
                –î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª–∏–∞–ª —à–∫–æ–ª—ã:
            </p>
            
            <div style="display: flex; flex-direction: column; gap: 12px; margin-bottom: 25px;">
                <button class="btn btn-secondary" onclick="app.selectBranch('–°–≤–∏–±–ª–æ–≤–æ')" style="justify-content: flex-start; text-align: left;">
                    <i class="fas fa-school"></i>
                    <div>
                        <div style="font-weight: 600;">–§–∏–ª–∏–∞–ª –°–≤–∏–±–ª–æ–≤–æ</div>
                        <div style="font-size: 0.85rem; color: var(--graphite-medium);">—É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 1</div>
                    </div>
                </button>
                
                <button class="btn btn-secondary" onclick="app.selectBranch('–ß–µ—Ä—Ç–∞–Ω–æ–≤–æ')" style="justify-content: flex-start; text-align: left;">
                    <i class="fas fa-school"></i>
                    <div>
                        <div style="font-weight: 600;">–§–∏–ª–∏–∞–ª –ß–µ—Ä—Ç–∞–Ω–æ–≤—Å–∫–∞—è</div>
                        <div style="font-size: 0.85rem; color: var(--graphite-medium);">—É–ª. –ü—Ä–∏–º–µ—Ä–Ω–∞—è, –¥. 2</div>
                    </div>
                </button>
            </div>
            
            <button class="btn btn-secondary w-100" onclick="app.closeModal('branchSelectModal')">
                –ù–∞–∑–∞–¥
            </button>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–≤—è–∑–∏ —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º -->
    <div class="modal" id="contactAdminModal">
        <div class="modal-content">
            <h3 style="color: var(--graphite-dark); margin-bottom: 20px; font-family: 'Playfair Display', serif;">–°–≤—è–∑–∞—Ç—å—Å—è —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º</h3>
            
            <div style="margin-bottom: 20px;">
                <p style="color: var(--graphite-medium); margin-bottom: 15px;">
                    –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± —Å–≤—è–∑–∏ —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —Ñ–∏–ª–∏–∞–ª–∞ <strong id="contactBranchName"></strong>:
                </p>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 25px;">
                    <button class="btn btn-primary" onclick="app.openAdminChat()">
                        <i class="fas fa-comments"></i>
                        –ù–∞–ø–∏—Å–∞—Ç—å –≤ —á–∞—Ç
                    </button>
                    
                    <button class="btn btn-success" onclick="app.callAdmin()">
                        <i class="fas fa-phone"></i>
                        –ü–æ–∑–≤–æ–Ω–∏—Ç—å
                    </button>
                </div>
                
                <div id="prefilledMessage" style="background: var(--art-blue-light); padding: 15px; border-radius: var(--radius); margin-bottom: 20px;">
                    <div style="font-weight: 500; margin-bottom: 8px;">–ì–æ—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:</div>
                    <div style="font-size: 0.9rem; color: var(--graphite-dark);" id="autoMessage"></div>
                </div>
            </div>
            
            <button class="btn btn-secondary w-100" onclick="app.closeModal('contactAdminModal')">
                –ó–∞–∫—Ä—ã—Ç—å
            </button>
        </div>
    </div>

<script>
// –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
const app = {
    // ==================== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø ====================
    API_BASE_URL: 'https://–≤–∞—à-—Å–µ—Ä–≤–µ—Ä.com/api',
    TELEGRAM_BOT_TOKEN: '–í–ê–®_–¢–ï–õ–ï–ì–†–ê–ú_–ë–û–¢_–¢–û–ö–ï–ù',
    
    // ==================== –°–û–°–¢–û–Ø–ù–ò–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø ====================
    currentUser: null,
    currentToken: null,
    selectedProfile: null,
    selectedBranch: null,
    currentDeal: null,
    userProfiles: [],
    userDeals: [],
    scheduleData: [],
    subscriptionData: null,
    teachersData: [],
    faqData: [],
    newsData: [],
    
    // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
    init: function() {
        console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —à–∫–æ–ª—ã —Ä–∏—Å–æ–≤–∞–Ω–∏—è...');
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–ø—É—â–µ–Ω–æ –ª–∏ –≤ Telegram Web App
        if (window.Telegram && Telegram.WebApp) {
            this.setupTelegramWebApp();
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        this.loadSavedData();
        
        // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –Ω–∞—á–∞–ª—å–Ω—ã–π —ç–∫—Ä–∞–Ω
        this.determineInitialScreen();
        
        // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
        this.setupEventListeners();
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
        this.updateUserInterface();
        
        console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ');
    },
    
    // ==================== TELEGRAM –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø ====================
    setupTelegramWebApp: function() {
        const tg = window.Telegram.WebApp;
        
        // –†–∞—Å—à–∏—Ä—è–µ–º –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
        tg.expand();
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–º—É
        tg.setHeaderColor('#4A90E2');
        tg.setBackgroundColor('#F9F7F3');
        
        // –í–∫–ª—é—á–∞–µ–º –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥"
        tg.BackButton.show();
        tg.BackButton.onClick(() => {
            this.handleBackButton();
        });
        
        console.log('Telegram Web App –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
    },
    
    startTelegramAuth: function() {
        // –í Mini App –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ initData
        if (window.Telegram && Telegram.WebApp) {
            const tg = Telegram.WebApp;
            const initData = tg.initData;
            
            if (initData) {
                this.handleTelegramAuth(initData);
            } else {
                // –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –∫–æ–Ω—Ç–∞–∫—Ç
                tg.requestContact((contact) => {
                    if (contact) {
                        this.processTelegramContact(contact);
                    }
                });
            }
        } else {
            // –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±–µ–∑ Telegram
            this.mockTelegramAuth();
        }
    },
    
    handleTelegramAuth: function(initData) {
        try {
            // –ü–∞—Ä—Å–∏–º initData –∏–∑ Telegram
            const params = new URLSearchParams(initData);
            const userJson = params.get('user');
            
            if (userJson) {
                const telegramUser = JSON.parse(userJson);
                this.processTelegramUser(telegramUser);
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:', error);
            this.showNotification('–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Telegram', 'error');
        }
    },
    
    processTelegramUser: async function(telegramUser) {
        try {
            this.showLoading('–ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è...');
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ amoCRM
            const response = await fetch(this.API_BASE_URL + '/api/auth/telegram', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    telegram_id: telegramUser.id,
                    first_name: telegramUser.first_name,
                    last_name: telegramUser.last_name,
                    username: telegramUser.username,
                    phone: telegramUser.phone_number
                })
            });
            
            if (!response.ok) throw new Error('–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞');
            
            const result = await response.json();
            
            if (!result.success) {
                // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω, –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º —Ç–µ–ª–µ—Ñ–æ–Ω
                if (result.error === 'user_not_found') {
                    this.requestPhoneNumber();
                } else {
                    throw new Error(result.error);
                }
            } else {
                // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω
                this.handleUserFound(result.data);
            }
            
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram:', error);
            this.showNotification(error.message, 'error');
        } finally {
            this.hideLoading();
        }
    },
    
    processTelegramContact: async function(contact) {
        try {
            this.showLoading('–ü–æ–∏—Å–∫ –≤ amoCRM...');
            
            const response = await fetch(this.API_BASE_URL + '/api/auth/find-by-phone', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ phone: contact.phone_number })
            });
            
            if (!response.ok) throw new Error('–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞');
            
            const result = await response.json();
            
            if (!result.success) {
                throw new Error(result.error || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω');
            }
            
            this.handleUserFound(result.data);
            
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞:', error);
            this.showNotification(error.message, 'error');
        } finally {
            this.hideLoading();
        }
    },
    
    handleUserFound: function(data) {
        this.currentUser = data.user;
        this.userDeals = data.deals || [];
        this.userProfiles = data.profiles || [];
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ
        this.saveUserData();
        
        if (this.userProfiles.length === 0) {
            this.showNotification('–ê–±–æ–Ω–µ–º–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã', 'warning');
            this.navigateToPage('home');
        } else if (this.userProfiles.length === 1) {
            // –û–¥–∏–Ω –ø—Ä–æ—Ñ–∏–ª—å - –≤—ã–±–∏—Ä–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
            this.selectedProfile = this.userProfiles[0];
            this.selectedBranch = this.selectedProfile.branch;
            this.loadProfileData();
            this.showBranchSelectionIfNeeded();
        } else {
            // –ù–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ñ–∏–ª–µ–π - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±–æ—Ä
            this.showProfileSelection();
        }
        
        this.updateUserInterface();
    },
    
    // ==================== –í–´–ë–û–† –ü–†–û–§–ò–õ–Ø –ò –§–ò–õ–ò–ê–õ–ê ====================
    showProfileSelection: function() {
        const modal = document.getElementById('profileSelectModal');
        const list = document.getElementById('profilesList');
        
        if (!modal || !list) return;
        
        list.innerHTML = '';
        
        this.userProfiles.forEach((profile, index) => {
            const button = document.createElement('button');
            button.className = 'btn btn-secondary';
            button.style = 'justify-content: flex-start; text-align: left; margin-bottom: 10px;';
            button.onclick = () => this.selectProfile(profile);
            
            button.innerHTML = `
                <div style="display: flex; align-items: center; gap: 12px;">
                    <div style="width: 40px; height: 40px; background: ${profile.branch === '–°–≤–∏–±–ª–æ–≤–æ' ? 'var(--art-blue)' : 'var(--creative-purple)'}; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white;">
                        <i class="fas fa-user"></i>
                    </div>
                    <div>
                        <div style="font-weight: 600;">${profile.student_name || '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —É—á–µ–Ω–∏–∫'}</div>
                        <div style="font-size: 0.85rem; color: var(--graphite-medium);">
                            ${profile.branch} ‚Ä¢ ${profile.subscription_type || '–ê–±–æ–Ω–µ–º–µ–Ω—Ç'} ‚Ä¢ –û—Å—Ç–∞–ª–æ—Å—å: ${profile.remaining_classes || 0} –∑–∞–Ω—è—Ç–∏–π
                        </div>
                    </div>
                </div>
            `;
            
            list.appendChild(button);
        });
        
        modal.classList.add('active');
    },
    
    selectProfile: function(profile) {
        this.selectedProfile = profile;
        this.selectedBranch = profile.branch;
        this.closeModal('profileSelectModal');
        this.loadProfileData();
        this.showBranchSelectionIfNeeded();
    },
    
    showBranchSelectionIfNeeded: function() {
        if (!this.selectedBranch) {
            const modal = document.getElementById('branchSelectModal');
            if (modal) {
                modal.classList.add('active');
            }
        }
    },
    
    selectBranch: function(branch) {
        this.selectedBranch = branch;
        this.closeModal('branchSelectModal');
        this.loadProfileData();
        this.navigateToPage('home');
    },
    
    // ==================== –ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–• ====================
    loadProfileData: async function() {
        if (!this.selectedProfile || !this.selectedBranch) return;
        
        try {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
            await Promise.all([
                this.loadSchedule(),
                this.loadSubscription(),
                this.loadTeachers(),
                this.loadFAQ(),
                this.loadNews()
            ]);
            
            this.updateHomePage();
            
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è:', error);
            this.showNotification('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö', 'error');
        }
    },
    
    loadSchedule: async function() {
        try {
            const response = await this.fetchWithAuth(this.API_BASE_URL + '/api/schedule', {
                method: 'POST',
                body: JSON.stringify({
                    profile_id: this.selectedProfile.id,
                    branch: this.selectedBranch
                })
            });
            
            if (response.ok) {
                const result = await response.json();
                if (result.success) {
                    this.scheduleData = result.data.schedule || [];
                }
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è:', error);
            this.scheduleData = this.getMockSchedule();
        }
    },
    
    loadSubscription: async function() {
        try {
            const response = await this.fetchWithAuth(this.API_BASE_URL + '/api/subscription', {
                method: 'POST',
                body: JSON.stringify({
                    deal_id: this.selectedProfile.deal_id
                })
            });
            
            if (response.ok) {
                const result = await response.json();
                if (result.success) {
                    this.subscriptionData = result.data.subscription;
                }
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞:', error);
            this.subscriptionData = this.getMockSubscription();
        }
    },
    
    loadTeachers: async function() {
        try {
            const response = await this.fetchWithAuth(this.API_BASE_URL + '/api/teachers', {
                method: 'POST',
                body: JSON.stringify({
                    branch: this.selectedBranch
                })
            });
            
            if (response.ok) {
                const result = await response.json();
                if (result.success) {
                    this.teachersData = result.data.teachers || [];
                }
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π:', error);
            this.teachersData = this.getMockTeachers();
        }
    },
    
    loadFAQ: async function() {
        try {
            const response = await fetch(this.API_BASE_URL + '/api/faq');
            if (response.ok) {
                const result = await response.json();
                if (result.success) {
                    this.faqData = result.data.faq || [];
                }
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ FAQ:', error);
            this.faqData = this.getMockFAQ();
        }
    },
    
    loadNews: async function() {
        try {
            const response = await fetch(this.API_BASE_URL + '/api/news');
            if (response.ok) {
                const result = await response.json();
                if (result.success) {
                    this.newsData = result.data.news || [];
                }
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π:', error);
            this.newsData = this.getMockNews();
        }
    },
    
    // ==================== –û–¢–û–ë–†–ê–ñ–ï–ù–ò–ï –î–ê–ù–ù–´–• ====================
    updateHomePage: function() {
        this.updateUpcomingLessons();
        this.updateSchoolNews();
    },
    
    updateUpcomingLessons: function() {
        const container = document.getElementById('upcomingLessons');
        if (!container) return;
        
        if (!this.scheduleData || this.scheduleData.length === 0) {
            container.innerHTML = `
                <div style="text-align: center; padding: 30px;">
                    <i class="fas fa-calendar-times" style="font-size: 3rem; color: var(--graphite-light); margin-bottom: 16px;"></i>
                    <h4 style="color: var(--graphite-dark); margin-bottom: 10px;">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</h4>
                    <p style="color: var(--graphite-medium);">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ—Ñ–∏–ª—è</p>
                </div>
            `;
            return;
        }
        
        // –§–∏–ª—å—Ç—Ä—É–µ–º –±–ª–∏–∂–∞–π—à–∏–µ –∑–∞–Ω—è—Ç–∏—è (–±–ª–∏–∂–∞–π—à–∏–µ 3 –¥–Ω—è)
        const today = new Date();
        const threeDaysLater = new Date(today);
        threeDaysLater.setDate(today.getDate() + 3);
        
        const upcomingLessons = this.scheduleData.filter(lesson => {
            const lessonDate = new Date(lesson.date);
            return lessonDate >= today && lessonDate <= threeDaysLater;
        }).slice(0, 3); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ 3 –±–ª–∏–∂–∞–π—à–∏—Ö
        
        if (upcomingLessons.length === 0) {
            container.innerHTML = `
                <div style="text-align: center; padding: 30px;">
                    <i class="fas fa-calendar-check" style="font-size: 3rem; color: var(--creative-green); margin-bottom: 16px;"></i>
                    <h4 style="color: var(--graphite-dark); margin-bottom: 10px;">–ù–µ—Ç –±–ª–∏–∂–∞–π—à–∏—Ö –∑–∞–Ω—è—Ç–∏–π</h4>
                    <p style="color: var(--graphite-medium);">–ë–ª–∏–∂–∞–π—à–∏–µ –∑–∞–Ω—è—Ç–∏—è –ø–æ—è–≤—è—Ç—Å—è –ø–æ–∑–∂–µ</p>
                </div>
            `;
            return;
        }
        
        let html = '<div style="display: flex; flex-direction: column; gap: 16px;">';
        
        upcomingLessons.forEach(lesson => {
            const lessonDate = new Date(lesson.date);
            const timeString = lesson.start_time ? lesson.start_time.substring(0, 5) : '';
            
            html += `
                <div class="schedule-lesson">
                    <div class="lesson-header">
                        <div class="lesson-time">${timeString}</div>
                        <span class="lesson-status ${lesson.status || 'normal'}">
                            ${this.getLessonStatusText(lesson.status)}
                        </span>
                    </div>
                    <div class="lesson-details">
                        <div style="font-weight: 500; margin-bottom: 4px;">${lesson.title || '–ó–∞–Ω—è—Ç–∏–µ –ø–æ —Ä–∏—Å–æ–≤–∞–Ω–∏—é'}</div>
                        <div class="lesson-teacher">
                            <i class="fas fa-chalkboard-teacher" style="color: var(--creative-purple);"></i>
                            ${lesson.teacher_name || '–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å'}
                        </div>
                    </div>
                </div>
            `;
        });
        
        html += '</div>';
        container.innerHTML = html;
    },
    
    updateSchoolNews: function() {
        const container = document.getElementById('schoolNews');
        if (!container) return;
        
        if (!this.newsData || this.newsData.length === 0) {
            container.innerHTML = `
                <div class="news-card" style="grid-column: 1 / -1; text-align: center; padding: 30px;">
                    <i class="fas fa-newspaper" style="font-size: 3rem; color: var(--graphite-light); margin-bottom: 16px;"></i>
                    <h4 style="color: var(--graphite-dark); margin-bottom: 10px;">–ù–æ–≤–æ—Å—Ç–µ–π –ø–æ–∫–∞ –Ω–µ—Ç</h4>
                    <p style="color: var(--graphite-medium);">–°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏!</p>
                </div>
            `;
            return;
        }
        
        container.innerHTML = '';
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –Ω–æ–≤–æ—Å—Ç–∏
        this.newsData.slice(0, 3).forEach(news => {
            const newsDate = new Date(news.date);
            const card = document.createElement('div');
            card.className = 'news-card';
            card.onclick = () => this.showNewsDetail(news);
            
            card.innerHTML = `
                <div class="news-date">
                    <i class="far fa-calendar"></i>
                    ${newsDate.toLocaleDateString('ru-RU')}
                </div>
                <div class="news-title">${news.title}</div>
                <div class="news-preview">${news.preview || news.content.substring(0, 150)}...</div>
            `;
            
            container.appendChild(card);
        });
    },
    
    renderSchedulePage: function() {
        const branchName = document.getElementById('branchName');
        const scheduleWeekStart = document.getElementById('scheduleWeekStart');
        const scheduleWeekEnd = document.getElementById('scheduleWeekEnd');
        const studentInfo = document.getElementById('studentInfo');
        const scheduleContainer = document.getElementById('scheduleContainer');
        
        if (!branchName || !scheduleContainer) return;
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏
        if (branchName) branchName.textContent = this.selectedBranch || '–ù–µ –≤—ã–±—Ä–∞–Ω';
        
        // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–µ–∫—É—â—É—é –Ω–µ–¥–µ–ª—é
        const now = new Date();
        const startOfWeek = new Date(now);
        startOfWeek.setDate(now.getDate() - now.getDay() + 1); // –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫
        const endOfWeek = new Date(startOfWeek);
        endOfWeek.setDate(startOfWeek.getDate() + 6); // –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ
        
        if (scheduleWeekStart) {
            scheduleWeekStart.textContent = startOfWeek.toLocaleDateString('ru-RU');
        }
        if (scheduleWeekEnd) {
            scheduleWeekEnd.textContent = endOfWeek.toLocaleDateString('ru-RU');
        }
        
        // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± —É—á–µ–Ω–∏–∫–µ
        if (studentInfo && this.selectedProfile) {
            studentInfo.innerHTML = `
                <div style="display: flex; justify-content: space-between; align-items: center;">
                    <div>
                        <div style="font-weight: 600; color: var(--graphite-dark); margin-bottom: 4px;">
                            ${this.selectedProfile.student_name}
                        </div>
                        <div style="font-size: 0.9rem; color: var(--graphite-medium);">
                            ${this.selectedProfile.subscription_type || '–ê–±–æ–Ω–µ–º–µ–Ω—Ç'} ‚Ä¢ 
                            –û—Å—Ç–∞–ª–æ—Å—å –∑–∞–Ω—è—Ç–∏–π: <strong>${this.selectedProfile.remaining_classes || 0}</strong>
                        </div>
                    </div>
                    <div style="font-size: 0.85rem; color: var(--graphite-medium);">
                        –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å: ${this.selectedProfile.teacher_name || '–ù–µ –Ω–∞–∑–Ω–∞—á–µ–Ω'}
                    </div>
                </div>
            `;
        }
        
        // –†–µ–Ω–¥–µ—Ä–∏–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
        if (!this.scheduleData || this.scheduleData.length === 0) {
            scheduleContainer.innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <i class="fas fa-calendar-times" style="font-size: 3rem; color: var(--graphite-light); margin-bottom: 16px;"></i>
                    <h4 style="color: var(--graphite-dark); margin-bottom: 10px;">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç</h4>
                    <p style="color: var(--graphite-medium); margin-bottom: 20px;">
                        –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Ñ–∏–ª–∏–∞–ª–∞ –ø–æ–∫–∞ –Ω–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ
                    </p>
                    <button class="btn btn-primary" onclick="app.refreshSchedule()">
                        <i class="fas fa-sync-alt"></i> –û–±–Ω–æ–≤–∏—Ç—å
                    </button>
                </div>
            `;
            return;
        }
        
        // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –∑–∞–Ω—è—Ç–∏—è –ø–æ –¥–Ω—è–º –Ω–µ–¥–µ–ª–∏
        const scheduleByDay = {};
        const daysOfWeek = ['–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫', '–≤—Ç–æ—Ä–Ω–∏–∫', '—Å—Ä–µ–¥–∞', '—á–µ—Ç–≤–µ—Ä–≥', '–ø—è—Ç–Ω–∏—Ü–∞', '—Å—É–±–±–æ—Ç–∞', '–≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ'];
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –ø—É—Å—Ç—ã–µ –º–∞—Å—Å–∏–≤—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–Ω—è
        daysOfWeek.forEach(day => {
            scheduleByDay[day] = [];
        });
        
        // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
        this.scheduleData.forEach(lesson => {
            if (lesson.day_of_week && scheduleByDay[lesson.day_of_week]) {
                scheduleByDay[lesson.day_of_week].push(lesson);
            }
        });
        
        // –°–æ—Ä—Ç–∏—Ä—É–µ–º –∑–∞–Ω—è—Ç–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –≤ –∫–∞–∂–¥–æ–º –¥–Ω–µ
        daysOfWeek.forEach(day => {
            scheduleByDay[day].sort((a, b) => {
                return (a.start_time || '').localeCompare(b.start_time || '');
            });
        });
        
        // –†–µ–Ω–¥–µ—Ä–∏–º —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
        let scheduleHtml = '';
        
        daysOfWeek.forEach(day => {
            const lessons = scheduleByDay[day];
            if (lessons.length === 0) return;
            
            scheduleHtml += `
                <div class="schedule-day">
                    <div class="schedule-day-header">
                        <div class="schedule-day-title">${this.capitalizeFirstLetter(day)}</div>
                    </div>
            `;
            
            lessons.forEach(lesson => {
                const timeString = lesson.start_time ? lesson.start_time.substring(0, 5) : '';
                const endTimeString = lesson.end_time ? lesson.end_time.substring(0, 5) : '';
                
                scheduleHtml += `
                    <div class="schedule-lesson">
                        <div class="lesson-header">
                            <div class="lesson-time">${timeString}${endTimeString ? ` - ${endTimeString}` : ''}</div>
                            <span class="lesson-status ${lesson.status || 'normal'}">
                                ${this.getLessonStatusText(lesson.status)}
                            </span>
                        </div>
                        <div class="lesson-details">
                            <div style="font-weight: 500; margin-bottom: 4px;">${lesson.title || '–ó–∞–Ω—è—Ç–∏–µ –ø–æ —Ä–∏—Å–æ–≤–∞–Ω–∏—é'}</div>
                            <div class="lesson-teacher">
                                <i class="fas fa-chalkboard-teacher" style="color: var(--creative-purple);"></i>
                                ${lesson.teacher_name || '–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å'}
                            </div>
                            ${lesson.status_note ? `
                                <div style="margin-top: 8px; padding: 8px; background: var(--creative-yellow-light); border-radius: var(--radius-sm); font-size: 0.85rem; color: #FF8F00;">
                                    <i class="fas fa-info-circle"></i> ${lesson.status_note}
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            });
            
            scheduleHtml += '</div>';
        });
        
        scheduleContainer.innerHTML = scheduleHtml || `
            <div style="text-align: center; padding: 40px;">
                <i class="fas fa-calendar-check" style="font-size: 3rem; color: var(--creative-green); margin-bottom: 16px;"></i>
                <h4 style="color: var(--graphite-dark); margin-bottom: 10px;">–ù–µ—Ç –∑–∞–Ω—è—Ç–∏–π –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ</h4>
                <p style="color: var(--graphite-medium);">–ó–∞–Ω—è—Ç–∏—è –ø–æ—è–≤—è—Ç—Å—è –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏ –ø–æ–∑–∂–µ</p>
            </div>
        `;
    },
    
    renderSubscriptionPage: function() {
        const subscriptionInfo = document.getElementById('subscriptionInfo');
        const visitsHistory = document.getElementById('visitsHistory');
        
        if (!subscriptionInfo || !visitsHistory) return;
        
        if (!this.subscriptionData) {
            subscriptionInfo.innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <div class="spinner"></div>
                    <p class="mt-20">–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞–±–æ–Ω–µ–º–µ–Ω—Ç–µ...</p>
                </div>
            `;
            visitsHistory.innerHTML = '';
            return;
        }
        
        const sub = this.subscriptionData;
        const totalClasses = sub.total_classes || 0;
        const remainingClasses = sub.remaining_classes || 0;
        const usedClasses = totalClasses - remainingClasses;
        const progressPercentage = totalClasses > 0 ? (usedClasses / totalClasses) * 100 : 0;
        
        // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–±–æ–Ω–µ–º–µ–Ω—Ç–µ
        subscriptionInfo.innerHTML = `
            <div class="subscription-header">
                <div>
                    <h3>${sub.subscription_type || '–ê–±–æ–Ω–µ–º–µ–Ω—Ç'}</h3>
                    <p style="color: var(--graphite-medium); font-size: 0.95rem;">
                        –§–∏–ª–∏–∞–ª: ${sub.branch || this.selectedBranch || '–ù–µ —É–∫–∞–∑–∞–Ω'}
                    </p>
                </div>
                <span style="background: ${remainingClasses > 0 ? 'var(--creative-green-light)' : 'var(--creative-red-light)'}; 
                      color: ${remainingClasses > 0 ? 'var(--creative-green)' : 'var(--creative-red)'}; 
                      padding: 6px 16px; border-radius: 20px; font-size: 0.9rem; font-weight: 600;">
                    ${remainingClasses > 0 ? '–ê–∫—Ç–∏–≤–µ–Ω' : '–ó–∞–≤–µ—Ä—à–µ–Ω'}
                </span>
            </div>
            
            <div class="subscription-stats">
                <div class="subscription-stat">
                    <div class="subscription-stat-value">${totalClasses}</div>
                    <div class="subscription-stat-label">–í—Å–µ–≥–æ –∑–∞–Ω—è—Ç–∏–π</div>
                </div>
                
                <div class="subscription-stat">
                    <div class="subscription-stat-value">${remainingClasses}</div>
                    <div class="subscription-stat-label">–û—Å—Ç–∞–ª–æ—Å—å –∑–∞–Ω—è—Ç–∏–π</div>
                </div>
                
                <div class="subscription-stat">
                    <div class="subscription-stat-value">${usedClasses}</div>
                    <div class="subscription-stat-label">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ</div>
                </div>
                
                <div class="subscription-stat">
                    <div class="subscription-stat-value">${sub.expiration_date ? new Date(sub.expiration_date).toLocaleDateString('ru-RU') : '–ù–µ —É–∫–∞–∑–∞–Ω'}</div>
                    <div class="subscription-stat-label">–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è</div>
                </div>
            </div>
            
            <div style="margin-top: 20px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 8px; font-size: 0.9rem;">
                    <span>–ü—Ä–æ–≥—Ä–µ—Å—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è</span>
                    <span>${usedClasses}/${totalClasses} (${progressPercentage.toFixed(0)}%)</span>
                </div>
                <div style="height: 10px; background: var(--art-blue-light); border-radius: 5px; overflow: hidden;">
                    <div style="width: ${progressPercentage}%; height: 100%; background: var(--creative-green); transition: width 0.5s ease;"></div>
                </div>
            </div>
        `;
        
        // –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–µ—â–µ–Ω–∏–π
        if (!sub.visits || sub.visits.length === 0) {
            visitsHistory.innerHTML = `
                <div style="text-align: center; padding: 30px; color: var(--graphite-medium);">
                    <i class="fas fa-history" style="font-size: 2rem; opacity: 0.3; margin-bottom: 12px;"></i>
                    <p>–ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–µ—â–µ–Ω–∏–π –ø—É—Å—Ç–∞</p>
                </div>
            `;
            return;
        }
        
        let visitsHtml = '<div style="max-height: 300px; overflow-y: auto;">';
        
        sub.visits.forEach(visit => {
            const visitDate = new Date(visit.date);
            visitsHtml += `
                <div class="visit-item">
                    <div class="visit-date">
                        <i class="far fa-calendar"></i>
                        ${visitDate.toLocaleDateString('ru-RU')} ${visit.time || ''}
                    </div>
                    <span class="visit-status ${visit.status || 'attended'}">
                        ${visit.status === 'attended' ? '–ü–æ—Å–µ—â–µ–Ω–æ' : '–ü—Ä–æ–ø—É—â–µ–Ω–æ'}
                    </span>
                </div>
            `;
        });
        
        visitsHtml += '</div>';
        visitsHistory.innerHTML = visitsHtml;
    },
    
    renderTeachersPage: function() {
        const teachersList = document.getElementById('teachersList');
        if (!teachersList) return;
        
        if (!this.teachersData || this.teachersData.length === 0) {
            teachersList.innerHTML = `
                <div class="text-center" style="grid-column: 1 / -1; padding: 40px;">
                    <i class="fas fa-chalkboard-teacher" style="font-size: 3rem; color: var(--graphite-light); margin-bottom: 16px;"></i>
                    <h4 style="color: var(--graphite-dark); margin-bottom: 10px;">–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</h4>
                    <p style="color: var(--graphite-medium);">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è—Ö –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞</p>
                </div>
            `;
            return;
        }
        
        teachersList.innerHTML = '';
        
        // –§–∏–ª—å—Ç—Ä—É–µ–º –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π –ø–æ —Ñ–∏–ª–∏–∞–ª—É, –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω
        const filteredTeachers = this.selectedBranch ? 
            this.teachersData.filter(teacher => teacher.branch === this.selectedBranch || !teacher.branch) :
            this.teachersData;
        
        filteredTeachers.forEach(teacher => {
            const card = document.createElement('div');
            card.className = 'teacher-card';
            
            card.innerHTML = `
                <div class="teacher-avatar">
                    ${teacher.avatar_url ? 
                        `<img src="${teacher.avatar_url}" alt="${teacher.name}" onerror="this.onerror=null; this.src=''; this.parentElement.innerHTML='<i class=\\'fas fa-user\\'></i>';" />` : 
                        `<i class="fas fa-user"></i>`
                    }
                </div>
                <div class="teacher-name">${teacher.name}</div>
                <div class="teacher-qualification">${teacher.qualification || '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å —Ä–∏—Å–æ–≤–∞–Ω–∏—è'}</div>
                <div style="margin-top: 15px;">
                    <span class="teacher-specialization">
                        <i class="fas fa-paint-brush"></i>
                        ${teacher.specialization || '–û–±—â–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞'}
                    </span>
                </div>
                ${teacher.branch ? `
                    <div style="margin-top: 12px; font-size: 0.85rem; color: var(--graphite-medium);">
                        <i class="fas fa-school"></i> ${teacher.branch}
                    </div>
                ` : ''}
            `;
            
            teachersList.appendChild(card);
        });
    },
    
    renderFAQPage: function() {
        const faqList = document.getElementById('faqList');
        if (!faqList) return;
        
        if (!this.faqData || this.faqData.length === 0) {
            faqList.innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <i class="fas fa-question-circle" style="font-size: 3rem; color: var(--graphite-light); margin-bottom: 16px;"></i>
                    <h4 style="color: var(--graphite-dark); margin-bottom: 10px;">FAQ –Ω–µ –Ω–∞–π–¥–µ–Ω</h4>
                    <p style="color: var(--graphite-medium);">–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã</p>
                </div>
            `;
            return;
        }
        
        faqList.innerHTML = '';
        
        this.faqData.forEach((item, index) => {
            const faqItem = document.createElement('div');
            faqItem.className = 'faq-item';
            
            faqItem.innerHTML = `
                <div class="faq-question" onclick="app.toggleFAQ(${index})">
                    <span>${item.question}</span>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="faq-answer">
                    ${item.answer}
                </div>
            `;
            
            faqList.appendChild(faqItem);
        });
    },
    
    renderNewsPage: function() {
        const newsList = document.getElementById('newsList');
        if (!newsList) return;
        
        if (!this.newsData || this.newsData.length === 0) {
            newsList.innerHTML = `
                <div class="news-card" style="grid-column: 1 / -1; text-align: center; padding: 40px;">
                    <i class="fas fa-newspaper" style="font-size: 3rem; color: var(--graphite-light); margin-bottom: 16px;"></i>
                    <h4 style="color: var(--graphite-dark); margin-bottom: 10px;">–ù–æ–≤–æ—Å—Ç–µ–π –ø–æ–∫–∞ –Ω–µ—Ç</h4>
                    <p style="color: var(--graphite-medium);">–°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏!</p>
                </div>
            `;
            return;
        }
        
        newsList.innerHTML = '';
        
        this.newsData.forEach(news => {
            const newsDate = new Date(news.date);
            const card = document.createElement('div');
            card.className = 'news-card';
            card.onclick = () => this.showNewsDetail(news);
            
            card.innerHTML = `
                <div class="news-date">
                    <i class="far fa-calendar"></i>
                    ${newsDate.toLocaleDateString('ru-RU')}
                </div>
                <div class="news-title">${news.title}</div>
                <div class="news-preview">${news.preview || news.content.substring(0, 150)}...</div>
                ${news.image_url ? `
                    <div style="margin-top: 15px; border-radius: var(--radius); overflow: hidden;">
                        <img src="${news.image_url}" alt="${news.title}" style="width: 100%; height: 150px; object-fit: cover;" />
                    </div>
                ` : ''}
            `;
            
            newsList.appendChild(card);
        });
    },
    
    // ==================== –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ ====================
    showAdminTab: function(tabName) {
        // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
        document.querySelectorAll('.admin-section').forEach(section => {
            section.style.display = 'none';
        });
        
        // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —É –≤—Å–µ—Ö —Ç–∞–±–æ–≤
        document.querySelectorAll('.tab').forEach(tab => {
            tab.classList.remove('active');
        });
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω—É–∂–Ω—É—é –≤–∫–ª–∞–¥–∫—É
        const tabElement = document.getElementById('admin' + this.capitalizeFirstLetter(tabName) + 'Tab');
        if (tabElement) {
            tabElement.style.display = 'block';
        }
        
        // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ —Ç–∞–±—É
        document.querySelectorAll('.tab').forEach(tab => {
            if (tab.textContent.toLowerCase().includes(tabName)) {
                tab.classList.add('active');
            }
        });
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∫–ª–∞–¥–∫–∏
        switch(tabName) {
            case 'broadcast':
                this.loadBroadcastData();
                break;
            case 'teachers':
                this.loadAdminTeachers();
                break;
            case 'faq':
                this.loadAdminFAQ();
                break;
            case 'news':
                this.loadAdminNews();
                break;
            case 'schedule':
                this.loadAdminSchedule();
                break;
        }
    },
    
    loadBroadcastData: function() {
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞
        this.loadTeachersForFilter();
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é —Ä–∞—Å—Å—ã–ª–æ–∫
        this.loadBroadcastHistory();
    },
    
    loadTeachersForFilter: async function() {
        try {
            const response = await this.fetchWithAuth(this.API_BASE_URL + '/api/admin/teachers');
            if (response.ok) {
                const result = await response.json();
                if (result.success) {
                    const select = document.getElementById('adminTeacherFilter');
                    if (select) {
                        // –û—á–∏—â–∞–µ–º —Ç–µ–∫—É—â–∏–µ –æ–ø—Ü–∏–∏ (–∫—Ä–æ–º–µ –ø–µ—Ä–≤–æ–π)
                        while (select.options.length > 1) {
                            select.remove(1);
                        }
                        
                        // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π
                        result.data.teachers.forEach(teacher => {
                            const option = document.createElement('option');
                            option.value = teacher.id;
                            option.textContent = teacher.name;
                            select.appendChild(option);
                        });
                    }
                }
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞:', error);
        }
    },
    
    loadBroadcastHistory: async function() {
        try {
            const response = await this.fetchWithAuth(this.API_BASE_URL + '/api/admin/broadcast-history');
            if (response.ok) {
                const result = await response.json();
                if (result.success) {
                    this.renderBroadcastHistory(result.data.history);
                }
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏–∏ —Ä–∞—Å—Å—ã–ª–æ–∫:', error);
        }
    },
    
    renderBroadcastHistory: function(history) {
        const container = document.getElementById('broadcastHistory');
        if (!container) return;
        
        if (!history || history.length === 0) {
            container.innerHTML = '<div style="text-align: center; padding: 20px; color: var(--graphite-medium);">–ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—Å—ã–ª–æ–∫ –ø—É—Å—Ç–∞</div>';
            return;
        }
        
        let html = '';
        
        history.slice(0, 10).forEach(entry => { // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 –∑–∞–ø–∏—Å–µ–π
            const date = new Date(entry.created_at);
            html += `
                <div class="log-entry">
                    <div class="log-date">${date.toLocaleDateString('ru-RU')} ${date.toLocaleTimeString('ru-RU', {hour: '2-digit', minute:'2-digit'})}</div>
                    <div class="log-action">${entry.type} ‚Ä¢ ${entry.recipients_count} –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π</div>
                    <div class="log-details">${entry.message.substring(0, 100)}...</div>
                </div>
            `;
        });
        
        container.innerHTML = html;
    },
    
    calculateRecipients: async function() {
        try {
            const branch = document.getElementById('adminBranchFilter').value;
            const teacherId = document.getElementById('adminTeacherFilter').value;
            const day = document.getElementById('adminDayFilter').value;
            
            const response = await this.fetchWithAuth(this.API_BASE_URL + '/api/admin/calculate-recipients', {
                method: 'POST',
                body: JSON.stringify({
                    branch: branch || null,
                    teacher_id: teacherId || null,
                    day_of_week: day || null
                })
            });
            
            if (response.ok) {
                const result = await response.json();
                if (result.success) {
                    const container = document.getElementById('recipientsCount');
                    const sendBtn = document.getElementById('sendBroadcastBtn');
                    
                    if (container) {
                        container.innerHTML = `
                            <strong>${result.data.count}</strong> –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π –Ω–∞–π–¥–µ–Ω–æ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º —Ñ–∏–ª—å—Ç—Ä–∞–º
                        `;
                    }
                    
                    if (sendBtn) {
                        sendBtn.disabled = result.data.count === 0;
                    }
                }
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π:', error);
            this.showNotification('–û—à–∏–±–∫–∞ —Ä–∞—Å—á–µ—Ç–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π', 'error');
        }
    },
    
    sendTestBroadcast: async function() {
        const message = document.getElementById('adminMessageTemplate').value;
        const messageType = document.getElementById('adminMessageType').value;
        
        if (!message.trim()) {
            this.showNotification('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è', 'error');
            return;
        }
        
        try {
            this.showLoading('–û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è...');
            
            const response = await this.fetchWithAuth(this.API_BASE_URL + '/api/admin/send-test-broadcast', {
                method: 'POST',
                body: JSON.stringify({
                    message: message,
                    type: messageType
                })
            });
            
            if (response.ok) {
                const result = await response.json();
                if (result.success) {
                    this.showNotification('–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É', 'success');
                }
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è:', error);
            this.showNotification('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è', 'error');
        } finally {
            this.hideLoading();
        }
    },
    
    sendBroadcast: async function() {
        if (!confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É –≤—Å–µ–º –ø–æ–ª—É—á–∞—Ç–µ–ª—è–º?')) return;
        
        const branch = document.getElementById('adminBranchFilter').value;
        const teacherId = document.getElementById('adminTeacherFilter').value;
        const day = document.getElementById('adminDayFilter').value;
        const message = document.getElementById('adminMessageTemplate').value;
        const messageType = document.getElementById('adminMessageType').value;
        
        if (!message.trim()) {
            this.showNotification('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è', 'error');
            return;
        }
        
        try {
            this.showLoading('–û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–∞—Å—Å—ã–ª–∫–∏...');
            
            const response = await this.fetchWithAuth(this.API_BASE_URL + '/api/admin/send-broadcast', {
                method: 'POST',
                body: JSON.stringify({
                    branch: branch || null,
                    teacher_id: teacherId || null,
                    day_of_week: day || null,
                    message: message,
                    type: messageType
                })
            });
            
            if (response.ok) {
                const result = await response.json();
                if (result.success) {
                    this.showNotification(`–†–∞—Å—Å—ã–ª–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ ${result.data.sent_count} –ø–æ–ª—É—á–∞—Ç–µ–ª—è–º`, 'success');
                    this.loadBroadcastHistory();
                    
                    // –û—á–∏—â–∞–µ–º —Ñ–æ—Ä–º—É
                    document.getElementById('adminMessageTemplate').value = '';
                }
            }
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–∞—Å—Å—ã–ª–∫–∏:', error);
            this.showNotification('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ä–∞—Å—Å—ã–ª–∫–∏', 'error');
        } finally {
            this.hideLoading();
        }
    },
    
    // ==================== –°–í–Ø–ó–¨ –° –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–û–ú ====================
    contactAdmin: function() {
        if (!this.selectedBranch) {
            this.showNotification('–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∏–ª–∏–∞–ª', 'warning');
            this.showBranchSelectionIfNeeded();
            return;
        }
        
        const modal = document.getElementById('contactAdminModal');
        const branchName = document.getElementById('contactBranchName');
        const autoMessage = document.getElementById('autoMessage');
        
        if (!modal || !branchName || !autoMessage) return;
        
        branchName.textContent = this.selectedBranch;
        
        // –§–æ—Ä–º–∏—Ä—É–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        let message = '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –£ –º–µ–Ω—è –≤–æ–ø—Ä–æ—Å –ø–æ –∞–±–æ–Ω–µ–º–µ–Ω—Ç—É. ';
        
        if (this.selectedProfile) {
            message += `–£—á–µ–Ω–∏–∫: ${this.selectedProfile.student_name}. `;
        }
        
        if (this.selectedBranch) {
            message += `–§–∏–ª–∏–∞–ª: ${this.selectedBranch}. `;
        }
        
        autoMessage.textContent = message;
        
        modal.classList.add('active');
    },
    
    contactAdminForRenewal: function() {
        this.contactAdmin();
        
        // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–¥–ª–µ–Ω–∏–∏ –≤ —Å–æ–æ–±—â–µ–Ω–∏–µ
        setTimeout(() => {
            const autoMessage = document.getElementById('autoMessage');
            if (autoMessage) {
                const currentMessage = autoMessage.textContent;
                autoMessage.textContent = currentMessage + ' –ü—Ä–æ—à—É –ø–æ–º–æ—á—å —Å –ø—Ä–æ–¥–ª–µ–Ω–∏–µ–º –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞.';
            }
        }, 100);
    },
    
    openAdminChat: function() {
        // –í Telegram Mini App –æ—Ç–∫—Ä—ã–≤–∞–µ–º —á–∞—Ç —Å –±–æ—Ç–æ–º
        if (window.Telegram && Telegram.WebApp) {
            const tg = Telegram.WebApp;
            
            // –û—Ç–∫—Ä—ã–≤–∞–µ–º —á–∞—Ç —Å –±–æ—Ç–æ–º
            tg.openTelegramLink('https://t.me/your_bot_username');
            
            // –ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –±–æ—Ç–∞
            const message = document.getElementById('autoMessage').textContent;
            tg.sendData(JSON.stringify({
                action: 'contact_admin',
                message: message,
                branch: this.selectedBranch,
                student_name: this.selectedProfile ? this.selectedProfile.student_name : ''
            }));
        } else {
            // –î–ª—è –≤–µ–±-–≤–µ—Ä—Å–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
            this.showNotification('–ß–∞—Ç —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –≤ Telegram', 'info');
        }
        
        this.closeModal('contactAdminModal');
    },
    
    callAdmin: function() {
        // –ù–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ –¥–ª—è —Ñ–∏–ª–∏–∞–ª–æ–≤
        const phoneNumbers = {
            '–°–≤–∏–±–ª–æ–≤–æ': '+7 (XXX) XXX-XX-XX',
            '–ß–µ—Ä—Ç–∞–Ω–æ–≤–æ': '+7 (XXX) XXX-XX-XX'
        };
        
        const phoneNumber = phoneNumbers[this.selectedBranch] || '+7 (XXX) XXX-XX-XX';
        
        if (confirm(`–ü–æ–∑–≤–æ–Ω–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Ñ–∏–ª–∏–∞–ª–∞ ${this.selectedBranch}?\n${phoneNumber}`)) {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç window.location.href = 'tel:' + phoneNumber;
            this.showNotification(`–¢–µ–ª–µ—Ñ–æ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞: ${phoneNumber}`, 'info');
        }
        
        this.closeModal('contactAdminModal');
    },
    
    // ==================== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò ====================
    getLessonStatusText: function(status) {
        const statusMap = {
            'normal': '–ü–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é',
            'cancelled': '–û—Ç–º–µ–Ω–µ–Ω–æ',
            'changed': '–ó–∞–º–µ–Ω–∞',
            'rescheduled': '–ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–æ'
        };
        return statusMap[status] || '–ü–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é';
    },
    
    capitalizeFirstLetter: function(string) {
        return string.charAt(0).toUpperCase() + string.slice(1);
    },
    
    toggleFAQ: function(index) {
        const answer = document.querySelectorAll('.faq-answer')[index];
        const question = document.querySelectorAll('.faq-question')[index];
        const icon = question.querySelector('i');
        
        if (answer.classList.contains('active')) {
            answer.classList.remove('active');
            question.classList.remove('active');
            icon.classList.remove('fa-chevron-up');
            icon.classList.add('fa-chevron-down');
        } else {
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –¥—Ä—É–≥–∏–µ –æ—Ç–∫—Ä—ã—Ç—ã–µ FAQ
            document.querySelectorAll('.faq-answer').forEach((ans, i) => {
                if (i !== index) {
                    ans.classList.remove('active');
                    document.querySelectorAll('.faq-question')[i].classList.remove('active');
                    document.querySelectorAll('.faq-question i')[i].classList.remove('fa-chevron-up');
                    document.querySelectorAll('.faq-question i')[i].classList.add('fa-chevron-down');
                }
            });
            
            answer.classList.add('active');
            question.classList.add('active');
            icon.classList.remove('fa-chevron-down');
            icon.classList.add('fa-chevron-up');
        }
    },
    
    showNewsDetail: function(news) {
        const modal = document.createElement('div');
        modal.className = 'modal';
        modal.style.display = 'flex';
        
        const newsDate = new Date(news.date);
        
        modal.innerHTML = `
            <div class="modal-content" style="max-width: 600px;">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 20px;">
                    <h3 style="color: var(--graphite-dark); font-family: 'Playfair Display', serif;">${news.title}</h3>
                    <button class="btn btn-secondary" onclick="this.closest('.modal').remove()" style="padding: 8px 12px;">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div style="color: var(--graphite-light); font-size: 0.9rem; margin-bottom: 20px; display: flex; align-items: center; gap: 8px;">
                    <i class="far fa-calendar"></i>
                    ${newsDate.toLocaleDateString('ru-RU')}
                </div>
                
                ${news.image_url ? `
                    <div style="margin-bottom: 20px; border-radius: var(--radius); overflow: hidden;">
                        <img src="${news.image_url}" alt="${news.title}" style="width: 100%; max-height: 300px; object-fit: cover;" />
                    </div>
                ` : ''}
                
                <div style="color: var(--graphite-dark); line-height: 1.6; font-size: 1rem;">
                    ${news.content}
                </div>
                
                <div style="margin-top: 30px;">
                    <button class="btn btn-primary w-100" onclick="this.closest('.modal').remove()">
                        –ó–∞–∫—Ä—ã—Ç—å
                    </button>
                </div>
            </div>
        `;
        
        document.body.appendChild(modal);
    },
    
    refreshSchedule: function() {
        this.loadSchedule().then(() => {
            this.renderSchedulePage();
            this.showNotification('–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ', 'success');
        });
    },
    
    // ==================== –£–ü–†–ê–í–õ–ï–ù–ò–ï –î–ê–ù–ù–´–ú–ò ====================
    saveUserData: function() {
        if (this.currentUser) {
            localStorage.setItem('artSchool_user', JSON.stringify(this.currentUser));
        }
        if (this.selectedProfile) {
            localStorage.setItem('artSchool_profile', JSON.stringify(this.selectedProfile));
        }
        if (this.selectedBranch) {
            localStorage.setItem('artSchool_branch', this.selectedBranch);
        }
    },
    
    loadSavedData: function() {
        const savedUser = localStorage.getItem('artSchool_user');
        const savedProfile = localStorage.getItem('artSchool_profile');
        const savedBranch = localStorage.getItem('artSchool_branch');
        
        if (savedUser) {
            this.currentUser = JSON.parse(savedUser);
        }
        if (savedProfile) {
            this.selectedProfile = JSON.parse(savedProfile);
        }
        if (savedBranch) {
            this.selectedBranch = savedBranch;
        }
    },
    
    // ==================== –£–ü–†–ê–í–õ–ï–ù–ò–ï –ò–ù–¢–ï–†–§–ï–ô–°–û–ú ====================
    updateUserInterface: function() {
        const userAvatar = document.getElementById('userAvatar');
        const menuUserName = document.getElementById('menuUserName');
        const menuUserEmail = document.getElementById('menuUserEmail');
        const loginMenuBtn = document.getElementById('loginMenuBtn');
        const logoutMenuBtn = document.getElementById('logoutMenuBtn');
        const bottomNav = document.getElementById('bottomNav');
        const floatingBtn = document.getElementById('floatingAdminBtn');
        
        if (this.currentUser) {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–≤–∞—Ç–∞—Ä
            if (userAvatar) {
                userAvatar.style.display = 'flex';
                const firstLetter = this.currentUser.first_name ? this.currentUser.first_name.charAt(0).toUpperCase() : '–ì';
                
                if (this.currentUser.avatar_url) {
                    const avatarImg = userAvatar.querySelector('img');
                    if (avatarImg) {
                        avatarImg.src = this.currentUser.avatar_url;
                        avatarImg.onerror = function() {
                            avatarImg.style.display = 'none';
                            userAvatar.textContent = firstLetter;
                        };
                    }
                } else {
                    userAvatar.textContent = firstLetter;
                }
            }
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –º–µ–Ω—é
            if (menuUserName) menuUserName.textContent = this.currentUser.first_name || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
            if (menuUserEmail) menuUserEmail.textContent = this.currentUser.email || this.currentUser.phone || '';
            
            if (loginMenuBtn) loginMenuBtn.style.display = 'none';
            if (logoutMenuBtn) logoutMenuBtn.style.display = 'block';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é –∏ –∫–Ω–æ–ø–∫—É –∞–¥–º–∏–Ω–∞ –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω –ø—Ä–æ—Ñ–∏–ª—å –∏ —Ñ–∏–ª–∏–∞–ª
            if (this.selectedProfile && this.selectedBranch) {
                if (bottomNav) bottomNav.style.display = 'flex';
                if (floatingBtn) floatingBtn.style.display = 'flex';
                
                // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ –ø—Ä–æ—Ñ–∏–ª–µ
                this.updateProfileStats();
            } else {
                if (bottomNav) bottomNav.style.display = 'none';
                if (floatingBtn) floatingBtn.style.display = 'none';
            }
            
        } else {
            // –ì–æ—Å—Ç—å
            if (userAvatar) userAvatar.style.display = 'none';
            if (menuUserName) menuUserName.textContent = '–ì–æ—Å—Ç—å';
            if (menuUserEmail) menuUserEmail.textContent = '';
            
            if (loginMenuBtn) loginMenuBtn.style.display = 'block';
            if (logoutMenuBtn) logoutMenuBtn.style.display = 'none';
            if (bottomNav) bottomNav.style.display = 'none';
            if (floatingBtn) floatingBtn.style.display = 'none';
        }
    },
    
    updateProfileStats: function() {
        const statVisits = document.getElementById('statVisits');
        const statRemaining = document.getElementById('statRemaining');
        const statBranch = document.getElementById('statBranch');
        const profileName = document.getElementById('profileName');
        const profileEmail = document.getElementById('profileEmail');
        const profileAvatar = document.getElementById('profileAvatar');
        const profileAvatarImg = document.getElementById('profileAvatarImg');
        
        if (statVisits && this.subscriptionData) {
            const totalVisits = this.subscriptionData.visits ? this.subscriptionData.visits.length : 0;
            statVisits.textContent = totalVisits;
        }
        
        if (statRemaining && this.subscriptionData) {
            statRemaining.textContent = this.subscriptionData.remaining_classes || 0;
        }
        
        if (statBranch) {
            statBranch.textContent = this.selectedBranch || '-';
        }
        
        if (profileName) {
            profileName.textContent = this.currentUser?.first_name || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
        }
        
        if (profileEmail) {
            profileEmail.textContent = this.currentUser?.email || this.currentUser?.phone || '';
        }
        
        if (profileAvatar && this.currentUser) {
            const firstLetter = this.currentUser.first_name ? this.currentUser.first_name.charAt(0).toUpperCase() : '–ì';
            
            if (this.currentUser.avatar_url && profileAvatarImg) {
                profileAvatarImg.src = this.currentUser.avatar_url;
                profileAvatarImg.onerror = function() {
                    profileAvatarImg.style.display = 'none';
                    profileAvatar.innerHTML = firstLetter;
                };
            } else {
                profileAvatar.innerHTML = firstLetter;
            }
        }
    },
    
    // ==================== –ù–ê–í–ò–ì–ê–¶–ò–Ø ====================
    navigateToPage: function(pageId) {
        // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.querySelectorAll('.page').forEach(function(page) {
            page.classList.remove('active');
        });
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ü–µ–ª–µ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
        const targetPage = document.getElementById(pageId + '-page');
        if (targetPage) {
            targetPage.classList.add('active');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É –≤ –Ω–∏–∂–Ω–µ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            document.querySelectorAll('.nav-item').forEach(function(item) {
                item.classList.remove('active');
                if (item.getAttribute('data-page') === pageId) {
                    item.classList.add('active');
                }
            });
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
            switch(pageId) {
                case 'home':
                    this.updateHomePage();
                    break;
                case 'schedule':
                    this.renderSchedulePage();
                    break;
                case 'subscription':
                    this.renderSubscriptionPage();
                    break;
                case 'teachers':
                    this.renderTeachersPage();
                    break;
                case 'faq':
                    this.renderFAQPage();
                    break;
                case 'news':
                    this.renderNewsPage();
                    break;
                case 'profile':
                    this.updateProfileStats();
                    break;
                case 'admin':
                    this.showAdminTab('broadcast');
                    break;
            }
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            this.closeUserMenu();
        }
    },
    
    determineInitialScreen: function() {
        if (this.currentUser && this.selectedProfile && this.selectedBranch) {
            this.navigateToPage('home');
        } else {
            this.navigateToPage('auth');
        }
    },
    
    handleBackButton: function() {
        // –õ–æ–≥–∏–∫–∞ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥" –≤ Telegram Web App
        const currentPage = document.querySelector('.page.active').id.replace('-page', '');
        
        if (currentPage === 'home') {
            if (window.Telegram && Telegram.WebApp) {
                Telegram.WebApp.close();
            }
        } else {
            this.navigateToPage('home');
        }
    },
    
    // ==================== –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø ====================
    showNotification: function(message, type) {
        const oldNotifications = document.querySelectorAll('.notification');
        oldNotifications.forEach(function(notif) {
            notif.remove();
        });
        
        const notification = document.createElement('div');
        notification.className = 'notification ' + (type || 'success');
        
        let icon = 'fas fa-check-circle';
        if (type === 'error') icon = 'fas fa-exclamation-circle';
        if (type === 'warning') icon = 'fas fa-exclamation-triangle';
        if (type === 'info') icon = 'fas fa-info-circle';
        
        notification.innerHTML = '<i class="' + icon + '"></i><span>' + message + '</span>';
        document.body.appendChild(notification);
        
        setTimeout(function() {
            if (notification.parentNode) {
                notification.classList.add('hiding');
                setTimeout(function() {
                    if (notification.parentNode) notification.remove();
                }, 300);
            }
        }, 3000);
    },
    
    showLoading: function(message) {
        const loadingEl = document.createElement('div');
        loadingEl.id = 'globalLoading';
        loadingEl.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255, 255, 255, 0.9); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 9999;';
        loadingEl.innerHTML = '<div class="spinner"></div><p style="margin-top: 20px; color: var(--graphite-dark);">' + (message || '–ó–∞–≥—Ä—É–∑–∫–∞...') + '</p>';
        document.body.appendChild(loadingEl);
    },
    
    hideLoading: function() {
        const loadingEl = document.getElementById('globalLoading');
        if (loadingEl) loadingEl.remove();
    },
    
    // ==================== –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê ====================
    closeModal: function(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) modal.classList.remove('active');
    },
    
    closeUserMenu: function() {
        const menu = document.getElementById('userMenu');
        if (menu) menu.style.display = 'none';
    },
    
    toggleUserMenu: function() {
        const menu = document.getElementById('userMenu');
        if (menu) {
            menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
        }
    },
    
    // ==================== API –í–ó–ê–ò–ú–û–î–ï–ô–°–¢–í–ò–ï ====================
    fetchWithAuth: async function(url, options = {}) {
        const headers = {
            'Content-Type': 'application/json',
            ...options.headers
        };
        
        if (this.currentToken) {
            headers['Authorization'] = 'Bearer ' + this.currentToken;
        }
        
        if (this.currentUser && this.currentUser.id) {
            headers['X-User-Id'] = this.currentUser.id;
        }
        
        try {
            const response = await fetch(url, {
                ...options,
                headers
            });
            
            if (response.status === 401) {
                // –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω - —Ä–∞–∑–ª–æ–≥–∏–Ω–∏–≤–∞–µ–º
                this.logout();
                throw new Error('–°–µ—Å—Å–∏—è –∏—Å—Ç–µ–∫–ª–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–π–¥–∏—Ç–µ —Å–Ω–æ–≤–∞.');
            }
            
            return response;
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞:', error);
            throw error;
        }
    },
    
    // ==================== –í–´–•–û–î ====================
    logout: function() {
        localStorage.removeItem('artSchool_user');
        localStorage.removeItem('artSchool_profile');
        localStorage.removeItem('artSchool_branch');
        localStorage.removeItem('token');
        
        this.currentUser = null;
        this.selectedProfile = null;
        this.selectedBranch = null;
        this.currentToken = null;
        
        this.updateUserInterface();
        this.navigateToPage('auth');
        
        this.showNotification('–í—ã —É—Å–ø–µ—à–Ω–æ –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã', 'success');
    },
    
    // ==================== –ú–û–ö –î–ê–ù–ù–´–ï –î–õ–Ø –†–ê–ó–†–ê–ë–û–¢–ö–ò ====================
    mockTelegramAuth: function() {
        this.showNotification('–†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: –∏–º–∏—Ç–∞—Ü–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏', 'info');
        
        // –°–æ–∑–¥–∞–µ–º –º–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        this.currentUser = {
            id: 1,
            first_name: '–¢–µ—Å—Ç–æ–≤—ã–π',
            last_name: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å',
            phone: '+79999999999',
            email: 'test@example.com'
        };
        
        // –ú–æ–∫ –¥–∞–Ω–Ω—ã–µ –æ–± –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞—Ö
        this.userProfiles = [
            {
                id: 1,
                deal_id: 101,
                student_name: '–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤',
                branch: '–°–≤–∏–±–ª–æ–≤–æ',
                subscription_type: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π',
                remaining_classes: 5,
                total_classes: 12,
                teacher_name: '–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞',
                expiration_date: '2024-12-31'
            },
            {
                id: 2,
                deal_id: 102,
                student_name: '–ú–∞—Ä–∏—è –ò–≤–∞–Ω–æ–≤–∞',
                branch: '–ß–µ—Ä—Ç–∞–Ω–æ–≤–æ',
                subscription_type: '–ü—Ä–µ–º–∏—É–º',
                remaining_classes: 8,
                total_classes: 16,
                teacher_name: '–°–µ—Ä–≥–µ–π –°–º–∏—Ä–Ω–æ–≤',
                expiration_date: '2024-11-30'
            }
        ];
        
        if (this.userProfiles.length === 1) {
            this.selectedProfile = this.userProfiles[0];
            this.selectedBranch = this.selectedProfile.branch;
            this.loadProfileData();
        } else {
            this.showProfileSelection();
        }
        
        this.updateUserInterface();
    },
    
    getMockSchedule: function() {
        return [
            {
                id: 1,
                date: new Date(Date.now() + 86400000).toISOString().split('T')[0],
                day_of_week: '–ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫',
                start_time: '16:00',
                end_time: '17:30',
                title: '–û—Å–Ω–æ–≤—ã —Ä–∏—Å—É–Ω–∫–∞',
                teacher_name: '–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞',
                status: 'normal'
            },
            {
                id: 2,
                date: new Date(Date.now() + 2 * 86400000).toISOString().split('T')[0],
                day_of_week: '–≤—Ç–æ—Ä–Ω–∏–∫',
                start_time: '17:00',
                end_time: '18:30',
                title: '–ê–∫–≤–∞—Ä–µ–ª—å–Ω–∞—è –∂–∏–≤–æ–ø–∏—Å—å',
                teacher_name: '–°–µ—Ä–≥–µ–π –°–º–∏—Ä–Ω–æ–≤',
                status: 'normal'
            },
            {
                id: 3,
                date: new Date(Date.now() + 3 * 86400000).toISOString().split('T')[0],
                day_of_week: '—Å—Ä–µ–¥–∞',
                start_time: '15:30',
                end_time: '17:00',
                title: '–ü–æ—Ä—Ç—Ä–µ—Ç–Ω–∞—è –≥—Ä–∞—Ñ–∏–∫–∞',
                teacher_name: '–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞',
                status: 'changed',
                status_note: '–ó–∞–º–µ–Ω–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è'
            }
        ];
    },
    
    getMockSubscription: function() {
        return {
            subscription_type: '–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π',
            branch: this.selectedBranch || '–°–≤–∏–±–ª–æ–≤–æ',
            total_classes: 12,
            remaining_classes: 5,
            expiration_date: '2024-12-31',
            visits: [
                { date: '2024-01-15', time: '16:00', status: 'attended' },
                { date: '2024-01-22', time: '16:00', status: 'attended' },
                { date: '2024-01-29', time: '16:00', status: 'attended' },
                { date: '2024-02-05', time: '16:00', status: 'attended' },
                { date: '2024-02-12', time: '16:00', status: 'attended' },
                { date: '2024-02-19', time: '16:00', status: 'attended' },
                { date: '2024-02-26', time: '16:00', status: 'missed' }
            ]
        };
    },
    
    getMockTeachers: function() {
        return [
            {
                id: 1,
                name: '–ê–Ω–Ω–∞ –ü–µ—Ç—Ä–æ–≤–∞',
                qualification: '–•—É–¥–æ–∂–Ω–∏–∫-–ø–µ–¥–∞–≥–æ–≥, —á–ª–µ–Ω –°–æ—é–∑–∞ —Ö—É–¥–æ–∂–Ω–∏–∫–æ–≤ –†–æ—Å—Å–∏–∏',
                specialization: '–ê–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–π —Ä–∏—Å—É–Ω–æ–∫, –≥—Ä–∞—Ñ–∏–∫–∞',
                branch: '–°–≤–∏–±–ª–æ–≤–æ',
                avatar_url: 'https://via.placeholder.com/150/4A90E2/FFFFFF?text=–ê–ü'
            },
            {
                id: 2,
                name: '–°–µ—Ä–≥–µ–π –°–º–∏—Ä–Ω–æ–≤',
                qualification: '–•—É–¥–æ–∂–Ω–∏–∫-–∂–∏–≤–æ–ø–∏—Å–µ—Ü, –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å —Å 15-–ª–µ—Ç–Ω–∏–º —Å—Ç–∞–∂–µ–º',
                specialization: '–ê–∫–≤–∞—Ä–µ–ª—å, –º–∞—Å–ª—è–Ω–∞—è –∂–∏–≤–æ–ø–∏—Å—å',
                branch: '–ß–µ—Ä—Ç–∞–Ω–æ–≤–æ',
                avatar_url: 'https://via.placeholder.com/150/9C6ADE/FFFFFF?text=–°–°'
            },
            {
                id: 3,
                name: '–ï–ª–µ–Ω–∞ –ö–æ–≤–∞–ª–µ–≤–∞',
                qualification: '–ò–ª–ª—é—Å—Ç—Ä–∞—Ç–æ—Ä, –¥–∏–∑–∞–π–Ω–µ—Ä',
                specialization: '–°–∫–µ—Ç—á–∏–Ω–≥, –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—è',
                branch: '–°–≤–∏–±–ª–æ–≤–æ',
                avatar_url: 'https://via.placeholder.com/150/FFC107/FFFFFF?text=–ï–ö'
            }
        ];
    },
    
    getMockFAQ: function() {
        return [
            {
                question: '–ö–∞–∫ –ø—Ä–æ–¥–ª–∏—Ç—å –∞–±–æ–Ω–µ–º–µ–Ω—Ç?',
                answer: '–î–ª—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è –∞–±–æ–Ω–µ–º–µ–Ω—Ç–∞ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º –≤–∞—à–µ–≥–æ —Ñ–∏–ª–∏–∞–ª–∞ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "–°–≤—è–∑–∞—Ç—å—Å—è —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º" –≤ —Ä–∞–∑–¥–µ–ª–µ "–ê–±–æ–Ω–µ–º–µ–Ω—Ç".'
            },
            {
                question: '–ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω—è—Ç–∏–µ?',
                answer: '–ï—Å–ª–∏ –≤—ã –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç–µ –∑–∞–Ω—è—Ç–∏–µ –ø–æ —É–≤–∞–∂–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–∏—á–∏–Ω–µ, —Å–æ–æ–±—â–∏—Ç–µ –æ–± —ç—Ç–æ–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –∑–∞ 24 —á–∞—Å–∞. –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö –≤–æ–∑–º–æ–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∑–∞–Ω—è—Ç–∏–µ.'
            },
            {
                question: '–ö–∞–∫–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –Ω—É–∂–Ω—ã –¥–ª—è –∑–∞–Ω—è—Ç–∏–π?',
                answer: '–û—Å–Ω–æ–≤–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã (–±—É–º–∞–≥–∞, –∫—Ä–∞—Å–∫–∏, –∫–∞—Ä–∞–Ω–¥–∞—à–∏) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è —à–∫–æ–ª–æ–π. –î–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–Ω—è—Ç–∏–π –º–æ–≥—É—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã, –æ —á–µ–º –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏—Ç –∑–∞—Ä–∞–Ω–µ–µ.'
            },
            {
                question: '–ú–æ–∂–Ω–æ –ª–∏ –ø–æ—Å–µ—â–∞—Ç—å –∑–∞–Ω—è—Ç–∏—è –≤ –¥—Ä—É–≥–æ–º —Ñ–∏–ª–∏–∞–ª–µ?',
                answer: '–î–∞, –ø–æ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–º—É —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—é —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏ –æ–±–æ–∏—Ö —Ñ–∏–ª–∏–∞–ª–æ–≤ –≤–æ–∑–º–æ–∂–Ω–æ —Ä–∞–∑–æ–≤–æ–µ –ø–æ—Å–µ—â–µ–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π –≤ –¥—Ä—É–≥–æ–º —Ñ–∏–ª–∏–∞–ª–µ.'
            }
        ];
    },
    
    getMockNews: function() {
        return [
            {
                id: 1,
                title: '–ù–æ–≤–∞—è –≤—ã—Å—Ç–∞–≤–∫–∞ —Ä–∞–±–æ—Ç —É—á–µ–Ω–∏–∫–æ–≤',
                date: new Date(Date.now() - 7 * 86400000).toISOString(),
                preview: '–ü—Ä–∏–≥–ª–∞—à–∞–µ–º –Ω–∞ –≤—ã—Å—Ç–∞–≤–∫—É –ª—É—á—à–∏—Ö —Ä–∞–±–æ—Ç –Ω–∞—à–∏—Ö —É—á–µ–Ω–∏–∫–æ–≤',
                content: '–° 15 –ø–æ 30 –º–∞—Ä—Ç–∞ –≤ —Ö–æ–ª–ª–µ —à–∫–æ–ª—ã –±—É–¥–µ—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –≤—ã—Å—Ç–∞–≤–∫–∞ —Ä–∞–±–æ—Ç –Ω–∞—à–∏—Ö —É—á–µ–Ω–∏–∫–æ–≤. –í—ã —Å–º–æ–∂–µ—Ç–µ —É–≤–∏–¥–µ—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–µ—Ç–µ–π –∑–∞ –ø—Ä–æ—à–µ–¥—à–∏–π –≥–æ–¥ –∏ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–µ—Ö–Ω–∏–∫–∞–º–∏ —Ä–∏—Å–æ–≤–∞–Ω–∏—è.',
                image_url: 'https://via.placeholder.com/600x300/4A90E2/FFFFFF?text=–í—ã—Å—Ç–∞–≤–∫–∞+—Ä–∞–±–æ—Ç'
            },
            {
                id: 2,
                title: '–ú–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å –ø–æ –∞–∫–≤–∞—Ä–µ–ª–∏',
                date: new Date(Date.now() - 3 * 86400000).toISOString(),
                preview: '–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö –∂–µ–ª–∞—é—â–∏—Ö',
                content: '15 –∞–ø—Ä–µ–ª—è –≤ 18:00 —Å–æ—Å—Ç–æ–∏—Ç—Å—è –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å –ø–æ –∞–∫–≤–∞—Ä–µ–ª—å–Ω–æ–π –∂–∏–≤–æ–ø–∏—Å–∏ –¥–ª—è –≤–∑—Ä–æ—Å–ª—ã—Ö. –í—Å–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è.',
                image_url: 'https://via.placeholder.com/600x300/9C6ADE/FFFFFF?text=–ú–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å'
            },
            {
                id: 3,
                title: '–õ–µ—Ç–Ω–∏–π –∏–Ω—Ç–µ–Ω—Å–∏–≤ –ø–æ —Ä–∏—Å–æ–≤–∞–Ω–∏—é',
                date: new Date().toISOString(),
                preview: '–ó–∞–ø–∏—Å—å –Ω–∞ –ª–µ—Ç–Ω–∏–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ –∫—É—Ä—Å—ã –æ—Ç–∫—Ä—ã—Ç–∞',
                content: '–° 1 –∏—é–Ω—è —Å—Ç–∞—Ä—Ç—É—é—Ç –ª–µ—Ç–Ω–∏–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã–µ –∫—É—Ä—Å—ã –¥–ª—è –¥–µ—Ç–µ–π –∏ –≤–∑—Ä–æ—Å–ª—ã—Ö. –ó–∞ –º–µ—Å—è—Ü –≤—ã –æ—Å–≤–æ–∏—Ç–µ –æ—Å–Ω–æ–≤—ã —Ä–∏—Å—É–Ω–∫–∞ –∏ –∂–∏–≤–æ–ø–∏—Å–∏. –ì—Ä—É–ø–ø—ã —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –ø–æ –≤–æ–∑—Ä–∞—Å—Ç—É –∏ —É—Ä–æ–≤–Ω—é –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏.',
                image_url: 'https://via.placeholder.com/600x300/FFC107/FFFFFF?text=–õ–µ—Ç–Ω–∏–π+–∫—É—Ä—Å'
            }
        ];
    },
    
    // ==================== –û–ë–†–ê–ë–û–¢–ß–ò–ö–ò –°–û–ë–´–¢–ò–ô ====================
    setupEventListeners: function() {
        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –∏—Ö
        document.addEventListener('click', (event) => {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (modal.classList.contains('active') && 
                    !event.target.closest('.modal-content') && 
                    !event.target.closest('[onclick*="show"]')) {
                    modal.classList.remove('active');
                }
            });
            
            // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const userMenu = document.getElementById('userMenu');
            if (userMenu && userMenu.style.display === 'block' && 
                !event.target.closest('#userMenu') && 
                !event.target.closest('#userAvatar')) {
                userMenu.style.display = 'none';
            }
        });
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∞–≤–∏—à–∏ Escape
        document.addEventListener('keydown', (event) => {
            if (event.key === 'Escape') {
                this.closeAllModals();
                this.closeUserMenu();
            }
        });
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ –∞–¥–º–∏–Ω–∫–µ
        const filters = ['adminBranchFilter', 'adminTeacherFilter', 'adminDayFilter', 'adminMessageType'];
        filters.forEach(filterId => {
            const element = document.getElementById(filterId);
            if (element) {
                element.addEventListener('change', () => {
                    if (filterId !== 'adminMessageType') {
                        this.calculateRecipients();
                    }
                });
            }
        });
    },
    
    closeAllModals: function() {
        document.querySelectorAll('.modal').forEach(modal => {
            modal.classList.remove('active');
        });
    }
};

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
document.addEventListener('DOMContentLoaded', function() {
    // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –Ω–µ–±–æ–ª—å—à–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π
    setTimeout(function() {
        app.init();
    }, 100);
});

// –î–µ–ª–∞–µ–º app –≥–ª–æ–±–∞–ª—å–Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ã–º
window.app = app;
</script>
</body>
</html>
